[
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "trigger_script_with_args;Global FUCK YOU RAINLASH",
            "music;Nostalgic Blood",
            "",
            "enable_supports;t",
            "",
            "change_background;SDM_Library",
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;Hi. I'm Patchouli Knowledge. Before you start this experience, we must ensure you are at|least somewhat competent in your basic mental comprehension. As such, me and Remi|have created this basic cognitive thinking test to ensure you are qualified to play.",
            "speak;Patchouli;After this pre-recorded message ends, the reading comprehension test will start. ",
            "trigger_script;0 Are you ready?",
            "trigger_script;0 Guide",
            "trigger_script;0 Math1",
            "trigger_script;0 Reading",
            "trigger_script;0 MathTest1",
            "trigger_script;0 MathTest2",
            "trigger_script;0 MathTest3",
            "speak;Patchouli;It seems you have performed sufficiently. You may pass.",
            "speak;Patchouli;Oh, but before you leave. I have on final question for you.",
            "speak;Patchouli;In this world of fantasy, how will you approach that will tip the scales?",
            "choice;Q7;Answer.;With spirit and passion.,With brute force.,With flexibility.,With an unflinching drive.,With interest.,With serene grace.,With foolhardy courage.",
            "if;'{v:Q7}' == 'With spirit and passion.'",
            "inc_game_var;Fire;1",
            "elif;'{v:Q7}' == 'With brute force.'",
            "inc_game_var;Thunder;1",
            "elif;'{v:Q7}' == 'With flexibility.'",
            "inc_game_var;Wind;1",
            "elif;'{v:Q7}' == 'With an unflinching drive.'",
            "inc_game_var;Ice;1",
            "elif;'{v:Q7}' == 'With interest.'",
            "inc_game_var;Anima;1",
            "elif;'{v:Q7}' == 'With serene grace.'",
            "inc_game_var;Light;1",
            "elif;'{v:Q7}' == 'With foolhardy courage.'",
            "inc_game_var;Dark;1",
            "end",
            "speak;Patchouli;I see. Go forth, then.",
            "transition;close",
            "change_background",
            "remove_portrait;Patchouli",
            "chapter_title",
            "enable_convoy;1",
            "enable_turnwheel;1",
            "enable_repair_shop;false",
            "game_var;_max_turnwheel_uses;3",
            "game_var;_current_turnwheel_uses;3",
            "game_var;_fatigue;0",
            "add_lore;Intro",
            "add_lore;Character_Stats",
            "add_lore;Prf_Weapons",
            "add_lore;Weapon_Stats_and_Tags",
            "add_lore;Weapon_Triangle",
            "add_lore;Effective_Damage",
            "add_lore;Movement_Types",
            "add_lore;Growths",
            "add_lore;Supports",
            "add_lore;Rescue",
            "add_lore;Combat_Arts",
            "add_lore;Stealing",
            "change_background;HakureiShrine",
            "transition;open",
            "music;The Gensokyo the Gods Loved",
            "add_portrait;Reimu;Right",
            "add_portrait;Marisa;Left;ExpressionList=Smile",
            "speak;Marisa;Phew, nothing like a nice cup of tea\u2028to start off the day! You've really|outdone yourself this time, Reimu!",
            "expression;Reimu;Smile",
            "speak;Reimu;Well, I had a feeling that it would be a good time to break out the special blend.",
            "speak;Marisa;What's even in this stuff, anyway?",
            "speak;Reimu;Warabi and kogomi.",
            "speak;Marisa;Heh. {c:wait;200}Are you sure that poverty goddess isn't the owner of this shrine?",
            "expression;Reimu;NoSmile",
            "move_portrait;Marisa;CenterLeft",
            "add_portrait;Remilia;FarLeft;ExpressionList=Smile",
            "speak;Remilia;Fufu, I heard that there was a party today.",
            "speak;Reimu;Even with you, we still couldn't make a full party...",
            "speak;Remilia;I see you have tea out. Let me take a sip.",
            "speak;Marisa;Where's that weird maid of yours, Remi?",
            "expression;Remilia;NoSmile",
            "speak;Remilia;I can go out by myself, thank you very much.",
            "speak;Reimu;Couldn't have guessed...",
            "expression;Remilia;Smile",
            "speak;Remilia;This tea is quite excellent, what manner of brew is this?",
            "speak;Reimu;Darjeeling.",
            "speak;Remilia;Really? Japanese darjeeling is quite different.",
            "move_portrait;Reimu;CenterRight",
            "add_portrait;Aunn;FarRight;ExpressionList=Smile",
            "speak;Aunn;Miss Reimu! Miss Yukari has come to see you!",
            "speak;Marisa;See, Reimu? We did have a full party!",
            "speak;Reimu;Oh, the komainu. I guess she counts.",
            "expression;Aunn;NoSmile",
            "speak;Aunn;I'm wounded by your words!",
            "remove_portrait;Aunn",
            "add_portrait;Yukari;ScreenPosition=FarRight;ExpressionList=Smile",
            "speak;Yukari;Greetings Reimu. And you too, Marisa.",
            "expression;Remilia;NoSmile",
            "expression;Marisa;NoSmile",
            "speak;Remilia;Am I not here too?",
            "speak;Yukari;Ah yes, and the vampire. Where's your maid?",
            "speak;Remilia;I seem to be getting that question a lot today.",
            "speak;Yukari;I believe it might relate to the absence of said maid.",
            "speak;Reimu;What do you need this time?",
            "speak;Yukari;Oh, nothing much. I simply wished to announce the start of another incident.",
            "speak;Reimu;Just what I needed on this peaceful morning. Who is it? The Moriyas? Animal realm? The|vampire next to me?",
            "speak;Remilia;I'm quite offended you would suspect the person who has been doing nothing but|enjoying this fine darjeeling with you.",
            "speak;Yukari;That tea is warabi and kogomi.",
            "speak;Remilia;...{c:wait;200}I may have a reason to start an incident.",
            "speak;Reimu;Quiet down. ",
            "speak;Yukari;Now this won't be like your typical incident.|I'm afraid something more unusual is afoot.",
            "speak;Reimu;You say that like that's not the norm.",
            "speak;Yukari;Ahaha, maybe a visual example would work better. Marisa, try firing some danmaku.",
            "speak;Marisa;With this lighting? Well, if you say so.",
            "bop_portrait;Marisa",
            "speak;Marisa;Huh? That's weird. Usually, stuff comes out when I do that.",
            "speak;Reimu;What's going on?",
            "speak;Remilia;It would seem that some strange force has rendered us unable to use danmaku.",
            "speak;Yukari;Ah, the vampire seems to be very quick after all.",
            "expression;Remilia;Smile",
            "speak;Remilia;It came with centuries of study.",
            "expression;Remilia;NoSmile",
            "speak;Reimu;Well then? How are we supposed to do this thing if we can't even shoot!",
            "speak;Yukari;Well, as much as I enjoy playing the part, I am not a complete monster~. Use these.",
            "bop_portrait;Yukari",
            "speak;Reimu;What will some old books and sticks do to help us?",
            "speak;Yukari;You'll see in time.",
            "speak;Yukari;Well, I would love to stay and chat, but I sensed a disturbance in the boundary recently, so I will be looking into that.|Good luck!",
            "remove_portrait;Yukari",
            "speak;Reimu;Damn gap youkai, always pushing responsibility onto me.",
            "speak;Marisa;Well, if we don't know who it is, why don't we just take care of everybody one by one?",
            "speak;Reimu;Sounds like a waste of time.",
            "speak;Marisa;You have any brighter ideas?",
            "speak;Reimu;Fair.",
            "add_portrait;Kasen;FarRight",
            "speak;Kasen;Hello, everyone!",
            "expression;Reimu;Smile",
            "speak;Reimu;Ah, just who I was looking for!",
            "speak;Kasen;What?",
            "speak;Reimu;You're coming along for a grand conquest of Gensokyo!",
            "expression;Remilia;Smile",
            "speak;Kasen;Reimu, I didn't agree-",
            "speak;Marisa;It's to solve an incident, don't worry about it.",
            "speak;Kasen;I don't even know what the incident is...",
            "speak;Marisa;Everyone's lost their spell cards, and we can't use danmaku, either.",
            "speak;Kasen;*sigh*",
            "speak;Remilia;I shall tag along too! This sounds like an interesting time.",
            "expression;Reimu;NoSmile",
            "speak;Reimu;Interesting this, fun that. Do you people ever think about anything but fun?",
            "speak;Marisa;Hey! I care! About having fun.",
            "speak;Kasen;I care...",
            "speak;Remilia;Speaking of which, it seems we have more guests at the torii.",
            "speak;Reimu;Not even time for a warmup.",
            "multi_remove_portrait;Reimu;Marisa;Kasen;Remilia",
            "music_clear",
            "music;Pocket Watch",
            "add_portrait;Rumia;Right;ExpressionList=Smile",
            "add_portrait;Reimu;CenterLeft",
            "add_portrait;Marisa;FarLeft",
            "speak;Rumia;Hahaha! With everyone's powers gone, it's time for an attack on Hakurei Shrine!",
            "speak;Reimu;This only exacerbates the power gap between us...",
            "expression;Rumia;NoSmile",
            "speak;Rumia;Shut it! I'll win today!",
            "expression;Marisa;Smile",
            "speak;Marisa;In broad daylight?",
            "speak;Rumia;Sh-shut it!",
            "autolevel_to;Rumia_Boss;5;fixed",
            ""
        ],
        "nid": "0 Intro"
    },
    {
        "name": "DeathRumia",
        "trigger": "combat_death",
        "level_nid": "0",
        "condition": "unit.nid == \"Rumia_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Rumia_Boss;Left",
            "speak;Rumia_Boss;This...isn't it!",
            "expression;Rumia_Boss;CloseEyes",
            "remove_portrait;Rumia_Boss",
            "give_bexp;100;no_banner",
            "show_combat_ui"
        ],
        "nid": "0 DeathRumia"
    },
    {
        "name": "DeathRumia_1",
        "trigger": "combat_death",
        "level_nid": "0",
        "condition": "unit.nid == \"Rumia_Boss_1\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Rumia_Boss;Left",
            "speak;Rumia_Boss;How?! How did you defeat me?!",
            "expression;Rumia_Boss;CloseEyes",
            "remove_portrait;Rumia_Boss",
            "show_combat_ui"
        ],
        "nid": "0 DeathRumia_1"
    },
    {
        "name": "DeathReisen",
        "trigger": "combat_death",
        "level_nid": "5",
        "condition": "unit.nid == \"Reisen_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Reisen;Left",
            "speak;Reisen;One more bullet...to fire!",
            "expression;Reisen;CloseEyes",
            "remove_portrait;Reisen",
            "show_combat_ui"
        ],
        "nid": "5 DeathReisen"
    },
    {
        "name": "DeathReisen_1",
        "trigger": "combat_death",
        "level_nid": "5",
        "condition": "unit.nid == \"Reisen_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Reisen;Left",
            "speak;Reisen;Insane...",
            "expression;Reisen;CloseEyes",
            "remove_portrait;Reisen",
            "show_combat_ui"
        ],
        "nid": "5 DeathReisen_1"
    },
    {
        "name": "DeathSekibanki",
        "trigger": "combat_death",
        "level_nid": "1",
        "condition": "unit.nid == \"Sekibanki_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Sekibanki;Left",
            "speak;Sekibanki;Heheh...I'm not done just yet...",
            "remove_portrait;Sekibanki",
            "level_var;SekibankiSpellMusic;1",
            "show_combat_ui"
        ],
        "nid": "1 DeathSekibanki"
    },
    {
        "name": "DeathSekibanki_1",
        "trigger": "combat_death",
        "level_nid": "1",
        "condition": "unit.nid == \"Sekibanki_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Sekibanki;Left",
            "speak;Sekibanki;Ugh...You're still awfully strong...",
            "expression;Sekibanki;CloseEyes",
            "remove_portrait;Sekibanki",
            "level_var;SekibankiSpellMusic;0",
            "give_bexp;100;Reimu",
            "show_combat_ui"
        ],
        "nid": "1 DeathSekibanki_1"
    },
    {
        "name": "DeathKagerou",
        "trigger": "combat_death",
        "level_nid": "1",
        "condition": "unit.nid == \"Kagerou_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Kagerou;Left",
            "speak;Kagerou;Tch...time to pull out my ace!",
            "remove_portrait;Kagerou",
            "level_var;KagerouSpellMusic;1",
            "show_combat_ui"
        ],
        "nid": "1 DeathKagerou"
    },
    {
        "name": "DeathKagerou_1",
        "trigger": "combat_death",
        "level_nid": "1",
        "condition": "unit.nid == \"Kagerou_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Kagerou;Left",
            "speak;Kagerou;I knew I shouldn't have come out...",
            "expression;Kagerou;CloseEyes",
            "remove_portrait;Kagerou",
            "level_var;KagerouSpellMusic;0",
            "give_bexp;200;Reimu",
            "show_combat_ui"
        ],
        "nid": "1 DeathKagerou_1"
    },
    {
        "name": "DeathWakasagihime",
        "trigger": "combat_death",
        "level_nid": "1",
        "condition": "unit.nid == \"Wakasagihime_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Wakasagihime;Left",
            "speak;Wakasagihime;I'm sorry...Kagerou, Sekibanki...",
            "expression;Wakasagihime;CloseEyes",
            "remove_portrait;Wakasagihime",
            "give_bexp;50;no_banner",
            "show_combat_ui"
        ],
        "nid": "1 DeathWakasagihime"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "transition;close",
            "change_background;HakureiShrine",
            "transition;Open",
            "music;Skygazer",
            "add_portrait;Reimu;FarLeft",
            "add_portrait;Marisa;CenterLeft",
            "speak;Reimu;You should really know that someone of your stature isn't going to take me down with brute force.",
            "speak;Marisa;Should we take her with us?",
            "speak;Reimu;Nah. Too much work to babysit a youkai.",
            "add_portrait;Rumia;Right",
            "speak;Rumia;Ughh...so rough...",
            "speak;Reimu;Get out of my shrine!",
            "speak;Rumia;Eeeek!",
            "remove_portrait;Rumia",
            "add_portrait;Kasen;CenterRight",
            "speak;Kasen;*sigh* {tgm}Well, that's that. This feels like it is going to be a long day.;no_talk",
            "add_portrait;Remilia;FarRight;ExpressionList=Smile",
            "speak;Remilia;Seems that everybody's already up and ready for a fight! This should be quite exciting.",
            "speak;Marisa;Don't you also have to get back to do your own preparations at this point?",
            "speak;Remilia;I decided it would be a more entertaining bit to just help you this time. ",
            "speak;Reimu;Vampires are such fickle beings.",
            "speak;Marisa;So where to next? We've got plenty of options.",
            "speak;Kasen;We should probably go check on the Human Village. It's at risk of being attacked by youkai in this time of need. ",
            "speak;Reimu;Well, I do extermination for a reason. I do suppose Keine might need our help.",
            "speak;Marisa;And hey, helpin' those villagers might get us some allies too!",
            "speak;Reimu;Well, that settles it. To the human village!",
            "transition;Close",
            "game_var;chaptercount;0",
            "set_next_chapter;Base"
        ],
        "nid": "0 Outro"
    },
    {
        "name": "DefeatRumia",
        "trigger": "combat_end",
        "level_nid": "0",
        "condition": "game.check_dead(\"Rumia_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "change_music;boss_battle;Dullahan Under the Willows",
            "add_portrait;Rumia;Left",
            "enable_fog_of_war;t",
            "speak;;Darkness Sign \"Demarcation\";center;150;hint;;red;;;1;;;;;Warp",
            "add_group;RumiaStage2;RumiaStage2;warp;closest",
            "autolevel_to;Rumia_Boss_1;5;fixed",
            "move_cursor;Rumia_Boss_1",
            "speak;Rumia;Hahaha! Let's see you find me now!",
            "remove_portrait;Rumia",
            "set_fog_of_war;thracia;3;3;3",
            "move_cursor;Reimu",
            "add_portrait;Reimu;Right",
            "add_portrait;Kasen;Left",
            "speak;Reimu;What the heck is this? A spell card?",
            "speak;Kasen;Hmmm...not quite. It seems that whatever's causing this incident is also causing people to|go haywire with their powers, letting them unleash special attack patterns.",
            "speak;Reimu;So they're...spell cards.",
            "multi_remove_portrait;Reimu;Kasen",
            "speak;;Certain boss characters will unleash \"special patterns\" after they are defeated the first time.|As a rule of thumb, all bosses with a portrait will usually have at least one \"special pattern\".;;;hint",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('RumiaStage2').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "0 DefeatRumia"
    },
    {
        "name": "DefeatRumia_1",
        "trigger": "combat_end",
        "level_nid": "0",
        "condition": "game.check_dead(\"Rumia_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "0 DefeatRumia_1"
    },
    {
        "name": "FightRumia",
        "trigger": "combat_start",
        "level_nid": "0",
        "condition": "(unit.nid == \"Rumia_Boss\" and unit2.team == 'player') or (unit2.nid == \"Rumia_Boss\" and unit.team == 'player')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Rumia_Boss;Left",
            "speak;Rumia_Boss;You won't beat me again! I'm much stronger now! Embrace the darkness!",
            "remove_portrait;Rumia_Boss",
            "show_combat_ui"
        ],
        "nid": "0 FightRumia"
    },
    {
        "name": "FightReisen",
        "trigger": "combat_start",
        "level_nid": "5",
        "condition": "unit.nid == \"Reisen_Boss\" or unit2.nid == \"Reisen_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Reisen;Left",
            "speak;Reisen;This is as far as you go! Now, gaze into my eyes...and fall to insanity!",
            "remove_portrait;Reisen",
            "show_combat_ui"
        ],
        "nid": "5 FightReisen"
    },
    {
        "name": "FightEirin",
        "trigger": "combat_start",
        "level_nid": "5",
        "condition": "unit.nid == \"Eirin_Boss\" or unit2.nid == \"Eirin_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Eirin;Left",
            "speak;Eirin;You stand in the presence of the Brain of the Moon!",
            "remove_portrait;Eirin",
            "show_combat_ui"
        ],
        "nid": "5 FightEirin"
    },
    {
        "name": "FightSekibanki",
        "trigger": "combat_start",
        "level_nid": "1",
        "condition": "(unit.nid == \"Sekibanki_Boss\" and unit2.team == 'player') or (unit2.nid == \"Sekibanki_Boss\" and unit.team == 'player')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Sekibanki;Left",
            "speak;Sekibanki;We're gonna make you learn the meaning of fear again...|Bow down before the might of us youkai!",
            "remove_portrait;Sekibanki",
            "show_combat_ui"
        ],
        "nid": "1 FightSekibanki"
    },
    {
        "name": "FightWakasagihime",
        "trigger": "combat_start",
        "level_nid": "1",
        "condition": "(unit.nid == \"Wakasagihime_Boss\" and unit2.team == 'player') or (unit2.nid == \"Wakasagihime_Boss\" and unit.team == 'player')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Wakasagihime;Left",
            "speak;Wakasagihime;I won't let my friends down!! Take that!!",
            "remove_portrait;Wakasagihime",
            "show_combat_ui"
        ],
        "nid": "1 FightWakasagihime"
    },
    {
        "name": "FightKagerou",
        "trigger": "combat_start",
        "level_nid": "1",
        "condition": "(unit.nid == \"Kagerou_Boss\" and unit2.team == 'player') or (unit2.nid == \"Kagerou_Boss\" and unit.team == 'player')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Kagerou;Left",
            "speak;Kagerou;You've come to defeat me, haven't you? I won't lose!",
            "remove_portrait;Kagerou",
            "show_combat_ui"
        ],
        "nid": "1 FightKagerou"
    },
    {
        "name": "House1",
        "trigger": "Visit",
        "level_nid": "1",
        "condition": "region.nid == 'House1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Man1;Left;no_block",
            "add_portrait;{unit};Right",
            "speak;Man1;Got this cool sword from Kourindou the other\u2028day! The shopkeep told me it'd be good for|cooking, but...it burnt my meat a bit too well.|Yeah, it was cheap, but I don't really have a\u2028use for it now. Maybe you could use it?",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Flamberge",
            "give_bexp;30;no_banner",
            "show_layer;Closed1",
            "has_traded;{unit}"
        ],
        "nid": "1 House1"
    },
    {
        "name": "House2",
        "trigger": "Visit",
        "level_nid": "1",
        "condition": "region.nid == 'House2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Man2;Left;no_block",
            "add_portrait;{unit};Right",
            "speak;Man2;Sometimes, you need a bit of speed in your\u2028life to get things done.|I like to use light tools myself since they\u2028let you move around and do things faster,|like this axe here!",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Slim_Axe",
            "give_bexp;30;no_banner",
            "show_layer;Closed2",
            "has_traded;{unit}"
        ],
        "nid": "1 House2"
    },
    {
        "name": "House3",
        "trigger": "Visit",
        "level_nid": "1",
        "condition": "region.nid == 'House3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "add_portrait;Man2;Left;no_block",
            "add_portrait;{unit};Right",
            "speak;Man2;H-hey, what's going on? Why are all these youkai going crazy?|I dunno what's going on, but take this. That pharmacist who comes around here sometimes gave it to me. Stay safe.",
            "change_background",
            "transition;Open",
            "give_item;{unit};Eirins_Drugs",
            "give_bexp;30;no_banner",
            "show_layer;Closed3",
            "has_traded;{unit}"
        ],
        "nid": "1 House3"
    },
    {
        "name": "Seize",
        "trigger": "Seize",
        "level_nid": "1",
        "condition": "'Lord' in unit.tags",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "1 Seize"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 15",
            "give_bexp;300",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 35",
            "give_bexp;{e:300 - ((game.turncount - 15) * 15)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 35",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "change_background;VillageGate",
            "music;Skygazer",
            "add_portrait;Keine;Left",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Marisa;FarRight",
            "speak;Keine;Alright, that seems to be the last of them.",
            "speak;Marisa;Yer really scary when you get mad, y'know?",
            "speak;Keine;The safety of the village is my main priority.",
            "speak;Reimu;Mmm yeah, a few of them are just standing there, quivering.",
            "speak;Marisa;That's also partially 'cause of you, Reimu.",
            "speak;Reimu;Hmph, as it should be.",
            "speak;Keine;Anyways, thanks for your help. It was really convenient that you came by at this time.",
            "speak;Reimu;Awesome. Now, on the subject of a reward...",
            "speak;Keine;I guess I can give you this.",
            "give_item;Reimu;Yukkuri_M",
            "expression;Marisa;Smile",
            "speak;Marisa;Hey, it looks a little like me!",
            "speak;Keine;Kourindou was selling these the other day, so I decided to buy one.",
            "speak;Reimu;The heck am I supposed to do with this?",
            "speak;Keine;It does seem valuable. Maybe a merchant would be willing to take it off your hands?",
            "speak;Reimu;Tch, stingy.",
            "transition;close",
            "change_background;River",
            "multi_remove_portrait;Keine;Marisa",
            "multi_add_portrait;Kagerou;CenterLeft;Sekibanki;FarLeft;Kasen;FarRight;Reimu;CenterRight",
            "transition;open",
            "speak;Kagerou;Rrghhh! Let us go! How dare you wrap us in these ropes!",
            "speak;Reimu;Y'know, the werewolf seems a bit more aggressive than usual, just like during that|miracle mallet incident.",
            "speak;Kasen;They should snap back if you just bonk them a bit.",
            "bop_portrait;Reimu",
            "sound;Attack Hit 1",
            "speak;Kagerou;Ow!",
            "bop_portrait;Reimu",
            "sound;Attack Hit 2",
            "speak;Sekibanki;Yowch!",
            "speak;Reimu;All back to normal?",
            "speak;Kagerou;H-huh?! What's happening?",
            "speak;Sekibanki;Where are we...",
            "remove_portrait;Sekibanki",
            "add_portrait;Wakasagihime;FarLeft",
            "speak;Wakasagihime;Eeek! The Crimson Slasher!",
            "remove_portrait;Wakasagihime",
            "add_portrait;Sekibanki;FarLeft",
            "speak;Sekibanki;So much for camaraderie.",
            "speak;Kasen;Well, they were definitely possessed by the miracle mallet. But is it really the fault of|that inchling?",
            "speak;Kagerou;Uhhh...last thing I remember is being hit on the head by some maid.",
            "speak;Reimu;Remilia?",
            "remove_portrait;Kasen",
            "add_portrait;Remilia;FarRight",
            "speak;Remilia;Sakuya isn't the only maid in existence, you know?",
            "remove_portrait;Remilia",
            "add_portrait;Kasen;FarRight",
            "speak;Sekibanki;No, no. That maid was blonde. Also somehow scarier than the vampire's maid.",
            "speak;Reimu;Weird. Never heard of anybody like that.",
            "speak;Kagerou;Oh, and she was carrying... that mallet too.",
            "speak;Reimu;So then the miracle mallet is involved then.",
            "speak;Sekibanki;Cripes. Give me a mon for every time I've been hit in the head today. This smarts.",
            "speak;Reimu;If you don't leave in the next ten seconds,|I'll make it your third. Free of charge~.",
            "speak;Kagerou;Eeek!",
            "speak;Sekibanki;G-got it!",
            "multi_remove_portrait;Sekibanki;Kagerou",
            "speak;Kasen;No need to be so rough on them.",
            "speak;Reimu;Well, they're guilty of falling for the same trick twice. Plus, never helped anyone to|be soft on youkai.",
            "speak;Kasen;We could've at least conscripted them. Would've been helpful.",
            "speak;Reimu;Oh. Right. Oh well. Any ideas where we should head from here?",
            "speak;Kasen;Maybe Eientei. That doctor may have a better treatment than brute force.",
            "speak;Reimu;Fine by me. I'm itching for a fight with Eirin anyway.",
            "speak;Kasen;Wait, did you say fight?",
            "speak;Reimu;I mean, gotta make a conquest one way or another, right? The medicine'll just be an|extra objective.",
            "speak;Kasen;I thought the whole point was to use *less* brute force.",
            "transition;close",
            "change_background",
            "transition;open",
            "game_var;chaptercount;1",
            "set_next_chapter;Base"
        ],
        "nid": "1 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "add_base_convo;Fog",
            "change_background;River",
            "transition;open",
            "music;A Popular Location",
            "add_portrait;Reimu;CenterLeft",
            "add_portrait;Marisa;FarLeft",
            "add_portrait;Kasen;Right",
            "speak;Kasen;Alright, I think we've spent enough time here. Let's head out.",
            "speak;Marisa;Aw, but we didn't even get to stay for the party! Those villagers are offerin' booze!",
            "speak;Reimu;Never heard of an oni declining booze.",
            "speak;Kasen;You shouldn't be willing to take advantage of the villagers' kindness! What would others|think if you were willing to be that superficial?",
            "speak;Reimu;Nothing much different, I suppose.",
            "speak;Marisa;Heroes should be rewarded! That's what I think!",
            "speak;Kasen;I'll have you know that (blah blah blah...)",
            "speak;Reimu;Pssst! Just agree with her so she'll let us go!",
            "speak;Kasen;(Blah blah blah blah...)",
            "speak;Reimu;We'll just take a few bottles for the road!",
            "speak;Marisa;Alright, fine! You're right, you're right! No booze!",
            "speak;Kasen;Thank you. Now, let's get going.",
            "transition;close",
            "music_clear",
            "change_background;Backwoods (Night)",
            "multi_remove_portrait;Marisa;Reimu;Kasen",
            "transition;open",
            "music;Illusionary Night",
            "add_portrait;Reimu;CenterLeft",
            "add_portrait;Marisa;FarLeft",
            "add_portrait;Kasen;Right",
            "speak;Reimu;Phew. Finally made it. How long did that take?",
            "speak;Kasen;About six hours. Would have been faster if you didn't bring along the booze.",
            "speak;Reimu;Hey! I'm just saying, it was good quality!",
            "speak;Marisa;She's a got a point...",
            "speak;Kasen;Well, now that it's dusk, we can't see anything. Please adjust your drinking habits to be|mindful of our strategizing in the future.",
            "speak;Marisa;Bah, it's all about being flashy anyway! I'll just light up the night sky with my spells!",
            "speak;Reimu;True. If we keep marching, we'll eventually run into someone!",
            "speak;Kasen;*sigh*",
            "transition;close",
            "multi_remove_portrait;Marisa;Reimu;Kasen",
            "transition;open",
            "add_portrait;Wriggle;Left",
            "add_portrait;Mystia;Right",
            "speak;Mystia;Ah, intruders in the dark! Easy pickings, la la la~",
            "speak;Wriggle;Bold words for someone unarmed.",
            "speak;Mystia;Well, that's why you're here, right?",
            "speak;Wriggle;Needless to say, I'd love it if you contributed as much as me and the fireflies...",
            "speak;Mystia;I'm the brains here, bucko! The strategist has to stay in the back, dummy!",
            "speak;Wriggle;Who are you calling dummy, bird brain?!",
            "speak;Mystia;Ugh, let's take care of this prey and get it over with already... Hey, weren't we supposed|to do something before this?",
            "speak;Wriggle;Speak of a birdbrain. ",
            "speak;Mystia;Shut it! You probably forgot too!",
            "speak;Wriggle;Well, that isn't my job. I am a lowly frontliner after all.",
            "speak;Mystia;Well, I guess we're even, then. Wait... is that the shrine maiden?",
            "speak;Wriggle;Greenie or meanie?",
            "speak;Mystia;Meanie.",
            "speak;Wriggle;Relaaaax! We have the cover of the dark! They won't know what hit them! Plus, it's not|like they have any lanterns or anything!",
            "transition;close",
            "multi_remove_portrait;Wriggle;Mystia",
            "transition;open",
            "add_portrait;Reimu;CenterLeft",
            "add_portrait;Marisa;FarLeft",
            "add_portrait;Kasen;Right",
            "speak;Reimu;Achoo!",
            "speak;Marisa;Bless you! Are you sick?",
            "speak;Reimu;No. I just got the feeling someone was talking about me. Was it you?",
            "speak;Marisa;I've been right next to you the whole time, how could it be me?",
            "speak;Kasen;Pipe down, you two. Let's just set up camp now.",
            "transition;close",
            "change_background",
            "multi_remove_portrait;Marisa;Reimu;Kasen",
            "enable_fog_of_war;t",
            "set_fog_of_war;gba;5;5;5",
            "autolevel_to;Wriggle_Boss;3;fixed",
            "autolevel_to;Mystia_Boss;3;fixed",
            "prep;1;Sealed Gods",
            "transition;open",
            "speak;;This map's clear bonus is 300 Bonus EXP, with a decrease of 60 BExp per turn you take over 15 turns!;;;hint"
        ],
        "nid": "2 Intro"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "2",
        "condition": "region.nid == 'Village1' ",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "if;game.turncount < 7",
            "add_portrait;Mokou;Left",
            "add_portrait;{unit1};Right",
            "speak;Mokou;Hey, what's with all the noise outside? Some people are trying to get some sleep here! ",
            "speak;{unit};...;no_talk",
            "speak;Mokou;What's with the weird look? Even immortals need to sleep once in a while. ",
            "speak;Mokou;Ugh, it can't be helped. ",
            "speak;Mokou;Take this. Go away.",
            "transition;close",
            "multi_remove_portrait;Mokou;{unit1}",
            "change_background",
            "transition;open",
            "give_bexp;200;no_banner",
            "give_item;{unit};Torch_Tome",
            "has_traded;{unit}",
            "show_layer;Village1",
            "else",
            "add_portrait;{unit1};Right",
            "speak;{unit1};What's this?",
            "transition;close",
            "remove_portrait;{unit1}",
            "change_background",
            "transition;open",
            "give_item;{unit};Thunder",
            "give_bexp;50;no_banner",
            "has_traded;{unit}",
            "show_layer;Village1",
            "end"
        ],
        "nid": "2 Village1"
    },
    {
        "name": "Turn8",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Rein1;Rein1;fade;closest",
            "end"
        ],
        "nid": "2 Turn8"
    },
    {
        "name": "Turn6",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 6",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Rein3;Rein3;fade;closest",
            "end"
        ],
        "nid": "2 Turn6"
    },
    {
        "name": "Turn9",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 9",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Rein2;Rein2;fade;closest",
            "add_group;Mokou;Mokou;fade;closest",
            "move_cursor;Mokou_NPC",
            "flicker_cursor;Mokou_NPC",
            "add_portrait;Mokou;Left",
            "speak;Mokou;Alright! Who the hell is making this much noise at this time?! If this is another one of|Kaguya's schemes, I'm gonna burn you all to a crisp!",
            "remove_portrait;Mokou",
            "level_var;MokouOut;1",
            "end"
        ],
        "nid": "2 Turn9"
    },
    {
        "name": "FightWriggle",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Wriggle_Boss\" and unit2.team == 'player' and unit.team == \"enemy\") or (unit2.nid == \"Wriggle_Boss\" and unit.team == 'player' and unit2.team == \"enemy\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Wriggle;Left",
            "speak;Wriggle;Heh, you fell into our trap! My bugs and I will teach you a lesson!",
            "remove_portrait;Wriggle",
            "show_combat_ui"
        ],
        "nid": "2 FightWriggle"
    },
    {
        "name": "FightMystia",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Mystia_Boss\" and unit2.team == 'player' and unit.team == \"enemy\") or (unit2.nid == \"Mystia_Boss\" and unit.team == 'player' and unit2.team == \"enemy\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Mystia;Left",
            "speak;Mystia;Bet you didn't see me coming, huh? Now, fall prey to my darkness!",
            "remove_portrait;Mystia",
            "show_combat_ui"
        ],
        "nid": "2 FightMystia"
    },
    {
        "name": "FightMokou",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Mokou_NPC\" and unit2.team == 'enemy') or (unit2.nid == \"Mokou_NPC\" and unit.team == 'enemy')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Mokou;Left",
            "speak;Mokou;Outta my way! I have fools to burn!",
            "remove_portrait;Mokou"
        ],
        "nid": "2 FightMokou"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "2",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 15",
            "    give_bexp;300",
            "    speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 20",
            "    give_bexp;{e:300 - ((game.turncount - 15) * 60)}",
            "    speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 20",
            "    speak;;Lmao skill issue;;;hint",
            "end",
            "end_skip",
            "transition;close",
            "music;Skygazer",
            "change_background;Backwoods (Night)",
            "transition;open",
            "add_portrait;Reimu;CenterLeft",
            "add_portrait;Marisa;FarLeft",
            "add_portrait;Kasen;Right",
            "speak;Kasen;It seems those two were under the same trance as those youkai at the Human Village.",
            "speak;Reimu;Figures - I know those youkai at the village wouldn't be the only ones.",
            "speak;Kasen;There seems to be something more to this...but we have to press on now.",
            "speak;Marisa;This night is gettin' quite dark!",
            "speak;Kasen;Yeah, if only someone didn't drink...",
            "speak;Reimu;We should probably get information out of those two.",
            "speak;Kasen;I'll bring them in.",
            "remove_portrait;Kasen",
            "add_portrait;Wriggle;CenterRight",
            "add_portrait;Mystia;FarRight",
            "speak;Wriggle;H-hey! Let us go! We'll beat you up!",
            "speak;Marisa;But you've BEEN beaten up.",
            "bop_portrait;Reimu",
            "sound;Attack Hit 3",
            "speak;Wriggle;OW!",
            "bop_portrait;Reimu",
            "sound;Attack Hit 4",
            "speak;Mystia;Eek!",
            "speak;Wriggle;Huh? What's going on?",
            "speak;Mystia;Head...spinning...",
            "speak;Reimu;Listen up, you two.",
            "speak;Wriggle;Guh...when did we get captured by the mean red one...?",
            "speak;Reimu;What do you last remember?",
            "speak;Mystia;We were...oh yeah! We were on our way to save Cirno and Dai from being imprisoned by|those Eientei people!",
            "speak;Reimu;Imprisoned? What for?",
            "speak;Wriggle;Don't know. We were just trying to save them.",
            "speak;Mystia;And then...someone knocked us out with a hammer.",
            "speak;Reimu;Weird. Anyways, is that it?",
            "speak;Wriggle;Yeah!",
            "speak;Reimu;Thank you for your cooperation.",
            "bop_portrait;Reimu",
            "sound;Critical Kill",
            "expression;Wriggle;CloseEyes",
            "expression;Mystia;CloseEyes",
            "multi_remove_portrait;Mystia;Wriggle",
            "speak;Marisa;Reimu! You didn't need to be that forceful!",
            "speak;Reimu;Oh well, less liabilities down the line.",
            "add_portrait;Kasen;Right",
            "speak;Kasen;It might be wiser to recruit these two instead. I sense they'll be useful.",
            "speak;Reimu;Really? What a pain.",
            "speak;Kasen;As the Hakurei Shrine Maiden, should you not strive to treat all beings with impartiality? ",
            "speak;Reimu;No. I exterminate youkai for a living.",
            "speak;Kasen;Fair enough...",
            "speak;Marisa;I'll go...drag them to a more comfortable place.",
            "remove_portrait;Marisa",
            "speak;Kasen;Still. It's weird that the folks at Eientei are capturing people. What could this be for?",
            "speak;Reimu;And fairies, too...we need to get to the bottom of this.",
            "multi_remove_portrait;Reimu;Kasen",
            "end_skip",
            "#wriggle",
            "    add_portrait;Reimu;Right",
            "    add_portrait;Wriggle;Left",
            "    speak;Wriggle;Owww...that last strike hurt...",
            "    speak;Reimu;You up yet?",
            "    speak;Wriggle;Gah! Where did you come from?!",
            "    speak;Reimu;I've been standing here. Anyways. Soldiers are better left alive than dead, so I've|decided to give you two choices. You can A.) Join the army, or B.) Contribute to my|extermination records.",
            "    speak;Wriggle;I think I really like option A over B!",
            "    speak;Reimu;Excellent. Come along, now.",
            "    speak;Wriggle;*sigh* That damn birdbrain...",
            "    multi_remove_portrait;Reimu;Wriggle",
            "    resurrect;Wriggle",
            "    load_unit;Wriggle;player",
            "    change_team;Wriggle;player",
            "    change_party;Wriggle;Reimu",
            "    autolevel_to;Wriggle;3",
            "    end_skip",
            "end",
            "#mystia",
            "    add_portrait;Reimu;Right",
            "    add_portrait;Mystia;Left",
            "    speak;Reimu;Rise and shine, birdbrain.",
            "    speak;Mystia;Geh! Not the meanie...",
            "    speak;Reimu;Did I hear something?",
            "    speak;Mystia;Nothing, nothing...",
            "    speak;Reimu;Kasen said I had to be \"ethical\" and give you guys a chance, so come along now.",
            "    speak;Mystia;Huh?",
            "    speak;Reimu;You're part of the army now. Move along.",
            "    speak;Mystia;Do I have a say, or-",
            "    speak;Reimu;Damn, that negotiation didn't work, I guess it's time to resort to good ol vio-",
            "    speak;Mystia;I'll join! I'll join!",
            "    speak;Reimu;Kinda wish you continued, but alright.",
            "    remove_portrait;Reimu",
            "    speak;Mystia;What a scary lady...",
            "    remove_portrait;Mystia",
            "    resurrect;Mystia",
            "    load_unit;Mystia;player",
            "    change_team;Mystia;player",
            "    change_party;Mystia;Reimu",
            "    end_skip",
            "end",
            "if;not u('Mokou_NPC').dead",
            "    add_portrait;Mokou;Left",
            "    add_portrait;Marisa;Right",
            "    speak;Mokou;Ugh. What a pain. Can't get a good night's sleep.",
            "    speak;Marisa;Sorry 'bout that. I owe ya one.",
            "    speak;Mokou;Don't worry about it. I've been alive for too long.",
            "    speak;Marisa;Guess so.",
            "    speak;Mokou;Here, want a smoke?",
            "    speak;Marisa;Mmm...alright.",
            "    speak;Mokou;How is it?",
            "    bop_portrait;Marisa",
            "    speak;Marisa;*hack* *hack* The hell is this stuff?! Nasty stuff, I tell ya!",
            "    expression;Mokou;Smile",
            "    speak;Mokou;Heh, no regenerating lungs like mine.",
            "    speak;Marisa;My mushrooms taste better than this!",
            "    speak;Mokou;Haha.",
            "    speak;Marisa;By the way, we're heading to visit a certain other immortal soon. Wanna come?",
            "    expression;Mokou;NoSmile",
            "    speak;Mokou;Mm...pass. Need the sleep.",
            "    expression;Marisa;Smile",
            "    speak;Marisa;Alright. See ya around, then!",
            "    speak;Mokou;Good luck with that.",
            "    remove_portrait;Mokou",
            "    expression;Marisa;NoSmile",
            "    speak;Marisa;*cough* Damn, now I know how Patchy feels.",
            "    give_item;Marisa;Ciggie_Box",
            "else",
            "end",
            "transition;close",
            "game_var;chaptercount;2",
            "set_next_chapter;Base"
        ],
        "nid": "2 Outro"
    },
    {
        "name": "DestroyVillage1",
        "trigger": "Destructible",
        "level_nid": "2",
        "condition": "region.nid == 'DestroyVillage1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;15,19",
            "show_layer;Ruin1",
            "wait;500"
        ],
        "nid": "2 DestroyVillage1"
    },
    {
        "name": "Turn2",
        "trigger": "combat_end",
        "level_nid": "DEBUG",
        "condition": "False",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "game_var;swap_units;[x.nid for x in game.get_player_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "move_cursor;{v:swap_unit1}",
            "flicker_cursor;{v:swap_unit1}",
            "give_skill;{v:swap_unit1};Lunatic_Red_Eyes_Effect",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "move_cursor;{v:swap_unit2}",
            "flicker_cursor;{v:swap_unit2}",
            "give_skill;{v:swap_unit2};Lunatic_Red_Eyes_Effect",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('ReisenSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "DEBUG Turn2"
    },
    {
        "name": "Chest1",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Javelin",
            "has_finished;{unit}"
        ],
        "nid": "3 Chest1"
    },
    {
        "name": "Chest4",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest4'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest4",
            "give_item;{unit};Yukkuri_R",
            "has_finished;{unit}"
        ],
        "nid": "3 Chest4"
    },
    {
        "name": "Chest5",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest5'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest5",
            "give_item;{unit};Heavy_Bow",
            "has_finished;{unit}"
        ],
        "nid": "3 Chest5"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest3",
            "give_item;{unit};Maple_Shield",
            "has_finished;{unit}"
        ],
        "nid": "3 Chest3"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "3",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest2",
            "give_item;{unit};Mend",
            "has_finished;{unit}"
        ],
        "nid": "3 Chest2"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "change_background;Forest (Night)",
            "# This is where the dialogue itself starts",
            "music;Illusionary Night",
            "add_portrait;Reimu;Left",
            "add_portrait;Marisa;Right",
            "speak;Reimu;Shoot, did we pass by that stump before?",
            "speak;Marisa;This is the third time already. I'm\u2028starting to think you're more forgetful|than that night sparrow.",
            "speak;Reimu;*sigh* {c:wait;400}{tgm}This would be so much|easier if we could, you know, fly.",
            "speak;Marisa;Maybe we should've brought Mokou along.",
            "speak;;Hello? {c:wait;400}Who's there?",
            "speak;Marisa;{tgm}...{tgm}Oh! Maybe it's a lucky rabbit!",
            "remove_portrait;Marisa",
            "speak;Reimu;Marisa, wait! We need to stick togeth- {c:wait;200}and there she goes. Always rushing in...",
            "music_clear;500",
            "wait;500",
            "multi_add_portrait;Luna;FarRight;Sunny;CenterRight",
            "music;Night Sparrow",
            "speak;Luna;Hey hey! Help us!;;;;2",
            "speak;Reimu;And not even in the right direction. What are you three doing here?",
            "speak;Sunny;O-oh! It's Miss Reimu! Come on, you gotta help us save Cirno!;;;;2",
            "speak;Reimu;Hold on, one at a time! Star, what exactly happened?",
            "remove_portrait;Luna",
            "add_portrait;Star;FarRight",
            "speak;Star;Cirno got kidnapped by those rabbit folk over there, so we were getting ready to save her.",
            "speak;Sunny;Then this weird maid with a hammer\u2028came and hit Mystia and Wriggle,|and they both went crazy!",
            "move_portrait;Reimu;CenterLeft",
            "add_portrait;Mystia;FarLeft",
            "speak;Mystia;Hey! Who are you calling crazy!",
            "speak;Star;Ah! It's her! Stay away!",
            "bop_portrait;Star",
            "sound;Attack Hit 1",
            "wait;300",
            "speak;Mystia;Ow! What was that for?",
            "speak;Reimu;Hey, relax. I already beat the crazy out of her enough.",
            "speak;Mystia;Wow, even the shrine maiden has a heart. Who knew?",
            "speak;Reimu;{tgm}...{tgm}Maybe a couple more for good measure.;;;;0.5",
            "speak;Mystia;Ahaha... {c:wait;100}Guess I'll shut up now.",
            "remove_portrait;Mystia",
            "speak;Reimu;Well, we are heading up to Eientei anyway... are you sure you can fight? I wouldn't|exactly call you guys dangerous.",
            "remove_portrait;Star",
            "add_portrait;Luna;FarRight",
            "speak;Luna;This time is different! We had a special training routine just for this moment!",
            "speak;Reimu;That axe is twice your size - are you sure you can even lift it?",
            "add_portrait;Kasen;FarLeft",
            "speak;Kasen;Reimu, I believe these fairies are safer with us than traveling home alone.",
            "speak;Reimu;Kasen, what did I say about lecturing?",
            "speak;Kasen;Not a lecture, merely an observation.",
            "speak;Reimu;{tgm}*sigh* {c:wait;150}{tgm}Sometimes I just can't with you. Alright, come on, you three.",
            "speak;Sunny;But Miss Reimu, aren't you worried about Marisa?",
            "speak;Reimu;She can hold her own just fine. I'm sure we'll bump back into her any moment now...",
            "# Now for Part 2",
            "",
            "transition;close",
            "multi_remove_portrait;Reimu;Kasen;Star;Luna;",
            "remove_portrait;Sunny",
            "",
            "#Tewi Gang Time",
            "",
            "multi_add_portrait;Tewi;Left;Ringo;CenterRight;Seiran;FarRight",
            "transition;open",
            "expression;Tewi;Smile",
            "speak;Tewi;Hehe, the fog is just right for an ambush~.",
            "speak;Seiran;With all due respect, Tewi... why are we even fighting these guys?",
            "expression;Tewi;NoSmile",
            "speak;Ringo;A job's a job, Seiran~. Don't question it.",
            "speak;Seiran;I'm just saying, I didn't come down to Earth just to get conscripted again...",
            "speak;Tewi;Pipe down you two, you'll blow our cover! We gotta cover for Master so she can finish|that weird project of hers.",
            "speak;Ringo;Project? What kind of project?",
            "speak;Tewi;Beats me. I have no idea what she's up to half the time anyway.",
            "speak;Seiran;You shouldn't speak so casually about Master Eirin... Isn't she your superior?",
            "speak;Tewi;Hmmm...I guess she is. Is that some kind of moon rabbit thing? This whole \"rank\" thing|makes no sense. ",
            "speak;Seiran;...Reisen's your superior too, isn't she?",
            "speak;Tewi;Haha, I guess she is. Anyways, here they come. Get into position, I'm heading off to|prepare some surprises.",
            "remove_portrait;Tewi",
            "speak;Seiran;What kind of rabbit doesn't understand ranks...?;;;;0.5",
            "speak;Ringo;Geez. She has no faith in us, does she? Whatever.",
            "",
            "#Time for Housekeeping",
            "",
            "transition;close",
            "multi_remove_portrait;Seiran;Ringo",
            "change_background",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "add_lore;Lockpicking",
            "add_unit;Sunny",
            "add_unit;Luna",
            "add_unit;Star",
            "add_lore;Sunny",
            "add_lore;Star",
            "add_lore;Luna",
            "autolevel_to;Sunny;3;fixed",
            "autolevel_to;Luna;3;fixed",
            "autolevel_to;Star;3;fixed",
            "autolevel_to;Seiran_Boss;7;fixed",
            "autolevel_to;Ringo_Boss;7;fixed",
            "level_var;SeiranSpellMusic;0",
            "level_var;RingoSpellMusic;0",
            "enable_fog_of_war;t",
            "set_fog_of_war;gba;3;3;3",
            "prep;1;Sealed Gods",
            "transition;open",
            "speak;;This map's clear bonus is 300 Bonus EXP, with a decrease of 60 BExp per turn you take over 15 turns!;;;hint"
        ],
        "nid": "3 Intro"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Thief1;Thief1;fade;closest",
            "move_cursor;14,17"
        ],
        "nid": "3 Turn3"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Forest (Night)",
            "music;Skygazer",
            "multi_add_portrait;Reimu;FarLeft;Marisa;CenterLeft;Ringo;CenterRight;Seiran;FarRight",
            "transition;open",
            "",
            "speak;Ringo;Ow, jeez! Easy on the ears, okay?;;;;0.5",
            "speak;Marisa;Hmm, not a lucky rabbit, but this'll do.",
            "speak;Reimu;Huh, no wonder you got lost. This draw was a dud.",
            "speak;Ringo;Hey, who are you calling a dud - Seiran is right here!",
            "expression;Seiran;CloseEyes",
            "speak;Seiran;Low blow...;;;;0.5",
            "speak;Marisa;Well, now that we tied up these two, what do you want to do with them?",
            "expression;Seiran;OpenEyes",
            "speak;Reimu;We are pretty lost, and they did just come from Eientei-",
            "speak;Ringo;You better not say what I think you're going to say.",
            "speak;Reimu;Congratulations! You two are now officially...",
            "speak;Reimu;Our guides! Now lead the way. You're lucky I'm in a good mood.",
            "speak;Ringo;Just my luck...at least we can leave afterwards.",
            "speak;Seiran;Yeah! L-let's get this over and done with...",
            "remove_portrait;Seiran",
            "remove_portrait;Ringo",
            "add_portrait;Kasen;CenterRight",
            "speak;Kasen;How unexpected of you to show mercy, Reimu. I knew there was a more kind side to the shrine maiden after all.",
            "speak;Reimu;What are you talking about?",
            "speak;Kasen;Pardon?",
            "speak;Reimu;Moonies are more treacherous than that snake goddess, everyone knows that!",
            "speak;Kasen;*sigh* Still a small step in the right direction, I suppose.",
            "add_portrait;Seiran;FarRight",
            "speak;Seiran;You guys know we can still hear you, right?",
            "speak;Reimu;Yeah? And what are you gonna do about it?",
            "speak;Seiran;Eek! N-never mind.",
            "remove_portrait;Seiran",
            "speak;Kasen;Maybe a giant leap backwards then.",
            "",
            "transition;close",
            "multi_remove_portrait;Kasen;Reimu;Marisa",
            "transition;open",
            "",
            "if;game.turncount <= 15",
            "give_bexp;300",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 20",
            "give_bexp;{e:300 - ((game.turncount - 15) * 60)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 20",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "game_var;chaptercount;3",
            "set_next_chapter;Base"
        ],
        "nid": "3 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "#setup",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "add_base_convo;Breakables",
            "add_base_convo;Deathbox",
            "add_lore;Breakable_Tiles",
            "level_var;GreenEscaped;0",
            "game_var;_fatigue;0",
            "add_talk;Wriggle;Cirno",
            "add_talk;Wriggle;Daiyousei",
            "add_talk;Mystia;Cirno",
            "add_talk;Mystia;Daiyousei",
            "add_talk;Rumia;Cirno",
            "add_talk;Rumia;Daiyousei",
            "add_talk;Star;Cirno",
            "add_talk;Luna;Cirno",
            "add_talk;Sunny;Cirno",
            "add_talk;Star;Daiyousei",
            "add_talk;Luna;Daiyousei",
            "add_talk;Sunny;Daiyousei",
            "autolevel_to;Cirno;5;fixed",
            "autolevel_to;Daiyousei;3;fixed",
            "autolevel_to;Tewi_Boss;8;fixed",
            "autolevel_to;Prisoner;4;fixed",
            "autolevel_to;Prisoner_1;4;fixed",
            "autolevel_to;Prisoner_2;4;fixed",
            "change_background;Forest (Night)",
            "music;Illusionary Night",
            "#cutscene",
            "multi_add_portrait;Reimu;MidLeft;Marisa;FarLeft;Kasen;MidRight",
            "speak;Reimu;Finally...there's Eientei. I was getting tired of this damn forest.",
            "speak;Marisa;Felt like we were goin' in circles for awhile!",
            "speak;Reimu;At least the way forward is clear...let's just get this over with.",
            "speak;Kasen;Reimu, be careful about-",
            "speak;Reimu;WAA-",
            "remove_portrait;Reimu",
            "sound;Critical Hit 1",
            "screen_shake;300",
            "wait;500",
            "speak;Kasen;Traps. I was going to say traps.",
            "speak;Marisa;Ya doin' good down there? No mud in yer hair?",
            "speak;Reimu;When I get my hands on that slippery rabbit...",
            "add_portrait;Sunny;FarRight",
            "speak;Sunny;Hey! Don't forget about Cirno and Dai!",
            "speak;Kasen;*grunt* Can one of you help me pull Reimu out of this pit...she's a bit heavy.",
            "speak;Reimu;WHAT did you say?!",
            "speak;Kasen;Stop squirming!",
            "expression;Marisa;Smile",
            "speak;Marisa;Heh! This is pretty funny to watch.",
            "speak;Reimu;Don't you start!",
            "speak;Sunny;Cirno's never getting rescued...",
            "multi_remove_portrait;Kasen;Marisa;Sunny",
            "transition;close",
            "change_background;Eientei",
            "add_portrait;Tewi;CenterRight;ExpressionList=Smile",
            "#In Eientei",
            "transition;open",
            "music;Kagome Kagome",
            "speak;Tewi;Hehehehe...let's see... Dimly lit hallways, check!|Those new bows that Master got us, check! ",
            "add_portrait;Reisen;CenterLeft;mirror",
            "speak;Tewi;Unsuspecting moonie, check!",
            "remove_portrait;Reisen",
            "add_portrait;Reisen;CenterLeft",
            "speak;Reisen;Waaah! Tewi, what was that for?!",
            "speak;Tewi;C'mon, didn't they ever teach you not to let your guard down?",
            "speak;Reisen;I mean, we were just soldiers...",
            "speak;Tewi;And that's why those snakes were always trouncing on you!",
            "speak;Reisen;Brave words for someone lower on the food chain...",
            "speak;Tewi;Teehee! Anyways, that Hakurei girl and her cabal of weirdos should be here anytime now.",
            "speak;Reisen;Such a brazen attack on our territory...what could they be after?",
            "expression;Tewi;NoSmile",
            "speak;Tewi;I guess\u2028we're first on the chopping block.|Now, why don't you go let Master know\u2028that preparations are ready?",
            "speak;Reisen;I feel like our roles have been swapped here...",
            "expression;Tewi;Smile",
            "speak;Tewi;Don't worry about it!",
            "speak;Reisen;Fine. Hold them off for awhile, at least.",
            "speak;Tewi;That's the plan~",
            "remove_portrait;Reisen",
            "wait;600",
            "expression;Tewi;NoSmile",
            "speak;Tewi;Jeez, always so stubborn.",
            "transition;close",
            "change_background",
            "remove_portrait;Tewi",
            "end_skip",
            "prep;1;Sealed Gods",
            "transition;open",
            "level_var;Darkness;0",
            "speak;;This map's clear bonus is 375 Bonus EXP, with a decrease of 75 BExp per turn you take over 15 turns!;;;hint",
            "music_clear;300",
            "move_cursor;Cirno",
            "flicker_cursor;Cirno",
            "music;Kagome Kagome",
            "add_portrait;Cirno;CenterLeft",
            "add_portrait;Daiyousei;Right",
            "speak;Cirno;Who does that moon lady think she is, locking us up here!",
            "speak;Daiyousei;I don't know, Cirno...I can't read what this paper says.",
            "speak;Cirno;Let me see that... Die-ag-no-sis...nope, too hard!",
            "speak;Daiyousei;When are we going to see an actual doctor...?",
            "sound;Hubbub",
            "wait;600",
            "speak;Cirno;Hey...you hear that commotion, Dai? I think we're saved!",
            "speak;Daiyousei;Are the others here to save us?",
            "speak;Cirno;Probably! I don't know!",
            "speak;Daiyousei;I hope they are...",
            "speak;Cirno;Let's get started then!",
            "wait;100",
            "sound;No Damage",
            "wait;150",
            "sound;No Damage",
            "wait;150",
            "sound;No Damage",
            "wait;150",
            "speak;Daiyousei;Stop hitting the bars! The guards are gonna get mad again!",
            "speak;Cirno;Won't matter if we're free!",
            "add_portrait;zun_cultist;FarLeft",
            "speak;zun_cultist;...;no_talk",
            "speak;Daiyousei;I don't like that creep...he's been staring at us for awhile...",
            "speak;Cirno;Eh, not like we'll have to see them again once we're free!",
            "multi_remove_portrait;Cirno;Daiyousei;zun_cultist",
            "move_cursor;Reimu",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;CenterLeft",
            "speak;Reimu;Man...this place is such a pain...I can\u2019t even tell the direction I walk half the time.",
            "speak;Kasen;We'll have to be careful, then. We won't always be able to get a great view of our|situation once Eientei's illusion magic starts taking effect.",
            "multi_remove_portrait;Kasen;Reimu"
        ],
        "nid": "4 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "4",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 15",
            "give_bexp;375",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 20",
            "give_bexp;{e:375 - ((game.turncount - 15) * 75)}",
            "speak;;Unfortunately, you completed the map in more than 20 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 20",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "transition;close",
            "change_background;Eientei",
            "multi_add_portrait;Marisa;FarLeft;Reimu;FarRight;Tewi;CenterLeft;Kasen;CenterRight",
            "expression;Marisa;Smile",
            "music_clear",
            "music;Kagome Kagome",
            "transition;open",
            "speak;Tewi;Hey, easy on the ears, buddy!",
            "speak;Marisa;We got lucky this time! Talk aboutta change in fortune!",
            "sound;Heavy Foot Steps 1",
            "bop_portrait;Tewi",
            "speak;Tewi;Hey! Hey! Stop manhandling me!",
            "speak;Reimu;Not until you tell us where we can find the doctor. We're due for an appointment.",
            "expression;Tewi;Smile",
            "expression;Marisa;NoSmile",
            "speak;Tewi;Heh, or what?",
            "speak;Reimu;Or you'll be known as the \"Rabbit of Misfortune\" once I'm done with you.",
            "speak;Tewi;Hey now, Gensokyo already has enough people in the misfortune trade...{c:wait;400} I'm looking at one of them right now.",
            "speak;Reimu;Oh, that does it! Marisa.{c:wait;200} Rabbit.{c:wait;200} Now.",
            "expression;Marisa;Smile",
            "speak;Marisa;Alright chef. Be sure to save me a piece of the dark mea-",
            "expression;Marisa;NoSmile",
            "sound;Bow",
            "wait;100",
            "speak;Marisa;...{tgm}Whoah!;no_talk",
            "remove_portrait;Marisa",
            "wait;300",
            "sound;Critical Hit 1",
            "screen_shake;300",
            "wait;500",
            "speak;Marisa;Ow - geez! Who even puts a hole in a throne room? Talk about poor level design...",
            "speak;Tewi;Wow, your friend must have took that fall hard! Anyways, the night isn't so young anymore, so bye~.",
            "remove_portrait;Tewi",
            "speak;Reimu;...{c:wait;200}{tgm}There won't be enough of her left to cross the Sanzu.;no_talk",
            "speak;Kasen;Tricky that rabbit is. I wonder what she's planning?",
            "speak;Reimu;Whatever. Let's just get this thing\u2028over with and eat out after.|Rabbit does sound good actually.",
            "speak;Kasen;We may want to fish out the magician in the hole before we begin with dinner plans.",
            "speak;Reimu;Alright fine...{c:wait;300} let's get the rope.",
            "speak;Kasen;An act of kindness - doesn't that feel good?",
            "speak;Reimu;Do I look like Kandata to you?",
            "speak;Kasen;You're not the one climbing at least.",
            "",
            "if;v('GreenEscaped') == 3",
            "give_item;Reimu;Yukkuri_X",
            "elif;v('GreenEscaped') == 2",
            "give_item;Reimu;Yukkuri_M",
            "elif;v('GreenEscaped') == 1",
            "give_item;Reimu;Yukkuri_R",
            "else",
            "end",
            "game_var;chaptercount;4",
            "set_next_chapter;Base"
        ],
        "nid": "4 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "music_clear",
            "music;Voyage 1969",
            "change_background;Castle Throne Room",
            "transition;open",
            "add_portrait;Eirin;Right",
            "#cutscene",
            "add_portrait;Reisen;OffscreenLeft",
            "move_portrait;Reisen;Left",
            "",
            "speak;Reisen;*huff* *puff*{c:wait;200}{tgm} Master! It's the shrine maiden - {c:wait;300}she's heading this way!;no_talk",
            "speak;Eirin;Right when I was on the verge of a breakthrough.... This is bad timing.",
            "speak;Reisen;The patients also escaped during the skirmish. With all due respect, Master,|aren't you concerned?",
            "speak;Eirin;...{c:wait;100}{tgm}A minor miscalculation, but thankfully, the error is negligible.;no_talk",
            "speak;Reisen;I'm...{c:wait;100} not exactly following.",
            "speak;Eirin;Besides those two fairies, all the other patients were catatonic.|They shouldn't do too much damage.",
            "speak;Reisen;A-alright, but what about the code red heading for us right now?",
            "speak;Eirin;I'm looking at the solution.",
            "speak;Reisen;Wait?{c:wait;300} M-Me?",
            "speak;Eirin;I don't usually stutter, do I?",
            "speak;Reisen;N-no, I heard you right. But you want ME to fight her?",
            "speak;Eirin;I crunched the numbers,|and you have a 99.7% chance of buying me enough time to carry out my business...|give or take 30%, of course.",
            "speak;Reisen;I can't tell if you are praising or insulting me.",
            "expression;Eirin;Smile",
            "speak;Eirin;Take it as you will.",
            "speak;Reisen;Wait, so you aren't going to fight then?",
            "expression;Eirin;NoSmile",
            "speak;Eirin;No, I have much more... {c:wait;100}urgent matters. Do not worry, it will not take long.|I believe you can manage. Good luck, Udongein.",
            "remove_portrait;Eirin",
            "expression;Reisen;CloseEyes",
            "wait;200",
            "speak;Reisen;*sigh*...{c:wait;200} {tgm}Just my luck, but I can't help it, I guess. Alright...{c:wait;300};no_talk",
            "expression;Reisen;OpenEyes",
            "speak;Reisen;I won't let anyone pass!",
            "",
            "transition;close",
            "remove_portrait;Reisen",
            "change_background;InsideCastle",
            "multi_add_portrait;Marisa;Left;Reimu;CenterRight;Kasen;FarRight",
            "transition;open",
            "",
            "speak;Marisa;Man, I just felt a chill in the room.",
            "speak;Reimu;It's almost like something absolutely annoying is about to happen.",
            "speak;Marisa;Come on, Reimu. You know what they say about jinxes, right?",
            "speak;Reimu;That you can split disposable chopsticks perfectly with them?",
            "speak;Marisa;What kind of jinx is that?",
            "speak;Reimu;The useful kind.",
            "speak;Kasen;Maybe let's not tempt fate right now.",
            "speak;Reimu;Well, with a certain vampire here, we can do it as much as we want! Who's gonna stop-",
            "sound;Warp",
            "multi_remove_portrait;Kasen;Reimu",
            "speak;Marisa;...{c:wait;300}{tgm}And superstition marches on.\u2028Glad I\u2019m not the lost one this time!;no_talk",
            "",
            "transition;close",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "add_base_convo;Warps",
            "add_lore;Warp_Tiles",
            "level_var;Darkness;0",
            "autolevel_to;Reisen_Boss;10;fixed",
            "change_background;",
            "prep;1;Sealed Gods",
            "transition;open",
            "add_portrait;Reimu;Right",
            "speak;Reimu;I don't see that pharmacist around here...that's weird. ",
            "remove_portrait;Reimu",
            "speak;;This map's clear bonus is 375 Bonus EXP, with a decrease of 75 BExp per turn you take over 15 turns!;;;hint",
            "music_clear;",
            "music;Kagome Kagome;300\u2028"
        ],
        "nid": "5 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "5",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 15",
            "give_bexp;375",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 20",
            "give_bexp;{e:375 - ((game.turncount - 15) * 75)}",
            "speak;;Unfortunately, you completed the map in more than 20 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 20",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "",
            "transition;close",
            "music;Skygazer",
            "change_background;Eientei",
            "multi_add_portrait;Reisen;CenterRight;Reimu;CenterLeft;Marisa;FarLeft",
            "transition;open",
            "",
            "speak;Reisen;Ouch. You've got to be kidding me...",
            "speak;Marisa;And with that, Eientei is ours! Now where is that doctor?",
            "speak;Reimu;Let's hurry and find her already. This place gives me the creeps.",
            "speak;Marisa;I already feel half insane walking through this place.",
            "speak;Reimu;Marisa, you're ALWAYS half insane. Anyways, is the doctor in tonight?",
            "expression;Reisen;Smile",
            "speak;Reisen;Hah, you'd think I'd tell you that easily? I'll never talk!",
            "add_portrait;Eirin;FarRight",
            "speak;Eirin;And you won't have to.",
            "expression;Reisen;NoSmile",
            "bop_portrait;Reisen",
            "speak;Reisen;Master?",
            "speak;Reimu;Alright you! We've beaten your cronies and we have you surrounded, you know the drill!",
            "speak;Eirin;A little hard to enforce the spellcard rules without the proper medium, no?",
            "speak;Reimu;So what? Danmaku or not, I'm still going to get you to talk.",
            "bop_portrait;Eirin",
            "wait;100",
            "sound;Whistle",
            "wait;300",
            "sound;Wall Attack",
            "screen_shake;100",
            "wait;200",
            "speak;Eirin;I believe I need to make myself clear.",
            "speak;Reimu;...;no_talk",
            "speak;Marisa;Y'know, you are way scarier without danmaku.",
            "speak;Eirin;I'll take that as a compliment. What brings all of you here?",
            "speak;Marisa;The youkai we've been fighting have been more...{c:wait;200}{tgm} youkai-y than usual.",
            "speak;Eirin;And you came thinking I could make a cure for this?",
            "speak;Marisa;Wow, you caught on very quickly.",
            "expression;Eirin;CloseEyes",
            "speak;Eirin;The art of logic has been lost to Gensokyo for a while.",
            "speak;Reimu;Well, can you do it? It would make all of our jobs way easier.",
            "expression;Eirin;OpenEyes",
            "speak;Eirin;Unfortunately, it seems that due to some... outside influence, that cure will have to wait.",
            "speak;Reimu;Ugh, just great. This incident just got way longer.",
            "bop_portrait;Reisen",
            "speak;Reisen;Wait a minute... why don't you spend the night!|We have plenty of spare rooms.",
            "speak;Eirin;(Udongein, what exactly are you planning?)",
            "speak;Reisen;(We don't want to shift the code red into crimson, do we?)",
            "speak;Eirin;(Hm. Wise thinking.){c:wait;500} {tgm}...{tgm}Reisen is right. The night has been very long, so why don't you rest?",
            "speak;Reimu;Now that's more like it!",
            "speak;Eirin;(Ah, a crisis averted.);;;thought_bubble",
            "speak;Reimu;I can't wait to-",
            "sound;Wall Attack",
            "screen_shake;100",
            "wait;400",
            "speak;Reimu;...Eirin, I swear if this is your idea of a joke...{c:wait;200}{tgm}",
            "speak;Eirin;That sound came from the courtyard. That rest will have to wait.",
            "remove_portrait;Eirin",
            "remove_portrait;Reisen",
            "remove_portrait;Marisa",
            "expression;Reimu;CloseEyes",
            "speak;Reimu;I didn't even order room service yet.",
            "",
            "game_var;chaptercount;5",
            "set_next_chapter;Base"
        ],
        "nid": "5 Outro"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "DEBUG",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;_fatigue;1",
            "game_var;_turnwheel;True",
            "game_var;_max_turnwheel_uses;99",
            "game_var;_current_turnwheel_uses;99",
            "autolevel_to;Tewi;19;fixed",
            "autolevel_to;Yuyuko;19;fixed",
            "trigger_script;Housekeeping3",
            "trigger_script;Housekeeping1",
            "trigger_script;Housekeeping2",
            "autolevel_to;Reimu;15;fixed",
            "autolevel_to;Shinki_Boss;22;fixed",
            "autolevel_to;Mima_Boss;20;fixed",
            "autolevel_to;Remilia;15;fixed",
            "autolevel_to;Cirno;15;fixed",
            "autolevel_to;Sayuri;15;fixed",
            "autolevel_to;Kabin;15;fixed",
            "set_wexp;Kabin;Lance;181",
            "autolevel_to;Youmu_Boss_3;18",
            "autolevel_to;Miki;15;fixed",
            "set_wexp;Miki;Lance;181",
            "autolevel_to;Yuika;15;fixed",
            "set_wexp;Yuika;Sword;181",
            "autolevel_to;Yuna;15;fixed",
            "set_wexp;Yuna;Bow;181",
            "autolevel_to;Miu;15;fixed",
            "set_wexp;Miu;Sword;181",
            ""
        ],
        "nid": "DEBUG New Event"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "change_background;River",
            "#Grassroots Time",
            "music;Lonesome Werewolf",
            "add_portrait;Sekibanki;CenterLeft",
            "add_portrait;Kagerou;Right",
            "speak;Sekibanki;Dammit, Kagerou! You said the Human Village would be easy pickings! ",
            "speak;Kagerou;Look, I didn't expect their guardian to be just as good in martial prowess as danmaku.",
            "speak;Sekibanki;Ugh. We'll just avoid her and find some other way in. I knew we should've just laid low.",
            "speak;Kagerou;You're the one who got us in on this in the first place! I just wanted to ride it out too!",
            "speak;Sekibanki;Never said that. You werewolves must've traded hearing for that sense of smell.",
            "speak;Kagerou;Hey! I'm a prime hunter, alright?",
            "speak;Sekibanki;Then use those skills to get us in there!",
            "add_portrait;Wakasagihime;FarLeft",
            "speak;Wakasagihime;Kagerou, Banki, she's here!",
            "speak;Kagerou;What's the issue?",
            "speak;Wakasagihime;It's...it's the...*shudders*...|Crimson Slasher...",
            "speak;Sekibanki;What?!",
            "speak;Wakasagihime;And the...the...",
            "speak;Kagerou;Who?!",
            "speak;Wakasagihime;That uh, blonde girl. Uh. ",
            "speak;Kagerou;Oh. Yeah. Her.",
            "speak;Sekibanki;Did we ever fight someone like that...or?",
            "speak;Wakasagihime;Nevermind that! We're doomed!",
            "speak;Sekibanki;...No, no. What can that shrine maiden do? Everybody's a bit more even now.|We're unstoppable together!",
            "expression;Kagerou;Smile",
            "speak;Kagerou;...Yeah. Banki's right! This is just the time we, the Grassroots Youkai Network, need to|assert our dominance!",
            "expression;Wakasagihime;Smile",
            "speak;Wakasagihime;Heh, you're right. With the three of us together, they don't stand a chance!",
            "speak;Sekibanki;Great. I'll also be in the back here. Kagerou, why don't you take the head.",
            "expression;Kagerou;NoSmile",
            "speak;Kagerou;Huh?! Why me?",
            "speak;Sekibanki;You're such a good fighter, and I think fighters should take the head over us|weak...frail...",
            "speak;Kagerou;Oh, alright!",
            "multi_remove_portrait;Sekibanki;Kagerou;Wakasagihime",
            "#Reimu and Kasen Time",
            "add_portrait;Reimu;CenterLeft",
            "add_portrait;Marisa;FarLeft",
            "add_portrait;Kasen;CenterRight",
            "add_portrait;Remilia;FarRight",
            "speak;Reimu;Alright, we're here. What're we up against this time?",
            "speak;Marisa;Them youkai over already look pretty shifty to me. Guess my reputation's still strong, eh?",
            "speak;Reimu;You mean MY reputation. ",
            "speak;Remilia;Hmmm...those youkai over there don't seem like fighters to me, hehe.",
            "speak;Reimu;Spit it out. What's your theory.",
            "speak;Remilia;Fine, always spoiling a good moment, dear Reimu. I think some foul actor is causing these youkai to run amok.",
            "speak;Reimu;What's with the \"dears\" today?",
            "speak;Remilia;Do I not always talk like that?",
            "speak;Marisa;Hmm, something like that one incident with the mallet a bit back.",
            "speak;Kasen;From what you told me, that inchling is the only one who can use it,| but I don't see her around.",
            "speak;Reimu;To be fair, I don't think you could see an inchling from here.",
            "speak;Marisa;Hey, ain't that Keine? We should probably help her out with fending off these youkai.",
            "speak;Reimu;I don't know, she seems perfectly fine without us.",
            "speak;Kasen;This will be a good time to garner allies, Reimu. Let's advance!",
            "speak;Reimu;Fine, exterminating pests is my job anyway.",
            "#Housekeeping Time",
            "transition;close",
            "multi_remove_portrait;Reimu;Kasen;Marisa;Remilia",
            "add_talk;Reimu;Keine_NPC",
            "add_talk;Marisa;Keine_NPC",
            "add_talk;Keine_NPC;Reimu",
            "add_talk;Keine_NPC;Marisa",
            "add_talk;Reimu;Rumia",
            "add_talk;Marisa;Rumia",
            "game_var;baseconvolist;['Rinnosuke', 'Kosuzu']",
            "game_var;_fatigue;0",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "change_background",
            "transition;open",
            "autolevel_to;Sekibanki_Boss;4;fixed",
            "autolevel_to;Kagerou_Boss;4;fixed",
            "autolevel_to;Keine_NPC;32;fixed",
            "prep;1;Sealed Gods",
            "#Open Map",
            "move_cursor;Keine_NPC",
            "add_portrait;Keine;CenterRight",
            "speak;Keine;I knew some youkai would make a move the second something like this happened. What a|pain. Listen here, you scum! I may not be able to erase history anymore, but I'll erase you|all the same!",
            "remove_portrait;Keine",
            "level_var;KagerouSpellMusic;0",
            "level_var;SekibankiSpellMusic;0",
            "speak;;From here on out, every map will feature a clear bonus if you finish the map within a certain|number of turns. This map's clear bonus is 300 Bonus EXP, with a decrease of 15 BExp|per turn you take over 15 turns!;;;hint"
        ],
        "nid": "1 Intro"
    },
    {
        "name": "BanditReinforcements",
        "trigger": "turn_change",
        "level_nid": "1",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;22,8",
            "autolevel_to;Rumia;3",
            "add_group;Rein;Rein;warp;closest",
            "add_portrait;Rumia;Right",
            "speak;Rumia;That damn miko! Who does she think she is, beating me up like that?! I'll show her!",
            "remove_portrait;Rumia"
        ],
        "nid": "1 BanditReinforcements"
    },
    {
        "name": "MermaidReinforcements",
        "trigger": "turn_change",
        "level_nid": "1",
        "condition": "game.turncount == 15",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;10,13",
            "add_group;Mermaid;Mermaid;fade;closest",
            "add_portrait;Wakasagihime;CenterRight",
            "speak;Wakasagihime;The time has come! Time to sink these fools!",
            "autolevel_to;Wakasagihime_Boss;3;fixed"
        ],
        "nid": "1 MermaidReinforcements"
    },
    {
        "name": "ReimuKeineTalk",
        "trigger": "on_talk",
        "level_nid": "1",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Keine_NPC'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Reimu;Left",
            "add_portrait;Keine;Right",
            "speak;Reimu;We're here.",
            "speak;Keine;Reimu?! Finally, reinforcements. Listen up, everyone! Drive these youkai out of here!",
            "win_game"
        ],
        "nid": "1 ReimuKeineTalk"
    },
    {
        "name": "MarisaKeineTalk",
        "trigger": "on_talk",
        "level_nid": "1",
        "condition": "unit.nid == 'Marisa' and unit2.nid == 'Keine_NPC'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Marisa;Left",
            "add_portrait;Keine;Right",
            "speak;Marisa;Hey Keine! We're here to help!",
            "speak;Keine;Marisa?! Finally, reinforcements. Listen up, everyone! Drive these youkai out of here!",
            "win_game"
        ],
        "nid": "1 MarisaKeineTalk"
    },
    {
        "name": "Destroy1",
        "trigger": "Destructible",
        "level_nid": "1",
        "condition": "region.nid == 'Destroy1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;6,2",
            "show_layer;House1",
            "remove_region;House1",
            "wait;500"
        ],
        "nid": "1 Destroy1"
    },
    {
        "name": "Destroy2",
        "trigger": "Destructible",
        "level_nid": "1",
        "condition": "region.nid == 'Destroy2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;18,17",
            "show_layer;House2",
            "remove_region;House2",
            "wait;500"
        ],
        "nid": "1 Destroy2"
    },
    {
        "name": "Destroy3",
        "trigger": "Destructible",
        "level_nid": "1",
        "condition": "region.nid == 'Destroy3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;23,18",
            "show_layer;House3",
            "remove_region;House3",
            "wait;500"
        ],
        "nid": "1 Destroy3"
    },
    {
        "name": "DefeatBoss",
        "trigger": "combat_end",
        "level_nid": "3",
        "condition": "game.check_dead(\"Seiran_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "3 DefeatBoss"
    },
    {
        "name": "ShopArmory",
        "trigger": "Armory",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "shop;{unit};Iron_Sword, Slim_Sword, Iron_Lance, Slim_Lance, Iron_Axe, Slim_Axe, Iron_Bow, Slim_Bow, Ofuda;armory",
            "transition;open"
        ],
        "nid": "1 ShopArmory"
    },
    {
        "name": "ShopVendor",
        "trigger": "Vendor",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "shop;{unit};Fire, Gust, Torch_Tome, Flux, Heal, Life_Gem, Maple_Shield, Poppet, Lantern, Torch;vendor",
            "transition;open"
        ],
        "nid": "1 ShopVendor"
    },
    {
        "name": "ReimuRumiaTalk",
        "trigger": "on_talk",
        "level_nid": "1",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Rumia'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "add_portrait;Reimu;Left",
            "add_portrait;Rumia;Right",
            "speak;Reimu;Oh, well look what the cat dragged in.",
            "speak;Rumia;I-I'm not afraid of you! I'll take you down today!",
            "speak;Reimu;Sure, and the Hakurei God is gonna get their power back next week. Try me.",
            "speak;Rumia;Uh...",
            "speak;Reimu;You're quivering.",
            "speak;Rumia;Hiyah! Take this!",
            "speak;Reimu;Missed.",
            "speak;Rumia;On second thought, I think I'll just lea-",
            "speak;Reimu;Hm, you could be an asset actually.",
            "speak;Rumia;What",
            "speak;Reimu;I don't really like having more youkai around, but welcome to the team.",
            "speak;Rumia;Huh",
            "change_team;Rumia;player",
            "remove_talk;Reimu;Rumia",
            "remove_talk;Marisa;Rumia",
            "remove_skill;Rumia;Looter",
            "music_fade_back"
        ],
        "nid": "1 ReimuRumiaTalk"
    },
    {
        "name": "MarisaRumiaTalk",
        "trigger": "on_talk",
        "level_nid": "1",
        "condition": "unit.nid == 'Marisa' and unit2.nid == 'Rumia'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "add_portrait;Marisa;Left",
            "add_portrait;Rumia;Right",
            "speak;Marisa;Well, lookie here...",
            "speak;Rumia;I-I'm not afraid of you! I'll take you down today!",
            "speak;Marisa;Sure, an' the Hakurei God is gonna get their power back next week. ",
            "speak;Rumia;Uh...",
            "speak;Marisa;Ya seem pretty unsure of yerself.",
            "speak;Rumia;Hiyah! Take this!",
            "speak;Marisa;Ya can't hit anything like this, y'know...",
            "speak;Rumia;On second thought, I think I'll just lea-",
            "speak;Marisa;Hm, you could be an asset actually.",
            "speak;Rumia;What",
            "speak;Marisa;Always nice to have another footsoldier around!",
            "speak;Rumia;Huh",
            "change_team;Rumia;player",
            "remove_talk;Marisa;Rumia",
            "remove_talk;Reimu;Rumia",
            "remove_skill;Rumia;Looter;no_banner",
            "music_fade_back"
        ],
        "nid": "1 MarisaRumiaTalk"
    },
    {
        "name": "Fog",
        "trigger": "on_base_convo",
        "level_nid": "2",
        "condition": "unit == 'Fog'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;CenterLeft",
            "speak;Reimu;Hm, it's pretty dark around here.",
            "speak;Kasen;That's going to hinder our visibility. Please make sure to be careful in the dark.",
            "speak;Reimu;It's fine. Marisa can see further in the dark, and we have a few methods of lighting the|place up.",
            "speak;Kasen;Still, keep an eye out for anything hidden in the dark. Here. This lantern should help us see better.",
            "multi_remove_portrait;Kasen,Reimu",
            "give_bexp;25;no_banner",
            "give_item;Reimu;Lantern",
            "transition;close",
            "change_background",
            "remove_base_convo;Fog",
            "game_var;baseconvolist;[x for x in v('baseconvolist') if not x == 'Fog']",
            "transition;open"
        ],
        "nid": "2 Fog"
    },
    {
        "name": "Turn9",
        "trigger": "turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 9",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Thief2;Thief2;fade;closest",
            "move_cursor;28,4"
        ],
        "nid": "3 Turn9"
    },
    {
        "name": "Turn13",
        "trigger": "turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 13 ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_ai;Seiran_Boss;Pursue",
            "add_portrait;Seiran;Left",
            "speak;Seiran;Alright, stop stalling! I'll take the fight to you! Hey, call the elites! ",
            "speak;Footsoldier;They will take some time to get here, commander.",
            "speak;Seiran;Tch, we'll just have to press forward without them.",
            "remove_portrait;Seiran",
            ""
        ],
        "nid": "3 Turn13"
    },
    {
        "name": "Turn15",
        "trigger": "turn_change",
        "level_nid": "3",
        "condition": "game.turncount == 15",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;HurryUp;HurryUp;warp;closest",
            "move_cursor;146",
            "flicker_cursor;146",
            "move_cursor;144",
            "flicker_cursor;144",
            ""
        ],
        "nid": "3 Turn15"
    },
    {
        "name": "Turn15",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 15 and game.check_alive(\"Wriggle_Boss\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_ai;Wriggle_Boss;Pursue",
            "add_portrait;Wriggle;Left",
            "speak;Wriggle;What's taking them so long?! I'm gonna go myself!",
            "remove_portrait;Wriggle"
        ],
        "nid": "2 Turn15"
    },
    {
        "name": "Turn15_1",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 15 ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Reimu;Left",
            "speak;???;GRAAAHAHHHHHHHH!!!!",
            "speak;Reimu;Hurry it up!",
            "remove_portrait;Reimu",
            "add_group;OhFuck;OhFuck;fade;closest",
            "move_cursor;147",
            "flicker_cursor;147"
        ],
        "nid": "2 Turn15_1"
    },
    {
        "name": "Turn13",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 13",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Reimu;Left",
            "speak;Reimu;*shivers* There's something terrifying in these woods...",
            "remove_portrait;Reimu"
        ],
        "nid": "2 Turn13"
    },
    {
        "name": "Chest_1",
        "trigger": "Chest",
        "level_nid": "4",
        "condition": "region.nid == 'Chest_1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Omikuji",
            "has_finished;{unit}"
        ],
        "nid": "4 Chest_1"
    },
    {
        "name": "Chest_2",
        "trigger": "Chest",
        "level_nid": "4",
        "condition": "region.nid == 'Chest_2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest2",
            "give_item;{unit};Swordreaver",
            "has_finished;{unit}"
        ],
        "nid": "4 Chest_2"
    },
    {
        "name": "Chest_3",
        "trigger": "Chest",
        "level_nid": "4",
        "condition": "region.nid == 'Chest_3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest3",
            "give_item;{unit};Yukkuri_M",
            "has_finished;{unit}"
        ],
        "nid": "4 Chest_3"
    },
    {
        "name": "Chest_4",
        "trigger": "Chest",
        "level_nid": "4",
        "condition": "region.nid == 'Chest_4'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest4",
            "give_item;{unit};Eirins_Drugs",
            "has_finished;{unit}"
        ],
        "nid": "4 Chest_4"
    },
    {
        "name": "Chest_5",
        "trigger": "Chest",
        "level_nid": "4",
        "condition": "region.nid == 'Chest_5'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest5",
            "give_item;{unit};Longbow",
            "has_finished;{unit}"
        ],
        "nid": "4 Chest_5"
    },
    {
        "name": "Door_1",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door1",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_1"
    },
    {
        "name": "Door_2",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door2",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_2"
    },
    {
        "name": "Door_3",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door3",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_3"
    },
    {
        "name": "Door_4",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_4'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door4",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_4"
    },
    {
        "name": "Door_5",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_5'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door5",
            "add_portrait;{unit};Left",
            "speak;{unit};Alright! You're all free now!",
            "add_portrait;zun_cultist;Right;",
            "speak;zun_cultist;...;no_talk",
            "remove_portrait;zun_cultist",
            "speak;{unit};What a weirdo.",
            "add_portrait;Cirno;CenterRight",
            "add_portrait;Daiyousei;FarRight",
            "speak;Cirno;Aha! I knew we'd be free, Dai!",
            "speak;Daiyousei;Good thing we were lucky...",
            "speak;Cirno;Luck shmuck, let's get outta here!",
            "multi_remove_portrait;{unit};Cirno;Daiyousei",
            "change_ai;Cirno;GreenEscape",
            "change_ai;Daiyousei;GreenEscape",
            "change_ai;145;GreenEscape",
            "change_ai;146;GreenEscape",
            "change_ai;147;GreenEscape",
            "speak;;While unecessary, it may be beneficial to help these mysterious robed people escape here!;;;hint",
            "add_group;BreakoutRein1;BreakoutRein1",
            "move_cursor;153",
            "flicker_cursor;153",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_5"
    },
    {
        "name": "Door_6",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_6'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door6",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_6"
    },
    {
        "name": "Door_7",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_7'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door7",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_7"
    },
    {
        "name": "Door_8",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_8'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door8",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_8"
    },
    {
        "name": "Door_9",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_9'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door9",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_9"
    },
    {
        "name": "Door_10",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_10'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door10",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_10"
    },
    {
        "name": "Door_11",
        "trigger": "Door",
        "level_nid": "4",
        "condition": "region.nid == 'Door_11'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Door11",
            "has_finished;{unit}"
        ],
        "nid": "4 Door_11"
    },
    {
        "name": "Green Escape",
        "trigger": "Green_Escape",
        "level_nid": "4",
        "condition": "region.nid == 'Green_Escape'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_unit;{unit}",
            "wait;400",
            "inc_level_var;GreenEscaped;1"
        ],
        "nid": "4 Green Escape"
    },
    {
        "name": "Tewi",
        "trigger": "unit_wait",
        "level_nid": "4",
        "condition": "region.nid == 'Tewi'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Tewi;Left",
            "speak;Tewi;There they are! Time to play!",
            "remove_portrait;Tewi",
            "change_ai;Tewi_Boss;Pursue",
            ""
        ],
        "nid": "4 Tewi"
    },
    {
        "name": "FightTewi",
        "trigger": "combat_start",
        "level_nid": "4",
        "condition": "(unit.nid == \"Tewi_Boss\" and unit2.team == 'player' and unit2.nid != \"Kasen\") or (unit2.nid == \"Tewi_Boss\" and unit.team == 'player' and unit.nid != \"Kasen\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Tewi;Left",
            "speak;Tewi;So sorry, Eientei is not accepting visitors at this time...|And don't even try to proceed, if you're attached to your dignity...",
            "remove_portrait;Tewi",
            "show_combat_ui"
        ],
        "nid": "4 FightTewi"
    },
    {
        "name": "DefeatTewi",
        "trigger": "combat_death",
        "level_nid": "4",
        "condition": "unit.nid == \"Tewi_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Tewi;Left;ExpressionList=CloseEyes",
            "speak;Tewi;Oh...the tragedy...defeated...",
            "expression;Tewi;Smile",
            "speak;Tewi;Hehehe...SIKE!",
            "remove_portrait;Tewi",
            "show_combat_ui"
        ],
        "nid": "4 DefeatTewi"
    },
    {
        "name": "DefeatTewi_1",
        "trigger": "combat_death",
        "level_nid": "4",
        "condition": "unit.nid == \"Tewi_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Tewi;Left",
            "speak;Tewi;Alright, Alright, I surrender! Jeez.",
            "remove_portrait;Tewi",
            "show_combat_ui"
        ],
        "nid": "4 DefeatTewi_1"
    },
    {
        "name": "DefeatBoss",
        "trigger": "combat_end",
        "level_nid": "4",
        "condition": "game.check_dead(\"Tewi_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "4 DefeatBoss"
    },
    {
        "name": "Wall1",
        "trigger": "unit_death",
        "level_nid": "4",
        "condition": "unit.nid == 'Wall1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Wall1"
        ],
        "nid": "4 Wall1"
    },
    {
        "name": "Turn5",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn5Thief;Turn5Thief;swoosh;closest",
            "move_cursor;30,2"
        ],
        "nid": "4 Turn5"
    },
    {
        "name": "Turn5_1",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount % 6 == 5 and game.turncount >= 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;v('Darkness') == 0",
            "enable_fog_of_war;t",
            "set_fog_of_war;gba;4;4;4",
            "else",
            "end"
        ],
        "nid": "4 Turn5_1"
    },
    {
        "name": "Turn8",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount % 6 == 2 and game.turncount >= 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;v('Darkness') == 0",
            "enable_fog_of_war;f",
            "add_portrait;Kasen;CenterRight",
            "speak;Kasen;The illusion magic has lifted! Onward!",
            "else",
            "end"
        ],
        "nid": "4 Turn8"
    },
    {
        "name": "Turn4",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount % 6 == 4 and game.turncount >= 4",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;v('Darkness') == 0",
            "add_portrait;Kasen;CenterRight",
            "speak;Kasen;I have a bad feeling that we're going to be stumbling in the dark soon...",
            "remove_portrait;Kasen",
            "else",
            "end"
        ],
        "nid": "4 Turn4"
    },
    {
        "name": "Turn13",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 13",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;WestRein;WestRein;fade;closest",
            "move_cursor;0,7",
            "add_group;EastRein;EastRein;fade;closest",
            "move_cursor;30,14",
            "add_portrait;Tewi;Left",
            "speak;Tewi;What's taking these guys so long? I should just bring out the big guns soon...",
            "remove_portrait;Tewi"
        ],
        "nid": "4 Turn13"
    },
    {
        "name": "FightSeiran",
        "trigger": "combat_start",
        "level_nid": "3",
        "condition": "(unit.nid == \"Seiran_Boss\" and unit2.team == 'player') or (unit2.nid == \"Seiran_Boss\" and unit.team == 'player')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Seiran;Left",
            "speak;Seiran;Enemy located. Now...I'll proceed with your elimination!",
            "remove_portrait;Seiran",
            "show_combat_ui"
        ],
        "nid": "3 FightSeiran"
    },
    {
        "name": "FightRingo",
        "trigger": "combat_start",
        "level_nid": "3",
        "condition": "(unit.nid == \"Ringo_Boss\" and unit2.team == 'player') or (unit2.nid == \"Ringo_Boss\" and unit.team == 'player')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Ringo;Left",
            "speak;Ringo;Even here, it seems like we can't avoid conflict...|but what can I do? I'll just get this done with.",
            "remove_portrait;Ringo",
            "show_combat_ui"
        ],
        "nid": "3 FightRingo"
    },
    {
        "name": "DefeatSeiran",
        "trigger": "combat_death",
        "level_nid": "3",
        "condition": "unit.nid == \"Seiran_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Seiran;Left",
            "speak;Seiran;Let me show you a little of what I can do!",
            "remove_portrait;Seiran",
            "level_var;SeiranSpellMusic;1",
            "show_combat_ui"
        ],
        "nid": "3 DefeatSeiran"
    },
    {
        "name": "DefeatSeiran_1",
        "trigger": "combat_death",
        "level_nid": "3",
        "condition": "unit.nid == \"Seiran_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Seiran;Left",
            "speak;Seiran;I'm handing in my resignation after this...",
            "remove_portrait;Seiran",
            "level_var;SeiranSpellMusic;0",
            "show_combat_ui"
        ],
        "nid": "3 DefeatSeiran_1"
    },
    {
        "name": "DefeatRingo",
        "trigger": "combat_death",
        "level_nid": "3",
        "condition": "unit.nid == \"Ringo_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Ringo;Left",
            "speak;Ringo;Tch, tough customer, eh?",
            "remove_portrait;Ringo",
            "level_var;RingoSpellMusic;1",
            "show_combat_ui"
        ],
        "nid": "3 DefeatRingo"
    },
    {
        "name": "DefeatRingo_1",
        "trigger": "combat_death",
        "level_nid": "3",
        "condition": "unit.nid == \"Ringo_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Ringo;Left",
            "speak;Ringo;I guess that's enough for today!",
            "remove_portrait;Ringo",
            "give_bexp;100;Reimu",
            "level_var;RingoSpellMusic;0",
            "show_combat_ui"
        ],
        "nid": "3 DefeatRingo_1"
    },
    {
        "name": "WarpA",
        "trigger": "Warp!",
        "level_nid": "5",
        "condition": "region.nid == 'WarpA'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_unit;{unit};12,18;warp",
            "has_traded;{unit}"
        ],
        "nid": "5 WarpA"
    },
    {
        "name": "WarpB",
        "trigger": "Warp!",
        "level_nid": "5",
        "condition": "region.nid == 'WarpB'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_unit;{unit};14,24;warp",
            "has_traded;{unit}"
        ],
        "nid": "5 WarpB"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "6",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "trigger_script;ENDING\u2028if;game.turncount <= 15",
            "give_bexp;500",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 20",
            "give_bexp;{e:500 - ((game.turncount - 15) * 100)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 20",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "",
            "music;Strawberry Crisis",
            "change_background;Eientei",
            "multi_add_portrait;Reimu;CenterRight;Marisa;FarRight;Chiyuri;FarLeft;Yumemi;CenterLeft",
            "transition;open",
            "",
            "",
            "speak;Yumemi;Curses! Foiled again! And by that shrine maiden and her witch friend no less.",
            "speak;Reimu;{c:wait; 200}...Do I know you?",
            "speak;Marisa;Yeah, have we seen you around before...|Ugh, just trying to remember is making me dizzy.",
            "speak;Yumemi;*Sigh*. My first day back, and already not to a good start.",
            "speak;Chiyuri;Hey, what are we waiting for? Just get us out of here already!",
            "expression;Yumemi;CloseEyes,Smile",
            "bop_portrait;Yumemi",
            "speak;Yumemi;Hmhmhm. This isn't the last you've seen of me!",
            "",
            "multi_remove_portrait;Chiyuri;Yumemi",
            "sound;Warp",
            "",
            "music;Skygazer",
            "remove_portrait;Marisa",
            "add_portrait;Marisa;CenterLeft",
            "",
            "speak;Reimu;And they got away. Oh, my lightheadedness too!",
            "speak;Marisa;Hmm. Somethin' seems familiar about those guys, but I can't put my finger on it.",
            "speak;Reimu;Ah, well now that I think about it.",
            "speak;Marisa;Yeah?",
            "speak;Reimu;That blonde girl...",
            "speak;Marisa;You got something, Reimu?",
            "speak;Reimu;I didn't know that the ship phantom had a sister.",
            "speak;Marisa;Not exactly what I was looking for...",
            "speak;Reimu;*Yawn*. What a day, I'm beat.",
            "speak;Marisa;Tell me about it, I need some sake.",
            "",
            "remove_portrait;Marisa",
            "add_portrait;Marisa;FarRight",
            "add_portrait;Eirin;CenterLeft",
            "",
            "speak;Marisa;Hey doc! I think I'd like to collect our payment. Y'know, for saving Eientei and all.",
            "speak;Eirin;...Seeing that you did aid in helping me defend Eientei, I suppose some compensation is in order.",
            "expression;Marisa;Smile",
            "speak;Marisa;And that, my dear Reimu, is how you get free lodging. Now show me to the bathhouse.",
            "expression;Eirin;CloseEyes",
            "speak;Eirin;This isn't an onsen, don't push your luck.",
            "",
            "transition;close",
            "",
            "change_party;Mokou;Dumpster",
            "change_party;Kaguya;Dumpster",
            "choice;KaguyaMokou;Kaguya or Mokou?;Kaguya,Mokou;;h;center",
            "if;'{v:KaguyaMokou}' == 'Kaguya'",
            "change_party;Kaguya;Reimu",
            "change_team;Mokou;other",
            "add_lore;Kaguya",
            "elif;'{v:KaguyaMokou}' == 'Mokou'",
            "change_party;Mokou;Reimu",
            "change_team;Kaguya;other",
            "add_lore;Mokou",
            "end",
            "game_var;chaptercount;6",
            "set_next_chapter;7"
        ],
        "nid": "6 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "6",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "",
            "",
            "",
            "music;Invisible Full Moon",
            "",
            "center_cursor;10,2",
            "add_unit;Marisa;11,2",
            "add_unit;Eirin_NPC;10,1",
            "disp_cursor;t",
            "transition;open",
            "disp_cursor;f",
            "",
            "",
            "disp_cursor;t",
            "wait;2000",
            "disp_cursor;f",
            "load_unit;Reimu;player",
            "add_unit;Reimu;16,0",
            "wait;1000",
            "move_unit;Reimu;9,2",
            "wait;1000",
            "",
            "multi_add_portrait;Marisa;CenterLeft;Eirin;CenterRight",
            "add_portrait;Reimu;OffscreenLeft",
            "",
            "#For the next part of the cutscene",
            "",
            "add_unit;Reisen;11,25",
            "add_unit;Tewi;9,25",
            "add_unit;Mokou;10,24",
            "add_unit;Kaguya;10,26",
            "",
            "#Focus on the Main Guys",
            "move_portrait;Reimu;FarLeft",
            "speak;Reimu;You know, you could have waited up for me.",
            "speak;Eirin;Apologies. As you can see, this situation is quite urgent.",
            "speak;Reimu;Alright, who are we dealing with this time. The Animal Realm? The Amanojaku? I swear if it's the Lunarians.",
            "speak;Marisa;Hmm...{c:wait;200} looks like that's going to be a none of the above. These guys seem new in town.",
            "speak;Reimu;Looks like we are going to go for the orientation procedure then.",
            "speak;Eirin;Perhaps these invaders are linked to my earlier...{c:wait;200} patients then.",
            "speak;Reimu;Wait a minute, where is that rabbit? She was just with us earlier.",
            "speak;Eirin;I anticipated that this enemy would be difficult, so I sent Udongein to flank from the south entrance.",
            "speak;Marisa;Wow, who knew our resident doctor had military experience as well?",
            "speak;Eirin;Given the nature of the moon, I would be surpised if you didn't assume so.",
            "",
            "multi_remove_portrait;Reimu;Marisa;Eirin",
            "",
            "#Focus on Reisen's Group",
            "center_cursor;10,25",
            "disp_cursor;t",
            "wait;2000",
            "disp_cursor;f",
            "",
            "multi_add_portrait;Kaguya;CenterLeft;Mokou;CenterRight;Reisen;FarLeft;Tewi;FarRight",
            "speak;Mokou;Man, I just wanted a good night's sleep. Why am I even helping defend this place?",
            "expression;Kaguya;Smile",
            "speak;Kaguya;Oh Mokou~, you come visit so much, this is basically your second home at this point~.",
            "speak;Mokou;Hmph. Fine, but you owe me big time, Kaguya. When this is over, you know what to do.",
            "speak;Kaguya;This would make for a fine warmup anyway.",
            "speak;Tewi;Hey, you two! Focus on fighting the bad guys before fighting each other, jeez. Now come on, chop chop.",
            "",
            "remove_portrait;Tewi",
            "remove_portrait;Mokou",
            "remove_portrait;Reisen",
            "add_portrait;Reisen;CenterRight",
            "",
            "speak;Reisen;Something seems off about this though, Princess.",
            "speak;Kaguya;Hmm? What is on your mind, Inaba?",
            "speak;Reisen;I've never seen any of these people before, not even during my trips to the village. And yet here they are, casually walking into Eientei of all places...",
            "speak;Kaguya;...So?",
            "speak;Reisen;...With all due respect, Princess, you seem to be taking these implications very...{c:wait;200} lightly to say the least.",
            "speak;Kaguya;Well, we'll just knock some sense into these invaders like we always do! \"Easy as pie\"!",
            "remove_portrait;Kaguya",
            "speak;Reisen;...But didn't we lose to the invaders last time?",
            "",
            "transition;close",
            "",
            "move_unit;Kaguya;4,24;immediate",
            "",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "game_var;_fatigue;1",
            "add_lore;Fatigue",
            "trigger_script;6 Fatigue Disappear",
            "add_base_convo;Fatigue",
            "if;game.get_unit('Kosuzu').party == 'Reimu'",
            "    trigger_script;6 KosuzuScroll",
            "else",
            "end",
            "if;game.mode.nid == 'Tezukant'",
            "remove_unit;Reisen;fade",
            "change_party;Reisen;Dumpster",
            "load_unit;SigmaRaven;other",
            "add_unit;SigmaRaven;5,26;fade;closest",
            "else",
            "end",
            "enable_fog_of_war;t",
            "set_fog_of_war;gba;4;4;4",
            "autolevel_to;Kaguya;7;fixed",
            "autolevel_to;Mokou;7;fixed",
            "autolevel_to;Tewi;6;fixed",
            "autolevel_to;Reisen;6;fixed",
            "autolevel_to;SigmaRaven;6;fixed",
            "autolevel_to;Eirin_NPC;39;fixed",
            "prep;1;Spirit of Avarice",
            "move_cursor;Mokou",
            "flicker_cursor;Mokou",
            "change_team;Mokou;player",
            "move_cursor;Kaguya",
            "flicker_cursor;Kaguya",
            "change_team;Kaguya;player",
            "move_cursor;Tewi",
            "flicker_cursor;Tewi",
            "change_team;Tewi;player",
            "move_cursor;Reisen",
            "flicker_cursor;Reisen",
            "change_team;Reisen;player",
            "move_cursor;SigmaRaven",
            "flicker_cursor;SigmaRaven",
            "change_team;SigmaRaven;player",
            "add_lore;Tewi",
            "add_lore;Reisen"
        ],
        "nid": "6 Intro"
    },
    {
        "name": "DoorA",
        "trigger": "Door",
        "level_nid": "5",
        "condition": "region.nid == 'DoorA'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "show_layer;DoorA",
            "has_finished;{unit}"
        ],
        "nid": "5 DoorA"
    },
    {
        "name": "DoorB",
        "trigger": "Door",
        "level_nid": "5",
        "condition": "region.nid == 'DoorB'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "show_layer;DoorB",
            "has_finished;{unit}"
        ],
        "nid": "5 DoorB"
    },
    {
        "name": "TalkRumiaCirno",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Rumia' and unit2.nid == 'Cirno'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Rumia;Right;ExpressionList=Smile",
            "add_portrait;Cirno;Left;ExpressionList=Smile",
            "speak;Rumia;Cirno, there you are!",
            "speak;Cirno;Ah, Rumia! You came to save us!",
            "speak;Rumia;I guess I did, didn't I...?",
            "expression;Cirno;NoSmile",
            "speak;Cirno;Huh?",
            "speak;Rumia;Don't worry about it!",
            "multi_remove_portrait;Rumia;Cirno",
            "change_team;Cirno;player",
            "remove_talk;Wriggle;Cirno",
            "remove_talk;Mystia;Cirno",
            "remove_talk;Rumia;Cirno",
            "remove_talk;Star;Cirno",
            "remove_talk;Sunny;Cirno",
            "remove_talk;Luna;Cirno",
            "add_lore;Cirno"
        ],
        "nid": "4 TalkRumiaCirno"
    },
    {
        "name": "TalkWriggleCirno",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Wriggle' and unit2.nid == 'Cirno'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Wriggle;Right;ExpressionList=Smile",
            "add_portrait;Cirno;Left;ExpressionList=Smile",
            "speak;Wriggle;Well, well, well.",
            "speak;Cirno;Ah, Wriggle! There you are! Let's bust out of here together!",
            "speak;Wriggle;Heh heh...right behind you!",
            "multi_remove_portrait;Wriggle;Cirno",
            "change_team;Cirno;player",
            "remove_talk;Rumia;Cirno",
            "remove_talk;Mystia;Cirno",
            "remove_talk;Wriggle;Cirno",
            "remove_talk;Star;Cirno",
            "remove_talk;Sunny;Cirno",
            "remove_talk;Luna;Cirno",
            "add_lore;Cirno"
        ],
        "nid": "4 TalkWriggleCirno"
    },
    {
        "name": "TalkMystiaCirno",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Mystia' and unit2.nid == 'Cirno'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Mystia;Right",
            "add_portrait;Cirno;Left",
            "speak;Mystia;Hey, Cirno! We're here to get you!",
            "speak;Cirno;Finally! Took you long enough, were you possessed or something?",
            "speak;Mystia;I guess you could say that...",
            "multi_remove_portrait;Mystia;Cirno",
            "change_team;Cirno;player",
            "remove_talk;Wriggle;Cirno",
            "remove_talk;Rumia;Cirno",
            "remove_talk;Mystia;Cirno",
            "remove_talk;Star;Cirno",
            "remove_talk;Sunny;Cirno",
            "remove_talk;Luna;Cirno",
            "add_lore;Cirno"
        ],
        "nid": "4 TalkMystiaCirno"
    },
    {
        "name": "TalkStarCirno",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Star' and unit2.nid == 'Cirno'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Star;Right",
            "add_portrait;Cirno;Left",
            "speak;Cirno;AH! You!",
            "speak;Star;AH! You!",
            "speak;Cirno;Which one were you again?",
            "speak;Star;Star Sapphire.",
            "speak;Cirno;Too long. Don't remember.",
            "speak;Star;Why you...!",
            "multi_remove_portrait;Star;Cirno",
            "change_team;Cirno;player",
            "remove_talk;Wriggle;Cirno",
            "remove_talk;Rumia;Cirno",
            "remove_talk;Mystia;Cirno",
            "remove_talk;Star;Cirno",
            "remove_talk;Sunny;Cirno",
            "remove_talk;Luna;Cirno",
            "add_lore;Cirno"
        ],
        "nid": "4 TalkStarCirno"
    },
    {
        "name": "TalkLunaCirno",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Luna' and unit2.nid == 'Cirno'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Luna;Right",
            "add_portrait;Cirno;Left",
            "speak;Cirno;It's you!",
            "speak;Luna;Quiet. I'm trying to find my lost meat bun...",
            "speak;Cirno;It's probably dirty already! Let it go!",
            "speak;Luna;My meat bun...",
            "multi_remove_portrait;Luna;Cirno",
            "change_team;Cirno;player",
            "remove_talk;Wriggle;Cirno",
            "remove_talk;Rumia;Cirno",
            "remove_talk;Mystia;Cirno",
            "remove_talk;Star;Cirno",
            "remove_talk;Sunny;Cirno",
            "remove_talk;Luna;Cirno",
            "add_lore;Cirno"
        ],
        "nid": "4 TalkLunaCirno"
    },
    {
        "name": "TalkSunnyCirno",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Sunny' and unit2.nid == 'Cirno'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Sunny;Right",
            "add_portrait;Cirno;Left",
            "speak;Sunny;If it isn't the dumb ice fairy who managed to get herself locked up.",
            "speak;Cirno;Quiet, you! They'd lock you up even faster!",
            "speak;Sunny;Nuh uh!",
            "multi_remove_portrait;Sunny;Cirno",
            "change_team;Cirno;player",
            "remove_talk;Wriggle;Cirno",
            "remove_talk;Rumia;Cirno",
            "remove_talk;Mystia;Cirno",
            "remove_talk;Star;Cirno",
            "remove_talk;Sunny;Cirno",
            "remove_talk;Luna;Cirno",
            "add_lore;Cirno"
        ],
        "nid": "4 TalkSunnyCirno"
    },
    {
        "name": "TalkRumiaDaiyousei",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Rumia' and unit2.nid == 'Daiyousei'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Rumia;Right;ExpressionList=Smile",
            "add_portrait;Daiyousei;Left",
            "speak;Rumia;Ah, found you!",
            "speak;Daiyousei;Oh, Rumia!",
            "speak;Rumia;Let's get out of here! Although, I don't particularly mind the darkness...",
            "speak;Daiyousei;I do! Hurry up!",
            "multi_remove_portrait;Rumia;Daiyousei",
            "change_team;Daiyousei;player",
            "remove_talk;Wriggle;Daiyousei",
            "remove_talk;Mystia;Daiyousei",
            "remove_talk;Rumia;Daiyousei",
            "remove_talk;Star;Daiyousei",
            "remove_talk;Sunny;Daiyousei",
            "remove_talk;Luna;Daiyousei",
            "add_lore;Daiyousei"
        ],
        "nid": "4 TalkRumiaDaiyousei"
    },
    {
        "name": "TalkWriggleDaiyousei",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Wriggle' and unit2.nid == 'Daiyousei'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Wriggle;Right",
            "add_portrait;Daiyousei;Left",
            "speak;Wriggle;Dai?! Is that you?",
            "expression;Daiyousei;Smile",
            "speak;Daiyousei;Oh, it's Wriggle! Did you come to save us?",
            "expression;Wriggle;Smile",
            "speak;Wriggle;Yeah, and I brought Miss Reimu too!",
            "expression;Daiyousei;NoSmile",
            "speak;Daiyousei;Oh...I mean, we'll be fine, right?",
            "expression;Wriggle;NoSmile",
            "speak;Wriggle;Yeah...sure.",
            "multi_remove_portrait;Wriggle;Daiyousei",
            "change_team;Daiyousei;player",
            "remove_talk;Rumia;Daiyousei",
            "remove_talk;Mystia;Daiyousei",
            "remove_talk;Wriggle;Daiyousei",
            "remove_talk;Star;Daiyousei",
            "remove_talk;Sunny;Daiyousei",
            "remove_talk;Luna;Daiyousei",
            "add_lore;Daiyousei"
        ],
        "nid": "4 TalkWriggleDaiyousei"
    },
    {
        "name": "TalkMystiaDaiyousei",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Mystia' and unit2.nid == 'Daiyousei'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Mystia;Right",
            "add_portrait;Daiyousei;Left",
            "speak;Mystia;Ah, there you are!",
            "speak;Daiyousei;Oh, a familiar face!",
            "speak;Mystia;Let's wrap this up quickly and scram!",
            "speak;Daiyousei;Right!",
            "multi_remove_portrait;Mystia;Daiyousei",
            "change_team;Daiyousei;player",
            "remove_talk;Rumia;Daiyousei",
            "remove_talk;Wriggle;Daiyousei",
            "remove_talk;Mystia;Daiyousei",
            "remove_talk;Star;Daiyousei",
            "remove_talk;Sunny;Daiyousei",
            "remove_talk;Luna;Daiyousei",
            "add_lore;Daiyousei"
        ],
        "nid": "4 TalkMystiaDaiyousei"
    },
    {
        "name": "TalkStarDaiyousei",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Star' and unit2.nid == 'Daiyousei'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Star;Right",
            "add_portrait;Daiyousei;Left",
            "speak;Star;Hello there.",
            "speak;Daiyousei;It's you! Uh...",
            "speak;Star;It's ok. I can't remember your name either.",
            "remove_portrait;Star",
            "speak;Daiyousei;Uh...yeah! What IS my name...?",
            "remove_portrait;Daiyousei",
            "change_team;Daiyousei;player",
            "remove_talk;Rumia;Daiyousei",
            "remove_talk;Wriggle;Daiyousei",
            "remove_talk;Mystia;Daiyousei",
            "remove_talk;Star;Daiyousei",
            "remove_talk;Sunny;Daiyousei",
            "remove_talk;Luna;Daiyousei",
            "add_lore;Daiyousei"
        ],
        "nid": "4 TalkStarDaiyousei"
    },
    {
        "name": "TalkLunaDaiyousei",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Luna' and unit2.nid == 'Daiyousei'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Luna;Right",
            "add_portrait;Daiyousei;Left",
            "speak;Luna;Oh. Hi.",
            "speak;Daiyousei;Luna! Let's hurry up and get out of here!",
            "speak;Luna;Yes, let's...{c:wait;300}but I seem to have dropped my freshly steamed bun around here...",
            "speak;Daiyousei;You idiot! No time for that!",
            "multi_remove_portrait;Luna;Daiyousei",
            "change_team;Daiyousei;player",
            "remove_talk;Rumia;Daiyousei",
            "remove_talk;Wriggle;Daiyousei",
            "remove_talk;Mystia;Daiyousei",
            "remove_talk;Star;Daiyousei",
            "remove_talk;Sunny;Daiyousei",
            "remove_talk;Luna;Daiyousei",
            "add_lore;Daiyousei"
        ],
        "nid": "4 TalkLunaDaiyousei"
    },
    {
        "name": "TalkSunnyDaiyousei",
        "trigger": "on_talk",
        "level_nid": "4",
        "condition": "unit.nid == 'Sunny' and unit2.nid == 'Daiyousei'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Sunny;Right",
            "add_portrait;Daiyousei;Left",
            "speak;Sunny;Dai!",
            "speak;Daiyousei;I thought you guys would never come!",
            "expression;Sunny;Smile",
            "speak;Sunny;Well, we just remembered at the last moment!",
            "expression;Daiyousei;Smile",
            "speak;Daiyousei;Oh...thanks!",
            "speak;Sunny;Alright, let's get out of here!",
            "multi_remove_portrait;Sunny;Daiyousei",
            "change_team;Daiyousei;player",
            "remove_talk;Rumia;Daiyousei",
            "remove_talk;Wriggle;Daiyousei",
            "remove_talk;Mystia;Daiyousei",
            "remove_talk;Star;Daiyousei",
            "remove_talk;Sunny;Daiyousei",
            "remove_talk;Luna;Daiyousei",
            "add_lore;Daiyousei"
        ],
        "nid": "4 TalkSunnyDaiyousei"
    },
    {
        "name": "Seize",
        "trigger": "Seize",
        "level_nid": "5",
        "condition": "region.nid == 'Seize'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "5 Seize"
    },
    {
        "name": "WarpA1",
        "trigger": "Warp!",
        "level_nid": "6",
        "condition": "region.nid == 'WarpA1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_unit;{unit};16,25;warp;giveup",
            "has_traded;{unit}"
        ],
        "nid": "6 WarpA1"
    },
    {
        "name": "WarpA2",
        "trigger": "Warp!",
        "level_nid": "6",
        "condition": "region.nid == 'WarpA2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_unit;{unit};3,3;warp;giveup",
            "has_traded;{unit}"
        ],
        "nid": "6 WarpA2"
    },
    {
        "name": "WarpB1",
        "trigger": "Warp!",
        "level_nid": "6",
        "condition": "region.nid == 'WarpB1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_unit;{unit};3,14;warp;giveup",
            "has_traded;{unit}"
        ],
        "nid": "6 WarpB1"
    },
    {
        "name": "WarpB2",
        "trigger": "Warp!",
        "level_nid": "6",
        "condition": "region.nid == 'WarpB2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_unit;{unit};3,7;warp;giveup",
            "has_traded;{unit}"
        ],
        "nid": "6 WarpB2"
    },
    {
        "name": "Wall1",
        "trigger": "unit_death",
        "level_nid": "6",
        "condition": "unit.nid == 'Wall1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "show_layer;Wall1"
        ],
        "nid": "6 Wall1"
    },
    {
        "name": "Wall2",
        "trigger": "unit_death",
        "level_nid": "6",
        "condition": "unit.nid == 'Wall2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "show_layer;Wall2"
        ],
        "nid": "6 Wall2"
    },
    {
        "name": "Door1",
        "trigger": "Door",
        "level_nid": "6",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "show_layer;Door1",
            "has_finished;{unit}"
        ],
        "nid": "6 Door1"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "6",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn3;Turn3;fade;closest ",
            "#142,144,146",
            "move_cursor;142",
            "move_cursor;144",
            "move_cursor;146",
            "move_cursor;Reimu"
        ],
        "nid": "6 Turn3"
    },
    {
        "name": "Turn5",
        "trigger": "turn_change",
        "level_nid": "6",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn5;Turn5;fade;closest",
            "move_cursor;173",
            "move_cursor;Reimu"
        ],
        "nid": "6 Turn5"
    },
    {
        "name": "Turn6",
        "trigger": "turn_change",
        "level_nid": "6",
        "condition": "game.turncount == 6",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn6;Turn6;fade;closest",
            "move_cursor;150",
            "move_cursor;155",
            "move_cursor;160",
            "move_cursor;165",
            "move_cursor;Reimu"
        ],
        "nid": "6 Turn6"
    },
    {
        "name": "Turn8",
        "trigger": "turn_change",
        "level_nid": "6",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn8;Turn8;fade;closest",
            "move_cursor;169",
            "move_cursor;Reimu"
        ],
        "nid": "6 Turn8"
    },
    {
        "name": "Turn9",
        "trigger": "turn_change",
        "level_nid": "6",
        "condition": "game.turncount == 9",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn9;Turn9;fade;closest",
            "move_cursor;172",
            "move_cursor;Reimu"
        ],
        "nid": "6 Turn9"
    },
    {
        "name": "Turn10",
        "trigger": "turn_change",
        "level_nid": "6",
        "condition": "game.turncount == 10",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "enable_fog_of_war;false",
            "add_group;Turn10;Turn10;fade;closest",
            "autolevel_to;Chiyuri_Boss;12;fixed",
            "move_cursor;Chiyuri_Boss",
            "add_portrait;Chiyuri_Boss;Left",
            "disp_cursor;t",
            "wait;500",
            "disp_cursor;f",
            "speak;Chiyuri_Boss;You guys are taking too long!|Fine, I guess it's my turn now.",
            "remove_portrait;Chiyuri_Boss",
            "move_cursor;Marisa",
            "disp_cursor;t",
            "wait;500",
            "disp_cursor;f",
            "add_portrait;Marisa;Left",
            "speak;Marisa;Hmm? Who is that...phew, I'm getting dizzy looking at her.",
            "remove_portrait;Marisa",
            "",
            "change_objective_win;Defeat Boss,Defeat Boss",
            "change_objective_simple;Rout Enemy",
            "speak;;This map's clear bonus is 500 Bonus EXP, with a decrease of 100 BExp per turn you take over 15 turns!;;;hint"
        ],
        "nid": "6 Turn10"
    },
    {
        "name": "Chest1",
        "trigger": "Chest",
        "level_nid": "6",
        "condition": "region.nid == 'Chest1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Yukkuri_M",
            "has_finished;{unit}"
        ],
        "nid": "6 Chest1"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "6",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest2",
            "give_item;{unit};Rapier",
            "has_finished;{unit}"
        ],
        "nid": "6 Chest2"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "6",
        "condition": "region.nid == 'Chest3'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest3",
            "give_item;{unit};Physic",
            "has_finished;{unit}"
        ],
        "nid": "6 Chest3"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "8",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 15",
            "give_bexp;500",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 20",
            "give_bexp;{e:500 - ((game.turncount - 15) * 100)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 20",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "",
            "transition;close",
            "music;Skygazer",
            "change_background;Open Field",
            "transition;open",
            "",
            "multi_add_portrait;Marisa;CenterRight;Reimu;CenterLeft;Kasen;FarLeft;Mima;FarRight",
            "speak;Reimu;And that's another strange person gone.",
            "speak;Marisa;At least we got another one as compensation.|That magic seems... familiar.",
            "speak;Mima;Gensokyo is only so small, after all~",
            "speak;Kasen;With that person out of the way, what is the next order of business?",
            "speak;Marisa;Now that I think about it, we saw that strange person in white retreating...{c:wait:300}thataway.",
            "speak;Reimu;And what exactly is \"thataway\"?",
            "speak;Marisa;Alice's place. I was thinking we do a good old fashioned wellfare check.|Y'know, what neighbors do.",
            "speak;Mima;Hmm. I think I remember having a maid named Alice.|Maybe this one will be more...pleasant.",
            "speak;Kasen;Hmm, this seems like a trap.",
            "speak;Marisa;So?",
            "speak;Kasen;Wouldn't it be more wise to wait around and see what the enemy is scheming?",
            "speak;Marisa;You know what they say. If you are too occupied with hesitation, you'll go stiff!",
            "speak;Kasen;Still, the matter of fact is that this stranger is leading us into a very obvious trap.",
            "speak;Marisa;What kind of neighbor would I be if I left people to hang for dry?",
            "speak;Kasen;Isn't that what you usually do on your library runs anyway?|It's quite...ordinary for you.",
            "speak;Reimu;At this rate we'll have to call you \"The Ordinary Neighbor\" too.",
            "speak;Marisa;Oh hush. I'll have you know that I recently applied for a membership.",
            "speak;Reimu;I don't think that librarian is even active enough to *manage* a system like that.",
            "speak;Marisa;Hey, Hey. Less talking, more saving.|Come on, let's go!",
            "remove_portrait;Marisa",
            "remove_portrait;Mima",
            "speak;Reimu;That's another thing left to hang for dry.",
            "remove_portrait;Reimu",
            "expression;Kasen;CloseEyes",
            "speak;Kasen;Seems like that's her \"ordinary\".",
            "",
            "transition;close",
            "trigger_script;ENDING",
            "game_var;chaptercount;8",
            "set_next_chapter;Base"
        ],
        "nid": "8 Outro"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "8",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "load_unit;Mima",
            "autolevel_to;Mima;15;fixed",
            "autolevel_to;Louise_Boss;14;fixed",
            "",
            "# The actual dialogue starts here",
            "",
            "music;Drunk as I Like",
            "change_background;Eientei Hallway",
            "multi_add_portrait;Reimu;CenterLeft;Marisa;CenterRight",
            "",
            "transition;open",
            "",
            "expression;Marisa;Smile",
            "bop_portrait;Marisa",
            "speak;Marisa;Ah, nothin' like a good night's sleep to fix you up!",
            "expression;Reimu;Smile",
            "speak;Reimu;That was some good sake last night too.",
            "speak;Marisa;Wow, and you ain't even hungover either, and I saw you down three dishes!",
            "speak;Reimu;I think they called it \"Full Moon's Eve\".|We could make a killing off of this!",
            "speak;Marisa;Hmm, definitely a powerful brew alright. You sure it didn't make you a little tipsy?",
            "expression;Reimu;CloseEyes,Smile",
            "speak;Reimu;~Ah. I'm getting the feeling it is going to be a -",
            "add_portrait;Eirin;FarLeft",
            "speak;Eirin;*Ahem*",
            "expression;Reimu;NoSmile",
            "expression;Marisa;NoSmile",
            "bop_portrait;Reimu",
            "remove_portrait;Reimu",
            "add_portrait;Reimu;FarRight",
            "speak;Reimu;W{c:wait:300}-wha? What is it?",
            "speak;Eirin;I've come to inform you that your booking hours are up.|I kindly request you to vacate the premises.",
            "speak;Reimu;Ugh, we were just about to head out anyway.",
            "speak;Marisa;(Wow, sober already).;;;thought_bubble",
            "speak;Eirin;Now, now. I did have the liberty of leaving a farewell gift.|You may take Udongein and the greater Inaba with you as well.",
            "speak;Marisa;You sure you won't consider turning Eientei into an inn?|All ya' need is some onsen tamago.",
            "expression;Eirin;CloseEyes",
            "speak;Eirin;This is a house of medicine first and foremost. What would our image be reduced to?",
            "expression;Eirin;OpenEyes",
            "speak;Eirin;Anyways, I have experiments to tend to, if you'd excuse me.",
            "remove_portrait;Eirin",
            "remove_portrait;Reimu",
            "add_portrait;Reimu;CenterLeft",
            "speak;Reimu;*Sigh*, I guess we are doing this again.|Alright, what's the plan?",
            "bop_portrait;Marisa",
            "speak;Marisa;Plan? I thought you had it?",
            "speak;Reimu;Obviously, I was attending to more important matters last night.|So, going by chain of command, it was your job.",
            "speak;Marisa;H{c:wait:300}-hey, since when was I second in command?|I'm a co-commander-in-chief at least!",
            "add_portrait;Kasen;FarLeft",
            "speak;Kasen;Have you two seriously not come up with a plan since yesterday?",
            "bop_portrait;Reimu",
            "remove_portrait;Reimu",
            "add_portrait;Reimu;FarRight",
            "speak;Reimu;Can people just come up to me like NORMAL for once?",
            "speak;Marisa;It must come with the job, o'Leader.",
            "speak;Kasen;This isn't the time to be butting heads.|As we seen yesterday, we are facing enemies that are getting ever more powerful.|We must prepare accordingly.",
            "speak;Reimu;Can't we just do it the traditional way:|going in a straight line until we find the mastermind?",
            "speak;Kasen;And if that fails you?",
            "speak;Reimu;Now you're just not making any sense.",
            "speak;Marisa;Hmm, I do have some weapons at my place, so why don't we start there?",
            "speak;Reimu;Why do you even have those with you?",
            "speak;Marisa;Kourin was giving em out at a good bargain!",
            "speak;Reimu;I think that was more than a bargain.",
            "speak;Marisa;Then after we gear up a little, we can stop by Hakugyokurou.|We could even go and pick up some extra hands from there.",
            "speak;Reimu;We could even ask that gluttonous ghost for her gardener.",
            "speak;Marisa;You'd think she'd mind an unkempt yard... Or a lack of a chef?",
            "speak;Reimu;She could take notes from goats. Two birds with one stone.",
            "speak;Kasen;Very good, Marisa. Let us be off then.",
            "remove_portrait;Kasen",
            "expression;Marisa;Smile",
            "speak;Marisa;Now they ought to call ME the commander-in-chief.",
            "remove_portrait;Marisa",
            "expression;Reimu;CloseEyes",
            "speak;Reimu;Hey, you can't just promote yourself like that!",
            "",
            "",
            "transition;close",
            "wait;1000",
            "change_background",
            "music;Fragrant Plants",
            "center_cursor;3,23",
            "add_unit;Kasen;4,23;immediate",
            "transition;open",
            "location_card;Forest of Magic",
            "disp_cursor;t",
            "wait;1000",
            "disp_cursor;f",
            "multi_add_portrait;Marisa;CenterRight;Reimu;CenterLeft;Kasen;FarLeft",
            "speak;Marisa;Ah, home sweet home! That miasma smells really good!",
            "speak;Reimu;Sometimes I wonder how you're still alive.",
            "speak;Kasen;Pardon my interruption, but I don't believe that the forest was always this infested with youkai, no?",
            "speak;Marisa;Hmm, the forest does seem more youkai-y than usual, not really a high bar to pass.|Wait, over there.",
            "multi_remove_portrait;Reimu;Marisa;Kasen",
            "center_cursor;11,1",
            "disp_cursor;t",
            "wait;1000",
            "disp_cursor;f",
            "add_portrait;Louise;CenterRight;;Smile",
            "speak;Louise;Lalala. So this is what the human world looks like.|There's{c:wait;200}...way more green than I thought.|Ah, I guess I can take a look around after I'm done patrolling.|Oh?",
            "remove_portrait;Louise",
            "center_cursor;2,2",
            "disp_cursor;t",
            "wait;1000",
            "disp_cursor;f",
            "add_portrait;Louise;CenterRight;;Smile",
            "speak;Louise;Is that a cottage over there? How quaint!|I didn't even ask for accomodation.|Golly, the human world is so hospitable!",
            "remove_portrait;Louise",
            "center_cursor;2,23",
            "multi_add_portrait;Marisa;CenterRight;Reimu;CenterLeft;Kasen;FarLeft",
            "speak;Reimu;Hey, it looks like another new guy.",
            "speak;Marisa;And it looks like she is eyeing my house! Property theft isn't funny.",
            "speak;Reimu;Says Miss Kettle to Miss Pot.",
            "speak;Marisa;It's only funny when it's at someone else's expense.",
            "speak;Reimu;Phew. Maybe it's just the forest, but I feel nauseous just looking at her.",
            "speak;Kasen;Hmm. It will be tough to break for Marisa's cottage with all of these enemies present.|We should clear them out first.",
            "bop_portrait;Reimu",
            "speak;Reimu;*Yawn*. An extermination job this early in the morning?|I'm not really in the mood.",
            "speak;Marisa;Maybe some fresh air will clear your headache.",
            "speak;Reimu;I wouldn't go and call this air \"fresh\".",
            "",
            "#HERE COMES MIMA",
            "",
            "speak;;My, perhaps there is room for one more.",
            "bop_portrait;Reimu",
            "speak;Reimu;I swear, the next person who does this is going to-",
            "speak;Marisa;...",
            "multi_remove_portrait;Reimu;Marisa;Kasen",
            "",
            "music_clear",
            "wait;1000",
            "add_unit;Mima;3,21;warp",
            "wait;1000",
            "music;Reincarnation",
            "",
            "multi_add_portrait;Marisa;CenterRight;Reimu;CenterLeft;Kasen;FarLeft;Mima;FarRight",
            "speak;Mima;Hello there.",
            "speak;Kasen;Who are you?! State your business!",
            "speak;Marisa;Y-yeah, who are you?",
            "expression;Marisa;CloseEyes",
            "bop_portrait;Marisa",
            "speak;Marisa;Ugh, my head.",
            "speak;Mima;Hmm...",
            "speak;Marisa;What is it?",
            "speak;Mima;Strange, you should recognize me.|I was your old teacher after all, Marisa.",
            "expression;Marisa;OpenEyes",
            "speak;Marisa;What are you even-{c:wait:500}grr.",
            "speak;Kasen;Marisa?",
            "speak;Marisa;I...yeah that's right. What's with me today?",
            "speak;Mima;Feeling better now~?",
            "speak;Marisa;Kasen, she's fine. I can't put my finger on it, but I think we can trust her.",
            "speak;Kasen;...",
            "speak;Marisa;Ugh, give me a minute to clear my head. I'll be right back.",
            "remove_portrait;Marisa",
            "move_portrait;Mima;CenterRight",
            "speak;Reimu;Darn... I knew I should've asked for some extra headache medicine.",
            "speak;Mima;Hmmm...Reimu",
            "speak;Reimu;I don't know who you are, but something seems off about you.",
            "speak;Kasen;That's what I'm thinking of too, Reimu.",
            "speak;Mima;Marisa did vouch for me though...",
            "speak;Reimu;She did? Well... alright, I trust her on this, but I'm keeping my eye on you. Ahh, I need to lie down.",
            "speak;Kasen;You heard her, now start pulling your weight.",
            "speak;Mima;...Very well.",
            "",
            "transition;close",
            "multi_remove_portrait;Reimu;Marisa;Kasen;Mima",
            "remove_unit;Kasen;immediate",
            "remove_unit;Mima;immediate",
            "transition;open",
            "",
            "",
            "",
            "",
            "",
            "#Add Reincarnation here Later",
            "",
            "",
            "add_lore;Mima",
            "add_lore;Miasma",
            "add_talk;Remilia;Sakuya ",
            "trigger_script;START",
            "prep;1;Sealed Gods",
            "speak;;This map's clear bonus is 500 Bonus EXP, with a decrease of 100 BExp per turn you take over 15 turns!;;;hint"
        ],
        "nid": "8 Intro"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "9",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Rural Town",
            "transition;Open",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Yukkuri_M",
            "give_bexp;30;no_banner",
            "show_layer;Village1",
            "has_traded;{unit}"
        ],
        "nid": "9 Village1"
    },
    {
        "name": "Village2",
        "trigger": "Visit",
        "level_nid": "8",
        "condition": "region.nid == 'Village2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "#This one is Marisa's House",
            "",
            "transition;Close",
            "change_background;Rural Town",
            "transition;Open",
            "",
            "if;unit.nid == \"Marisa\"",
            "    add_portrait;{unit};FarLeft",
            "    expression;{unit};Smile",
            "    speak;{unit};Ah. Home sweet home, and before that weirdo could claim it too.",
            "    speak;{unit};Alright, let's see what we can grab from here",
            "    move_portrait;{unit};CenterLeft",
            "    expression;{unit};NoSmile",
            "    speak;{unit};Hmm...",
            "    move_portrait;{unit};FarRight",
            "    mirror_portrait;{unit}",
            "    bop_portrait;{unit}",
            "    speak;{unit};Not here either...",
            "    move_portrait;{unit};CenterRight",
            "    bop_portrait;{unit}",
            "    expression;{unit};Smile",
            "    speak;{unit};Aha! I got them! These will help.",
            "",
            "    transition;Close",
            "    remove_portrait;{unit}",
            "    change_background",
            "    transition;Open",
            "    give_item;{unit};Mend",
            "    give_item;{unit};Elfire",
            "    give_bexp;30;no_banner",
            "    show_layer;Village2",
            "    has_traded;{unit}",
            "    ",
            "",
            "elif;unit.nid == \"Reimu\"",
            "    add_portrait;{unit};FarLeft",
            "    speak;{unit};Jeez, this house is filthy! How does Marisa even live like this?",
            "    expression;{unit};CloseEyes",
            "    speak;{unit};*Sigh*, maybe one of these days I should add this to my sweeping runs.",
            "    expression;{unit};OpenEyes",
            "    move_portrait;{unit};CenterRight",
            "    bop_portrait;{unit}",
            "    speak;{unit};Yowch. What was that?|A...staff?",
            "    speak;{unit};Hmm, I guess I'll just borrow it then.",
            "",
            "    transition;Close",
            "    remove_portrait;{unit}",
            "    change_background",
            "    transition;Open",
            "    give_item;{unit};Mend",
            "    give_bexp;30;no_banner",
            "    show_layer;Village2",
            "    has_traded;{unit}",
            "    ",
            "",
            "else",
            "    add_portrait;{unit};FarLeft",
            "    speak;{unit};Oh, this house is filthy. I'll just have to grab what I can and get out of here.",
            "",
            "    transition;Close",
            "    remove_portrait;{unit}",
            "    change_background",
            "    transition;Open",
            "    give_item;{unit};Mend",
            "    give_bexp;30;no_banner",
            "    show_layer;Village2",
            "    has_traded;{unit}",
            "    end"
        ],
        "nid": "8 Village2"
    },
    {
        "name": "Destroy1",
        "trigger": "Destructible",
        "level_nid": "8",
        "condition": "region.nid == 'Destructible1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;21,16",
            "show_layer;Destroyed1",
            "remove_region;Village1",
            "wait;500"
        ],
        "nid": "8 Destroy1"
    },
    {
        "name": "Destroy2",
        "trigger": "Destructible",
        "level_nid": "8",
        "condition": "region.nid == 'Destructible2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "flicker_cursor;2,2",
            "show_layer;Destroyed2",
            "remove_region;Village2",
            "wait;500"
        ],
        "nid": "8 Destroy2"
    },
    {
        "name": "Wall1",
        "trigger": "unit_death",
        "level_nid": "5",
        "condition": "unit.nid == 'Wall1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Wall1"
        ],
        "nid": "5 Wall1"
    },
    {
        "name": "Wall2",
        "trigger": "unit_death",
        "level_nid": "5",
        "condition": "unit.nid == 'Wall2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Wall2"
        ],
        "nid": "5 Wall2"
    },
    {
        "name": "KosuzuScroll",
        "trigger": null,
        "level_nid": "6",
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "add_portrait;Kosuzu;Left",
            "speak;Kosuzu;Wait...is that...on the floor! A youma scroll!",
            "speak;Kosuzu;What a great catch! I didn't expect someone to just leave this lying about!",
            "speak;Kosuzu;Time to get a good read of you!",
            "give_item;Kosuzu;Tindalos",
            "transition;close",
            "change_background",
            "transition;open"
        ],
        "nid": "6 KosuzuScroll"
    },
    {
        "name": "Turn7",
        "trigger": "turn_change",
        "level_nid": "8",
        "condition": "game.turncount == 7",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Brigand1;Brigand1;fade;closest",
            "move_cursor;13,19",
            "add_group;Rein1;Rein1;fade;closest",
            "move_cursor;23,25"
        ],
        "nid": "8 Turn7"
    },
    {
        "name": "Turn1",
        "trigger": "turn_change",
        "level_nid": "8",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Brigand0;Brigand0;fade;closest",
            "move_cursor;12,17"
        ],
        "nid": "8 Turn1"
    },
    {
        "name": "MokouNPCDeath",
        "trigger": "unit_death",
        "level_nid": "2",
        "condition": "unit.nid == 'Mokou_NPC'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Mokou;Left",
            "speak;Mokou;Damn it, dying is not on my to-do list tonight. ",
            "speak;Mokou;Ugh, I'm going to feel this one in the morning, aren't I?",
            "remove_portrait;Mokou",
            "show_combat_ui"
        ],
        "nid": "2 MokouNPCDeath"
    },
    {
        "name": "Turn10",
        "trigger": "turn_change",
        "level_nid": "1",
        "condition": "game.turncount == 10",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Bandits;Bandits;fade",
            "move_cursor;131"
        ],
        "nid": "1 Turn10"
    },
    {
        "name": "SpellLouise",
        "trigger": "combat_end",
        "level_nid": "8",
        "condition": "game.check_dead(\"Louise_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Louise;Left",
            "speak;;Devil Sign: Tour Guide From the Underworld!;center;220;hint;;red;;;1;;;;;Warp",
            "speak;Louise;And I was promised a leisurely vacation. I guess it'll have to be a red one!",
            "remove_portrait;Louise",
            "add_group;LouiseSpell;LouiseSpell;warp;closest",
            "autolevel_to;Louise_Boss_1;15;fixed",
            "move_cursor;Louise_Boss_1",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('LouiseSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "8 SpellLouise"
    },
    {
        "name": "FightLouise",
        "trigger": "combat_start",
        "level_nid": "8",
        "condition": "unit.nid == \"Louise_Boss\" or unit2.nid == \"Louise_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Strawberry Crisis",
            "add_portrait;Louise;Left",
            "speak;Louise;Oh, someone from this world!|Hmm... doesn't look like you want to show me around.|That's a shame.",
            "remove_portrait;Louise",
            "show_combat_ui"
        ],
        "nid": "8 FightLouise"
    },
    {
        "name": "LouiseMusic",
        "trigger": "combat_start",
        "level_nid": "8",
        "condition": "unit.nid == \"Louise_Boss\" or unit2.nid == \"Louise_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Strawberry Crisis;1",
            "wait;402"
        ],
        "nid": "8 LouiseMusic"
    },
    {
        "name": "DefeatBoss",
        "trigger": "combat_end",
        "level_nid": "8",
        "condition": "game.check_dead(\"Louise_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "8 DefeatBoss"
    },
    {
        "name": "DeathYumemi",
        "trigger": "unit_death",
        "level_nid": "6",
        "condition": "unit.nid == \"Yumemi_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Yumemi;Left",
            "speak;Yumemi;Very impressive, but this is only the first trial.",
            "remove_portrait;Yumemi",
            "show_combat_ui"
        ],
        "nid": "6 DeathYumemi"
    },
    {
        "name": "DeathYumemi_1",
        "trigger": "unit_death",
        "level_nid": "6",
        "condition": "unit.nid == \"Yumemi_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Yumemi;Left",
            "speak;Yumemi;This...really blew up in my face, hasn't it.",
            "expression;Yumemi;CloseEyes",
            "remove_portrait;Yumemi",
            "show_combat_ui"
        ],
        "nid": "6 DeathYumemi_1"
    },
    {
        "name": "DeathChiyuri",
        "trigger": "unit_death",
        "level_nid": "6",
        "condition": "unit.nid == \"Chiyuri_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Chiyuri;Left",
            "speak;Chiyuri;Ah, too strong! I'm falling back.",
            "expression;Chiyuri;CloseEyes",
            "remove_portrait;Chiyuri",
            "show_combat_ui"
        ],
        "nid": "6 DeathChiyuri"
    },
    {
        "name": "SpellChiyuri",
        "trigger": "combat_end",
        "level_nid": "6",
        "condition": "game.check_dead(\"Chiyuri_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;other_phase;Strawberry Crisis",
            "change_music;other_battle;Strawberry Crisis",
            "add_portrait;Chiyuri;Left",
            "speak;;Mechanics Sign: Newton's First Gift;center;190;hint;;red;;;1;;;;;Warp",
            "speak;Chiyuri;Eughh...I may have been defeated...but my teacher will destroy you!",
            "remove_portrait;Chiyuri",
            "add_group;ChiyuriSpell;ChiyuriSpell;warp;push",
            "autolevel_to;Yumemi_Boss;15;fixed",
            "move_cursor;Yumemi_Boss",
            "add_portrait;Yumemi;Left",
            "disp_cursor;t",
            "wait;500",
            "disp_cursor;f",
            "speak;Yumemi;Heheh...it's my time to shine! You may have defeated my student...but I'm something else!",
            "remove_portrait;Yumemi",
            "move_cursor;Reimu",
            "disp_cursor;t",
            "wait;500",
            "disp_cursor;f",
            "add_portrait;Reimu;Right",
            "speak;Reimu;Nggh...Who are you? Why am I so... lightheaded?",
            "multi_remove_portrait;Yumemi;Reimu",
            "for;VICTIMS;[x.nid for x in game.get_all_units()]",
            "give_skill;{VICTIMS};Friction_Shift;;no_banner",
            "endf",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('ChiyuriSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "6 SpellChiyuri"
    },
    {
        "name": "SpellYumemi",
        "trigger": "combat_end",
        "level_nid": "6",
        "condition": "game.check_dead(\"Yumemi_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;other_phase;Strawberry Crisis",
            "change_music;other_battle;Strawberry Crisis",
            "add_portrait;Yumemi;Left",
            "speak;;Mechanics Sign: Joule's Revelation;center;180;hint;;red;;;1;;;;;Warp",
            "speak;Yumemi;It's not over yet! I'll teach you that fundamental laws can't be overwritten!",
            "remove_portrait;Yumemi",
            "add_group;YumemiSpell;YumemiSpell;warp;push",
            "autolevel_to;Yumemi_Boss_1;15;fixed",
            "autolevel_to;Chiyuri_Boss_1;12;fixed",
            "move_cursor;Yumemi_Boss_1",
            "for;VICTIMS;[x.nid for x in game.get_all_units()]",
            "give_skill;{VICTIMS};Decreasing_Work_Efficiency;;no_banner",
            "endf",
            "end",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('YumemiSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "6 SpellYumemi"
    },
    {
        "name": "DefeatBoss",
        "trigger": "combat_end",
        "level_nid": "6",
        "condition": "game.check_dead(\"Yumemi_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "6 DefeatBoss"
    },
    {
        "name": "FightYumemi",
        "trigger": "combat_start",
        "level_nid": "6",
        "condition": "unit.nid == \"Yumemi_Boss\" or unit2.nid == \"Yumemi_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Strawberry Crisis",
            "add_portrait;Yumemi;Left",
            "expression;Yumemi;Smile",
            "speak;Yumemi;Hmmhmm~. So many specimans to study!|I guess I'll start with you~.",
            "remove_portrait;Yumemi",
            "show_combat_ui"
        ],
        "nid": "6 FightYumemi"
    },
    {
        "name": "FightChiyuri",
        "trigger": "combat_start",
        "level_nid": "6",
        "condition": "unit1.nid == \"Chiyuri_Boss\" or unit2.nid == \"Chiyuri_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Strawberry Crisis",
            "add_portrait;Chiyuri;Left",
            "speak;Chiyuri;Hmph. I may be rusty, but if it's a fight you want,|it's a fight you'll get!",
            "remove_portrait;Chiyuri",
            "show_combat_ui"
        ],
        "nid": "6 FightChiyuri"
    },
    {
        "name": "FightChiyuriMusic",
        "trigger": "combat_start",
        "level_nid": "6",
        "condition": "unit1.nid == \"Chiyuri_Boss\" or unit2.nid == \"Chiyuri_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Strawberry Crisis;FadeIn=50",
            "wait;452"
        ],
        "nid": "6 FightChiyuriMusic"
    },
    {
        "name": "Turn5",
        "trigger": "turn_change",
        "level_nid": "8",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;23,25",
            "add_group;Sakuya;Sakuya;warp",
            "autolevel_to;Sakuya;12;fixed",
            "move_cursor;Sakuya",
            "flicker_cursor;Sakuya",
            "add_portrait;Sakuya;Right",
            "speak;Sakuya;Hm, I seem to have finally caught up to Lady Remilia's location. My search is almost done.",
            "remove_portrait;Sakuya"
        ],
        "nid": "8 Turn5"
    },
    {
        "name": "RemiliaSakuya",
        "trigger": "on_talk",
        "level_nid": "8",
        "condition": "unit.nid == 'Remilia' and unit2.nid == 'Sakuya'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "add_portrait;Remilia;Right",
            "add_portrait;Sakuya;Left",
            "speak;Remilia;Ah! Sakuya?! How did you get here?",
            "speak;Sakuya;Milady, you disappered without notifying me. That is cause for concern.",
            "speak;Remilia;Eh? I was just at Reimu's.",
            "speak;Sakuya;Odd for you to leave the mansion with such enthusiasm.",
            "speak;Remilia;I just wanted to have a little fun. You should join us.",
            "speak;Sakuya;Milady, I think it would be better if-",
            "speak;Remilia;Nuh uh. Come along. That's an order.",
            "speak;Sakuya;Oh well...",
            "multi_remove_portrait;Sakuya;Remilia",
            "change_team;Sakuya;player",
            "music_fade_back"
        ],
        "nid": "8 RemiliaSakuya"
    },
    {
        "name": "Turn11",
        "trigger": "turn_change",
        "level_nid": "8",
        "condition": "game.turncount == 11",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Rein2;Rein2;fade;closest",
            "move_cursor;23,1",
            "wait;750"
        ],
        "nid": "8 Turn11"
    },
    {
        "name": "Turn13",
        "trigger": "turn_change",
        "level_nid": "8",
        "condition": "game.turncount == 13",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Reimu;Right",
            "add_portrait;Kasen;Left",
            "speak;Kasen;Oh right. There seem to be bandits of extreme combat prowess lurking this area.",
            "speak;Reimu;And you couldn't have told us earlier?",
            "speak;Kasen;They aren't here yet...but I don't think it would hurt to finish our business here quickly.",
            "remove_portrait;Reimu",
            "remove_portrait;Kasen"
        ],
        "nid": "8 Turn13"
    },
    {
        "name": "Turn15",
        "trigger": "turn_change",
        "level_nid": "8",
        "condition": "game.turncount == 15",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;HurryUp;HurryUp;fade;push",
            "move_cursor;139",
            "flicker_cursor;139",
            "move_cursor;140",
            "flicker_cursor;140"
        ],
        "nid": "8 Turn15"
    },
    {
        "name": "Destructible1",
        "trigger": "Destructible",
        "level_nid": "8",
        "condition": "region.nid == 'Destructible1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "flicker_cursor;15,19",
            "show_layer;Destroyed1",
            "wait;500"
        ],
        "nid": "8 Destructible1"
    },
    {
        "name": "Destructible2",
        "trigger": "Destructible",
        "level_nid": "8",
        "condition": "region.nid == 'Destructible2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "flicker_cursor;15,19",
            "show_layer;Destroyed2",
            "wait;500"
        ],
        "nid": "8 Destructible2"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "10",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Housekeeping3",
            "trigger_script;Housekeeping1",
            "trigger_script;Housekeeping2",
            "autolevel_to;Mai_Boss;17",
            "autolevel_to;Yumeko_Boss;17",
            "autolevel_to;Alice_Boss;17",
            "trigger_script;START",
            "",
            "",
            "transition;close",
            "# For the cutscene later",
            "make_generic;A;Puppeteer;1;player",
            "make_generic;B;Veteran_A;1;player",
            "make_generic;C;Druid;1;player",
            "",
            "music;Deep Mountain",
            "change_background",
            "add_unit;A;1,8",
            "add_unit;B;2,6",
            "add_unit;C;4,10",
            "center_cursor;3,9",
            "wait;100",
            "transition;open",
            "",
            "location_card;Netherworld Outskirts",
            "wait;1000",
            "center_cursor;Marisa",
            "disp_cursor;t",
            "wait;1000",
            "disp_cursor;f",
            "multi_add_portrait;Marisa;CenterRight;Reimu;CenterLeft;Kasen;FarLeft",
            "",
            "speak;Marisa;Hmm, I don't remember snow being here.",
            "speak;Reimu;Do you think somebody stole spring again?",
            "speak;Marisa;Maybe it was more than spring this time. I'm freezin'!",
            "bop_portrait;Reimu",
            "speak;Reimu;Y-you're one to talk!",
            "speak;Marisa;It was definitely a good day for hot pot then.",
            "speak;Reimu;I'm still not a fan of mushrooms.",
            "speak;Kasen;I concur as well.",
            "speak;Marisa;I wonder who's making it snow this time though.",
            "speak;Reimu;Do you think it's the ghost or the celestial?",
            "add_portrait;Mima;FarRight",
            "speak;Mima;If I can butt in, I'd bet neither.",
            "speak;Marisa;Huh? What makes ya' say that?",
            "speak;Mima;Look over there: a snow angel!",
            "",
            "",
            "multi_remove_portrait;Marisa;Reimu;Kasen;Mima",
            "",
            "center_cursor;Mai_Boss",
            "disp_cursor;t",
            "wait;1000",
            "disp_cursor;f",
            "",
            "multi_add_portrait;Mai;CenterLeft;Yumeko;CenterRight",
            "",
            "speak;Yumeko;Alright, witch. Your job is simple: keep the enemy at bay for as long as possible.",
            "speak;Mai;...;;;;no_talk",
            "speak;Yumeko;Hmm, you don't seem to speak much, do you?",
            "speak;Mai;*Shrugs*;;;;no_talk",
            "speak;Yumeko;...I'll just take that as a positive.|I'll be sure the master compensates you properly after this battle.",
            "speak;Mai;...;;;;no_talk",
            "speak;Yumeko;...Alright then, now I must go back and guard the young master.|I wish you the best.",
            "multi_remove_portrait;Mai;Yumeko",
            "move_unit;Yumeko_Boss;33,9;normal;;no_follow",
            "wait;1000",
            "add_portrait;Mai;CenterLeft",
            "speak;Mai;So annoying...",
            "remove_portrait;Mai",
            "",
            "",
            "",
            "",
            "",
            "center_cursor;Marisa",
            "wait;500",
            "",
            "",
            "multi_add_portrait;Marisa;CenterRight;Reimu;CenterLeft;Kasen;FarLeft",
            "",
            "speak;Marisa;For a snow angel, she doesn't look too happy.",
            "speak;Kasen;I think you're thinking of snowmen.",
            "speak;Reimu;Brr. I just got a chill.",
            "speak;Marisa;Ya' don't say.",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "multi_add_portrait;Marisa;CenterRight;Reimu;CenterLeft;Kasen;FarLeft",
            "",
            "",
            "",
            "add_talk;Rin;201",
            "prep;1;Sealed Gods",
            "speak;;This map's clear bonus is 1000 Bonus EXP, but you won't get a single point if you go over 20 turns!;;;hint",
            "speak;;Oh, and just to let you know, Alice isn't a patient person! She'll leave in 15 turns if you're just too slow!;;;hint"
        ],
        "nid": "10 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "10",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 20",
            "give_bexp;500",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 20 and game.turncount <= 25",
            "give_bexp;{e:500 - ((game.turncount - 20) * 100)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 25",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "if;game.check_alive('Narumi') and game.get_unit('Narumi').team == 'player'",
            "add_portrait;Marisa;Left",
            "speak;Marisa;bruh",
            "else",
            "end",
            "trigger_script;ENDING",
            "game_var;chaptercount;10",
            "set_next_chapter;Base"
        ],
        "nid": "10 Outro"
    },
    {
        "name": "AliceLeaves",
        "trigger": "turn_change",
        "level_nid": "10",
        "condition": "game.turncount == 15",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;Alice_Boss",
            "add_portrait;PC-98 Alice;Left",
            "speak;PC-98 Alice;I tire of this farce! I'm leaving!",
            "remove_portrait;PC-98 Alice",
            "remove_unit;Alice_Boss;warp"
        ],
        "nid": "10 AliceLeaves"
    },
    {
        "name": "Chest1",
        "trigger": "Chest",
        "level_nid": "10",
        "condition": "region.nid == 'Chest_1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Lancereaver",
            "has_finished;{unit}"
        ],
        "nid": "10 Chest1"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "10",
        "condition": "region.nid == 'Chest_2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest2",
            "give_item;{unit};Yukkuri_M",
            "has_finished;{unit}"
        ],
        "nid": "10 Chest2"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "10",
        "condition": "region.nid == 'Chest_3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest3",
            "give_item;{unit};Reginleif",
            "has_finished;{unit}"
        ],
        "nid": "10 Chest3"
    },
    {
        "name": "House1",
        "trigger": "Visit",
        "level_nid": "10",
        "condition": "region.nid == 'House_1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;House",
            "transition;Open",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_item;{unit};Mire",
            "give_bexp;30;no_banner",
            "show_layer;House1",
            "has_traded;{unit}"
        ],
        "nid": "10 House1"
    },
    {
        "name": "Escape",
        "trigger": "Escape",
        "level_nid": "10",
        "condition": "region.nid == 'Escape'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_unit;{unit}",
            "wait;400",
            "if;not any(unit.team == 'player' for unit in game.units if unit.position)",
            "    win_game",
            "end"
        ],
        "nid": "10 Escape"
    },
    {
        "name": "Turn1",
        "trigger": "turn_change",
        "level_nid": "10",
        "condition": "game.turncount == 1 and game.check_alive(\"Remilia\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Remilia') and u('Remilia').position",
            "change_team;Koakuma;player",
            "move_cursor;1,10",
            "add_unit;Koakuma;0,9;Warp",
            "move_unit;Koakuma;4,11",
            "autolevel_to;Koakuma;9",
            "end"
        ],
        "nid": "10 Turn1"
    },
    {
        "name": "New Event",
        "trigger": "combat_start",
        "level_nid": "DEBUG_1",
        "condition": "check_default('Sekibanki_Boss', [])",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Dullahan Under the Willows",
            "add_portrait;Wakasagihime;Left",
            "speak;Wakasagihime;Just because you're above the water doesn't mean you're safe from it!",
            "remove_portrait;Wakasagihime"
        ],
        "nid": "DEBUG_1 New Event"
    },
    {
        "name": "New Event_1",
        "trigger": "unit_death",
        "level_nid": "DEBUG_1",
        "condition": "unit.nid == \"Sekibanki_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Dullahan Under the Willows",
            "add_portrait;Wakasagihime;Left",
            "speak;Wakasagihime;Sunk to the bottom...",
            "expression;Wakasagihime;CloseEyes",
            "remove_portrait;Wakasagihime"
        ],
        "nid": "DEBUG_1 New Event_1"
    },
    {
        "name": "New Event_2",
        "trigger": null,
        "level_nid": "DEBUG_1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "DEBUG_1 New Event_2"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "11",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Housekeeping3",
            "trigger_script;Housekeeping1",
            "trigger_script;Housekeeping2",
            "autolevel_to;Mamizou_Boss;18",
            "autolevel_to;Alice_Boss_3;18",
            "trigger_script;START",
            "prep;1;Sealed Gods",
            "speak;;This map's clear bonus is 1000 Bonus EXP, but you won't get a single point if you go over 15 turns!;;;hint"
        ],
        "nid": "11 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "11",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 15",
            "give_bexp;500",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "trigger_script;ENDING",
            "game_var;chaptercount;11",
            "set_next_chapter;Base",
            ""
        ],
        "nid": "11 Outro"
    },
    {
        "name": "Turn6",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 6",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "add_portrait;Kasen;CenterRight",
            "speak;Kasen;I have a bad feeling that we're going to be stumbling in the dark soon...",
            "remove_portrait;Kasen"
        ],
        "nid": "5 Turn6"
    },
    {
        "name": "Turn8",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 8",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "set_fog_of_war;gba;7;7;7",
            "enable_fog_of_war;t"
        ],
        "nid": "5 Turn8"
    },
    {
        "name": "Are you ready?",
        "trigger": null,
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;Readiness;Are you ready?;Yes,No",
            "if;'{v:Readiness}' == 'Yes'",
            "else",
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;Bruh",
            "main_menu",
            "end"
        ],
        "nid": "0 Are you ready?"
    },
    {
        "name": "Guide",
        "trigger": null,
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;Perfect. Let us begin.",
            "speak;Patchouli;Question one. What is the definition of a guide?",
            "choice;Q1;What is the definition of a guide?;Something that is to be ignored.,Something that helps you learn something.,Cheeseburgers.",
            "if;'{v:Q1}' == 'Something that helps you learn something.'",
            "else",
            "speak;Patchouli;Bruh",
            "main_menu",
            "end"
        ],
        "nid": "0 Guide"
    },
    {
        "name": "Math1",
        "trigger": null,
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;Excellent. Your cognitive skills are at least of a 9-year old human child. ",
            "speak;Patchouli;On a side note, it may help to read the guide provided for you.",
            "speak;Patchouli;Question two. What does it mean when someone tells you to \"Do the math\"?",
            "choice;Q2;What does it mean to \"Do the math\"?;Perform calculations.,Ignore the asker.,Sniff your own ass.",
            "if;'{v:Q2}' == 'Perform calculations.'",
            "else",
            "speak;Patchouli;Bruh",
            "main_menu",
            "end"
        ],
        "nid": "0 Math1"
    },
    {
        "name": "Reading",
        "trigger": null,
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;At least you understand that you must comprehend the symbols on your screen.",
            "speak;Patchouli;It may help your case to be decent at math.",
            "speak;Patchouli;Question three. When you are given words to understand, what skill do you use?",
            "choice;Q3;Skill to understand words?;War crimes.,Complaining about graphics.,Reading.",
            "if;'{v:Q3}' == 'Reading.'",
            "else",
            "speak;Patchouli;Bruh",
            "main_menu",
            "end"
        ],
        "nid": "0 Reading"
    },
    {
        "name": "MathTest1",
        "trigger": null,
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;Excellent, you at least understand that you must read.",
            "speak;Patchouli;I sincerely hope you remember that.",
            "speak;Patchouli;I believe that is enough for you to pass the reading portion of the test. ",
            "speak;Patchouli;Let us now progress to the mathematics portion.",
            "speak;Patchouli;Question four. What is 2 + 5?",
            "choice;Q4;2 + 5?;7.,3.,Cassava.",
            "if;'{v:Q4}' == '7.'",
            "else",
            "speak;Patchouli;Bruh",
            "main_menu",
            "end"
        ],
        "nid": "0 MathTest1"
    },
    {
        "name": "MathTest2",
        "trigger": null,
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;Excellent, you are now just as smart as a six year old in math.",
            "speak;Patchouli;Question five. What is 4 x 7?",
            "choice;Q5;4 x 7?;47.,28.,Avogadro's Number.",
            "if;'{v:Q5}' == '28.'",
            "else",
            "speak;Patchouli;Bruh",
            "main_menu",
            "end"
        ],
        "nid": "0 MathTest2"
    },
    {
        "name": "MathTest3",
        "trigger": null,
        "level_nid": "0",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Patchouli;Left",
            "speak;Patchouli;You can do multiplication, at least in theory. ",
            "speak;Patchouli;I can't say the same about your prospects with multiplication in other fields.",
            "speak;Patchouli;Final question. What is 5(3 + 4) x 7?",
            "choice;Q6;5(3 + 4) x 7?;87.,245.,265.",
            "if;'{v:Q6}' == '245.'",
            "else",
            "speak;Patchouli;Bruh",
            "main_menu",
            "end"
        ],
        "nid": "0 MathTest3"
    },
    {
        "name": "AliceDeathPC98",
        "trigger": "unit_death",
        "level_nid": "10",
        "condition": "unit.nid == 'Alice_Boss'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "10 AliceDeathPC98"
    },
    {
        "name": "FightAlice",
        "trigger": "combat_start",
        "level_nid": "10",
        "condition": "unit.nid == \"Alice_Boss\" or unit2.nid == \"Alice_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "10 FightAlice"
    },
    {
        "name": "FightMai",
        "trigger": "combat_start",
        "level_nid": "10",
        "condition": "unit.nid == \"Mai_Boss\" or unit2.nid == \"Mai_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "10 FightMai"
    },
    {
        "name": "FightYumeko",
        "trigger": "combat_start",
        "level_nid": "10",
        "condition": "unit.nid == \"Yumeko_Boss\" or unit2.nid == \"Yumeko_Boss\"",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "10 FightYumeko"
    },
    {
        "name": "MaiDeath",
        "trigger": "unit_death",
        "level_nid": "10",
        "condition": "unit.nid == 'Mai_Boss'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_bexp;200;Reimu",
            "wait;1000",
            "remove_weather;snow",
            "remove_weather;night",
            "wait;1000"
        ],
        "nid": "10 MaiDeath"
    },
    {
        "name": "YumekoDeath",
        "trigger": "unit_death",
        "level_nid": "10",
        "condition": "unit.nid == 'Yumeko_Boss'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "10 YumekoDeath"
    },
    {
        "name": "DeathAlice2",
        "trigger": "unit_death",
        "level_nid": "11",
        "condition": "unit.nid == 'Alice_Boss_2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "11 DeathAlice2"
    },
    {
        "name": "DefeatBoss",
        "trigger": "combat_end",
        "level_nid": "11",
        "condition": "game.check_dead(\"Alice_Boss_4\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "11 DefeatBoss"
    },
    {
        "name": "DeathMamizou",
        "trigger": "unit_death",
        "level_nid": "11",
        "condition": "unit.nid == 'Mamizou_Boss'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "11 DeathMamizou"
    },
    {
        "name": "FightAlice2",
        "trigger": "combat_start",
        "level_nid": "11",
        "condition": "unit.nid == \"Alice_Boss_3\" or unit2.nid == \"Alice_Boss_3\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "11 FightAlice2"
    },
    {
        "name": "FightMamizou",
        "trigger": "combat_start",
        "level_nid": "11",
        "condition": "unit.nid == \"Mamizou_Boss\" or unit2.nid == \"Mamizou_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "11 FightMamizou"
    },
    {
        "name": "House",
        "trigger": "Visit",
        "level_nid": "11",
        "condition": "region.nid == 'House'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;Rural Town",
            "transition;Open",
            "transition;Close",
            "change_background",
            "transition;Open",
            "give_money;5000;Reimu",
            "give_bexp;30;no_banner",
            "show_layer;House",
            "has_traded;{unit}"
        ],
        "nid": "11 House"
    },
    {
        "name": "Per4Rein",
        "trigger": "turn_change",
        "level_nid": "11",
        "condition": "game.turncount % 4 == 2 and game.turncount >= 10",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Lance_Rider;11;enemy;Pursue;Insurgents;;Steel_Lance",
            "add_unit;{created_unit};2,19;warp;closest",
            "make_generic;;Axe_Rider;11;enemy;Pursue;Insurgents;;Steel_Axe",
            "add_unit;{created_unit};3,19;warp;closest",
            "move_cursor;{created_unit}"
        ],
        "nid": "11 Per4Rein"
    },
    {
        "name": "Turn5Rein",
        "trigger": "turn_change",
        "level_nid": "11",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn5Rein;Turn5Rein;warp;closest",
            "move_cursor;145"
        ],
        "nid": "11 Turn5Rein"
    },
    {
        "name": "Rout",
        "trigger": "combat_end",
        "level_nid": "11",
        "condition": "len(game.get_enemy_units()) == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "win_game",
            ""
        ],
        "nid": "11 Rout"
    },
    {
        "name": "Puppet Assault",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Alice') and u('Alice').position",
            "game_var;AlicePosition;u('Alice').position",
            "game_var;AliceLevel;u('Alice').level",
            "change_party;Shanghai;Reimu",
            "change_party;Hourai;Reimu",
            "load_unit;Shanghai;player",
            "load_unit;Hourai;player",
            "add_unit;Shanghai;{v:AlicePosition};warp;closest",
            "add_unit;Hourai;{v:AlicePosition};warp;closest",
            "autolevel_to;Shanghai;{v:AliceLevel}",
            "autolevel_to;Hourai;{v:AliceLevel}",
            "end"
        ],
        "nid": "Global Puppet Assault"
    },
    {
        "name": "Puppet Assault_1",
        "trigger": "level_end",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_party;Shanghai;Dumpster",
            "change_party;Hourai;Dumpster"
        ],
        "nid": "Global Puppet Assault_1"
    },
    {
        "name": "Apparitions That Stalk The Night",
        "trigger": null,
        "level_nid": null,
        "condition": "has_skill(unit, 'Apparitions_That_Stalk_The_Night')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;{unit};Right",
            "speak;{unit};Taste the night!",
            "set_fog_of_war;thracia;1;1;1",
            "enable_fog_of_war;t",
            "give_skill;{unit};Night_Hunter;no_banner",
            "level_var;Darkness;1"
        ],
        "nid": "Global Apparitions That Stalk The Night"
    },
    {
        "name": "Apparitions That Stalk The Night_End",
        "trigger": "level_end",
        "level_nid": null,
        "condition": "has_skill(unit, 'Apparitions_That_Stalk_The_Night')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;{unit};Night_Hunter;no_banner"
        ],
        "nid": "Global Apparitions That Stalk The Night_End"
    },
    {
        "name": "BaseKosuzu",
        "trigger": "on_base_convo",
        "level_nid": null,
        "condition": "unit == 'Kosuzu'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "music;Comrades",
            "load_unit;Kosuzu",
            "add_portrait;Kosuzu;Left",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;FarRight",
            "speak;Kosuzu;Hello again, Reimu! And uh...",
            "speak;Kasen;Kasen. Nice to meet you.",
            "speak;Kosuzu;Uh, yeah, nice to meet you too!",
            "speak;Reimu;Shouldn't you be back at the base right now?",
            "speak;Kosuzu;Well, with the village under attack, I have to do whatever I can to help.",
            "speak;Reimu;No offense, Kosuzu, but I wouldn't exactly call you a fighter.",
            "speak;Kosuzu;Hey now, I think I can handle my own. Besides, I brought these youma scrolls with me to help-",
            "speak;Kasen;Youma scrolls?! ",
            "speak;Reimu;Hey! Haven't we taught you that those are dangerous?! What are you doing carrying|those around?!",
            "speak;Kosuzu;I can manage them! Trust me!",
            "speak;Reimu;*sigh* Hand them over.",
            "speak;Kosuzu;H-hey! These are Suzunaan property! Hands off! Look, I can even cast them properly!",
            "sound;Bolting2",
            "speak;Kasen;...",
            "speak;Reimu;...",
            "speak;Kosuzu;See? I just blasted a hole in that wall!",
            "speak;Reimu;This could be an asset...",
            "speak;Kasen;Reimu! We're not letting a child play with these things!",
            "speak;Reimu;Look, if we keep her under supervision and she promises not to overexert herself, we'll|be fine!",
            "speak;Kosuzu;Pleeeease?",
            "speak;Kasen;I don't trust that, but fine. However, I'm setting strict limits on the usage of these.",
            "speak;Kosuzu;Hooray! (Finally, an easy way to get my hands on more youma books!)",
            "speak;Kasen;What was that?",
            "speak;Kosuzu;Uhh, nothing!",
            "multi_remove_portrait;Reimu;Kasen;Kosuzu",
            "sound;Item",
            "alert;Kosuzu joined the party!",
            "give_bexp;25;no_banner",
            "transition;close",
            "change_background",
            "remove_base_convo;Kosuzu",
            "game_var;baseconvolist;[x for x in v('baseconvolist') if not x == 'Kosuzu']",
            "add_lore;Kosuzu",
            "transition;open"
        ],
        "nid": "Global BaseKosuzu"
    },
    {
        "name": "BaseRinnosuke",
        "trigger": "on_base_convo",
        "level_nid": null,
        "condition": "unit == 'Rinnosuke'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "music;Comrades",
            "load_unit;Rinnosuke",
            "autolevel_to;Rinnosuke;4;fixed",
            "add_portrait;Rinnosuke;Left",
            "add_portrait;Marisa;Right;ExpressionList=Smile",
            "speak;Marisa;Heyyyy, Kourin!",
            "speak;Rinnosuke;Hm? Marisa? What is it?",
            "speak;Marisa;Y'know, we're running short on people to be on the battlefield...so...",
            "speak;Rinnosuke;I am hardly built for combat, Marisa, you should know this.",
            "speak;Marisa;Bah, but you even have that awesome sword with you! That Kusanagi whatchamacalit!",
            "speak;Rinnosuke;Pretty sure this thing couldn't swat a fly if I tried.",
            "speak;Marisa;Y'never know until y'give it a shot!",
            "speak;Rinnosuke;Fine, but don't expect any decent results.",
            "multi_remove_portrait;Marisa;Rinnosuke",
            "sound;Item",
            "alert;Rinnosuke joined the party!",
            "give_bexp;25;no_banner",
            "transition;close",
            "change_background",
            "remove_base_convo;Rinnosuke",
            "game_var;baseconvolist;[x for x in v('baseconvolist') if not x == 'Rinnosuke']",
            "add_lore;Rinnosuke",
            "game_var;KusanagiKills;0",
            "transition;open"
        ],
        "nid": "Global BaseRinnosuke"
    },
    {
        "name": "Bloodlust",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "item1.nid == 'Gungnir'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2.get_hp() == 0 and has_skill(unit2, 'Bleeding') and not has_skill(unit1, 'Cooldown') ",
            "add_portrait;Remilia;Right",
            "speak;Remilia;MORE! I NEED MORE!",
            "remove_portrait;Remilia",
            "sound;RefreshDance",
            "give_skill;{unit};Cooldown;;no_banner",
            "reset;{unit}",
            "else",
            "end"
        ],
        "nid": "Global Bloodlust"
    },
    {
        "name": "JackTheRipper",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "has_skill(unit, 'Jack_The_Ripper')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;not has_skill(unit1, 'Cooldown') and unit2.get_hp() == 0 and has_skill(unit1, 'Luna_Dial')",
            "add_portrait;{unit};Right;ExpressionList=Smile",
            "speak;{unit};ZA...WARUDO!",
            "remove_portrait;{unit}",
            "sound;RefreshDance",
            "give_skill;{unit};Cooldown;;no_banner",
            "reset;{unit}",
            "else",
            "end"
        ],
        "nid": "Global JackTheRipper"
    },
    {
        "name": "BullshitRinEvent",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;RinClass;game.get_random_choice(['Bigle','Demon','Lycanthrope','Revenant','Centaur','Ronin','Skeleton','Skeleton_B','Grave_Rider','Thief','Miko_R','Witch','Lodestar_L','Lodestar_S','Lodestar_B','Fencer','Fencer_R','Vagrant_S','Vagrant_A','Lancer','Lancer_R','Fighter','Brigand','Pirate','Archer','Archer_R','Outlaw','Guard','Kappa_Mech','Lance_Rider','Axe_Rider','Sword_Rider','Bow_Rider','Mage','Mage_M','Acolyte','Acolyte_N','Shaman','Shaman_S','Peg_Rider','Peg_Rider_K','Dracorider','Tengu','Mermaid','Cursed_Armor','Mage_B','Fencer_Y'])",
            "promote;Rin;{v:RinClass};silent",
            "change_portrait;Rin;Rin{v:RinClass}",
            "        level_var;rin_hp;game.get_random(15,22)",
            "        level_var;rin_hp_growth;20 + game.get_random(30,90)",
            "        level_var;rin_str;game.get_random(4,9)",
            "        level_var;rin_str_growth;20 + game.get_random(5,55)",
            "        level_var;rin_mag;game.get_random(4,9)",
            "        level_var;rin_mag_growth;20 + game.get_random(5,55)",
            "        level_var;rin_skl;game.get_random(4,9)",
            "        level_var;rin_skl_growth;20 + game.get_random(5,55)",
            "        level_var;rin_spd;game.get_random(4,9)",
            "        level_var;rin_spd_growth;10 + game.get_random(5,65)",
            "        level_var;rin_lck;game.get_random(0,9)",
            "        level_var;rin_lck_growth;game.get_random(0,100)",
            "        level_var;rin_def;game.get_random(4,9)",
            "        level_var;rin_def_growth;10 + game.get_random(5,50)",
            "        level_var;rin_res;game.get_random(4,9)",
            "        level_var;rin_res_growth;10 + game.get_random(5,50)",
            "set_growths;Rin;HP,{v:rin_hp_growth},STR,{v:rin_str_growth},MAG,{v:rin_mag_growth},SKL,{v:rin_skl_growth},SPD,{v:rin_spd_growth},LCK,{v:rin_lck_growth},DEF,{v:rin_def_growth},RES,{v:rin_res_growth}",
            "set_stats;Rin;HP,{v:rin_hp},STR,{v:rin_str},MAG,{v:rin_mag},SKL,{v:rin_skl},SPD,{v:rin_spd},LCK,{v:rin_lck},DEF,{v:rin_def},RES,{v:rin_res};immediate",
            "game_var;RinCombatArt;game.get_random_choice(['Mercy_Art','Homing_Shot','Star_Laser','Bloodsucker','Wolf_Fang','Canine_Dash','Flood_of_Frost','Apparitions_That_Stalk_The_Night','Shattering_Moon','Infest','Phoenix_Crash','Lunatic_Red_Eyes','Bangasa_Bombing_Run', 'Perfect_Freeze_Art'])",
            "give_skill;Rin;{v:RinCombatArt};;no_banner",
            "game_var;RinPassive;game.get_random_choice(['Pivot','Taskmaster','Natural_Talent','Head_Distraction','Swift_Hunter','Magical_Might','Knowledge_is_Power','In_An_Instant','Master_Pharmacist','Searchlight','Prism_Camouflage','Interfering_Waves','Haphazard_Smash','Portal_Combat','Mogu_Mogu','The_Strongest','Nature_Power','Super_Luck','Great_Fortune','Optimism','Forgemaster','Sniper','Sharpshooter','Zip_Bomb','String_Commander','Yataderas_Gift','Dewdrop_Barrier','Capricious_Cheerleader','Flighty_Helper','Bumbling_Dodge','Bloodlust','Salvation','Density','Illuminate', 'Revelry Tuning', 'Fugue Tuning', 'Requiem Tuning', 'ACT_the_FOOL', 'Doll_Coordination', 'Doll_Coordination_1'])",
            "give_skill;Rin;{v:RinPassive};;no_banner",
            "if;'Sword' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Iron_Sword;no_banner",
            "else",
            "end",
            "if;'Lance' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Iron_Lance;no_banner",
            "else",
            "end",
            "if;'Axe' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Iron_Axe;no_banner",
            "else",
            "end",
            "if;'Bow' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Iron_Bow;no_banner",
            "else",
            "end",
            "if;'Staff' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Heal;no_banner",
            "else",
            "end",
            "if;'Anima' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Fire;no_banner",
            "else",
            "end",
            "if;'Light' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Ofuda;no_banner",
            "else",
            "end",
            "if;'Dark' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Flux;no_banner",
            "else",
            "end",
            "if;'Martial' in unit_funcs.usable_wtypes(u('Rin'))",
            "give_item;Rin;Razor_Claw;no_banner",
            "else",
            "end",
            "if;v('Fire')",
            "change_affinity;Rin;Fire",
            "elif;v('Thunder')",
            "change_affinity;Rin;Thunder",
            "elif;v('Wind')",
            "change_affinity;Rin;Wind",
            "elif;v('Ice')",
            "change_affinity;Rin;Ice",
            "elif;v('Anima')",
            "change_affinity;Rin;Anima",
            "elif;v('Light')",
            "change_affinity;Rin;Light",
            "elif;v('Dark')",
            "change_affinity;Rin;Dark",
            "else",
            "end"
        ],
        "nid": "Global BullshitRinEvent"
    },
    {
        "name": "ConfirmMercHire",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('{d:MercenaryHiringList.{v:MercenaryHireChoice}.nid}') in game.get_all_units_in_party()",
            "    add_portrait;Reimu;FarRight",
            "    speak;Reimu;Idiot. You can't hire the same person twice.",
            "    finish",
            "end",
            "if;game.get_money() < int({d:MercenaryHiringList.{v:MercenaryHireChoice}.Cost})",
            "        add_portrait;Reimu;FarRight",
            "        speak;Reimu;Damn, we really are poor.",
            "        finish",
            "    end",
            "choice;Confirmation;You sure?;Yes,No",
            "if;'{v:Confirmation}' == 'Yes'",
            "    alert;You hired {d:MercenaryHiringList.{v:MercenaryHireChoice}.Name}.",
            "    give_money;{eval: -1 * int({d:MercenaryHiringList.{v:MercenaryHireChoice}.Cost})};no_banner",
            "    load_unit;{v:MercenaryHireChoice};player",
            "    autolevel_to;{v:MercenaryHireChoice};{e:{v:chaptercount} + 1};Fixed",
            "    give_wexp;{v:MercenaryHireChoice};Sword;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Lance;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Axe;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Bow;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Light;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Dark;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Martial;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Anima;{e:{v:chaptercount} * 4};no_banner",
            "    give_wexp;{v:MercenaryHireChoice};Staff;{e:{v:chaptercount} * 4};no_banner",
            "    add_lore;{v:MercenaryHireChoice}",
            "    game_var;hireable_guys;[x for x in v('hireable_guys') if not x == '{d:MercenaryHiringList.{v:MercenaryHireChoice}.Name}']",
            "    if;v('MercenaryHireChoice') == 'Rin'",
            "        trigger_script;Global BullshitRinEvent",
            "    end",
            "    if;v('hireable_guys')",
            "        unchoice",
            "    end",
            "end"
        ],
        "nid": "Global ConfirmMercHire"
    },
    {
        "name": "ConfirmSpecialOrder",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;Confirmation;You sure?;Yes,No",
            "if;'{v:Confirmation}' == 'Yes'",
            "    game_var;special_orders;[x for x in v('special_orders') if not x == '{d:SpecialOrders.{v:SpecialOrdersChoice}.Name}']",
            "    set_next_chapter;{d:SpecialOrders.{v:SpecialOrdersChoice}.nid}",
            "    win_game",
            "    end",
            "    if;v('special_orders')",
            "        unchoice",
            "    end",
            "end"
        ],
        "nid": "Global ConfirmSpecialOrder"
    },
    {
        "name": "DeathAunn",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Aunn'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Aunn;FarRight",
            "speak;Aunn;I'm sorry, Ms. Reimu...",
            "expression;Aunn;CloseEyes",
            "remove_portrait;Aunn"
        ],
        "nid": "Global DeathAunn"
    },
    {
        "name": "DeathCirno",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Cirno'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Cirno;FarRight",
            "speak;Cirno;Gahh! I'm not having fun anymore! I'm supposed to be the strongest!",
            "expression;Cirno;CloseEyes",
            "remove_portrait;Cirno"
        ],
        "nid": "Global DeathCirno"
    },
    {
        "name": "DeathDaiyousei",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Daiyousei'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Daiyousei;FarRight",
            "speak;Daiyousei;Cirno?! Cirno, where are you?!",
            "expression;Daiyousei;CloseEyes",
            "remove_portrait;Daiyousei"
        ],
        "nid": "Global DeathDaiyousei"
    },
    {
        "name": "DeathKasen",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Kasen'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Kasen;FarRight",
            "speak;Kasen;I told you to be careful!",
            "expression;Kasen;CloseEyes",
            "remove_portrait;Kasen"
        ],
        "nid": "Global DeathKasen"
    },
    {
        "name": "DeathKokoro",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Kokoro'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Kokoro;FarRight",
            "speak;Kokoro;Ah! My masks! My masks are dropping all over the place!",
            "expression;Kokoro;CloseEyes",
            "remove_portrait;Kokoro"
        ],
        "nid": "Global DeathKokoro"
    },
    {
        "name": "DeathKosuzu",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Kosuzu'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Kosuzu;FarRight",
            "speak;Kosuzu;But I wanted to...find more books...",
            "expression;Kosuzu;CloseEyes",
            "remove_portrait;Kosuzu"
        ],
        "nid": "Global DeathKosuzu"
    },
    {
        "name": "DeathLetty",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Letty'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Letty;FarRight",
            "speak;Letty;It's getting way too heated! Not the place for me!",
            "expression;Letty;CloseEyes",
            "remove_portrait;Letty"
        ],
        "nid": "Global DeathLetty"
    },
    {
        "name": "DeathLuna",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Luna'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Luna;FarRight",
            "speak;Luna;Oh...fun time's over, I guess.",
            "expression;Luna;CloseEyes",
            "remove_portrait;Luna"
        ],
        "nid": "Global DeathLuna"
    },
    {
        "name": "DeathMarisa",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Marisa'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Marisa;FarRight",
            "music;In Sorrows Shroud",
            "speak;Marisa;Come on Marisa, you got through worse. Get up!",
            "expression;Marisa;CloseEyes",
            "remove_portrait;Marisa",
            "if;{v:_current_turnwheel_uses} > 0",
            "activate_turnwheel;t",
            "else",
            "lose_game",
            "end"
        ],
        "nid": "Global DeathMarisa"
    },
    {
        "name": "DeathMokou",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Mokou' and not has_skill(unit, 'Immortal_Red_Soul_1')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Mokou;FarRight",
            "speak;Mokou;To...the ashes...",
            "expression;Mokou;CloseEyes",
            "remove_portrait;Mokou"
        ],
        "nid": "Global DeathMokou"
    },
    {
        "name": "DeathMystia",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Mystia' and unit.team == 'Player'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Mystia;FarRight",
            "speak;Mystia;I'd rather not be attacked! Begone! I'm going!",
            "expression;Mystia;CloseEyes",
            "remove_portrait;Mystia"
        ],
        "nid": "Global DeathMystia"
    },
    {
        "name": "DeathMystiaEnemy",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Mystia' and unit.team == 'Enemy'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Mystia;FarLeft",
            "speak;Mystia;E-eek! Spare me...!",
            "expression;Mystia;CloseEyes",
            "remove_portrait;Mystia"
        ],
        "nid": "Global DeathMystiaEnemy"
    },
    {
        "name": "DeathReimu",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Reimu'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Reimu;FarRight",
            "music;In Sorrows Shroud",
            "speak;Reimu;Gah... Ow. This sucks.",
            "expression;Reimu;CloseEyes",
            "remove_portrait;Reimu",
            "remove_unit;Reimu",
            "if;{v:_current_turnwheel_uses} > 0",
            "activate_turnwheel;t",
            "else",
            "lose_game",
            "end"
        ],
        "nid": "Global DeathReimu"
    },
    {
        "name": "DeathRemilia",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Remilia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Remilia;FarRight",
            "speak;Remilia;Hmph! I'm leaving! How dare you leave me to be injured like that!",
            "expression;Remilia;CloseEyes",
            "remove_portrait;Remilia",
            ""
        ],
        "nid": "Global DeathRemilia"
    },
    {
        "name": "DeathRinnosuke",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Rinnosuke'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Rinnosuke;FarRight",
            "speak;Rinnosuke;You know, I'll just leave the fighting to the experts...",
            "expression;Rinnosuke;CloseEyes",
            "remove_portrait;Rinnosuke"
        ],
        "nid": "Global DeathRinnosuke"
    },
    {
        "name": "DeathRumia",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Rumia' and unit.team == 'Player'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Rumia;FarRight",
            "speak;Rumia;Time for a...nice...long...nap...",
            "expression;Rumia;CloseEyes",
            "remove_portrait;Rumia"
        ],
        "nid": "Global DeathRumia"
    },
    {
        "name": "DeathRumiaEnemy",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Rumia' and unit.team == 'Enemy'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Rumia;FarLeft",
            "speak;Rumia;Owie...! Run! Run!",
            "expression;Rumia;CloseEyes",
            "remove_portrait;Rumia"
        ],
        "nid": "Global DeathRumiaEnemy"
    },
    {
        "name": "DeathStar",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Star'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Star;FarRight",
            "speak;Star;Time to make a break for it! I needed to do other things anyway!",
            "expression;Star;CloseEyes",
            "remove_portrait;Star"
        ],
        "nid": "Global DeathStar"
    },
    {
        "name": "DeathSuika",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Suika'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Suika;FarRight",
            "speak;Suika;Aw man...the party ended...so soon...",
            "expression;Suika;CloseEyes",
            "remove_portrait;Suika"
        ],
        "nid": "Global DeathSuika"
    },
    {
        "name": "DeathSunny",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Sunny'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Sunny;FarRight",
            "speak;Sunny;Alright! Playtime's over! Getting outta here!",
            "expression;Sunny;CloseEyes",
            "remove_portrait;Sunny"
        ],
        "nid": "Global DeathSunny"
    },
    {
        "name": "DeathTokiko",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Tokiko'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Tokiko;FarRight",
            "speak;Tokiko;Gah! I was reading that!",
            "expression;Tokiko;CloseEyes",
            "remove_portrait;Tokiko"
        ],
        "nid": "Global DeathTokiko"
    },
    {
        "name": "DeathWriggle",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Wriggle' and unit.team == 'Player'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Wriggle;FarRight",
            "speak;Wriggle;You know, I think the power of insects won't solve this issue.",
            "expression;Wriggle;CloseEyes",
            "remove_portrait;Wriggle"
        ],
        "nid": "Global DeathWriggle"
    },
    {
        "name": "DeathWriggleEnemy",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Wriggle' and unit.team == 'Enemy'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Wriggle;FarLeft",
            "speak;Wriggle;Even with bugs on my side, I couldn't win...",
            "expression;Wriggle;CloseEyes",
            "remove_portrait;Wriggle"
        ],
        "nid": "Global DeathWriggleEnemy"
    },
    {
        "name": "Debug Setup",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "cf.SETTINGS['debug']",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# Give access to the convoy",
            "change_background;BlackBackground",
            "game_var;_convoy;True"
        ],
        "nid": "Global Debug Setup"
    },
    {
        "name": "Divine_Fortune",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2.get_hp() == 0 and game.get_random(1,100) <= unit.get_stat('LCK')",
            "    give_item;{unit};Ancient_Coin",
            "end"
        ],
        "nid": "Global Divine_Fortune"
    },
    {
        "name": "Flood_of_Frost",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_skill;{unit};Frost_Barrier"
        ],
        "nid": "Global Flood_of_Frost"
    },
    {
        "name": "Housekeeping1",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 1,
        "_source": [
            "game_var;_current_turnwheel_uses;3",
            "game_var;SoulCharge;0",
            "add_lore;Intro",
            "add_lore;Character_Stats",
            "add_lore;Prf_Weapons",
            "add_lore;Weapon_Stats_and_Tags",
            "add_lore;Weapon_Triangle",
            "add_lore;Effective_Damage",
            "add_lore;Movement_Types",
            "add_lore;Growths",
            "add_lore;Supports",
            "add_lore;Rescue",
            "add_lore;Combat_Arts",
            "add_lore;Stealing",
            "add_lore;Reimu",
            "trigger_script;FUCK YOU RAINLASH",
            "if;not v('hireable_guys') ",
            "game_var;hireable_guys;['Miki','Tomomi','Konami','Kabin','Yae','Amane']",
            "else",
            "end",
            "if;not v('special_orders')",
            "game_var;special_orders;['Eirin']",
            "else",
            "end"
        ],
        "nid": "Global Housekeeping1"
    },
    {
        "name": "Housekeeping2",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 1,
        "_source": [
            "for;baseconvo;v('baseconvolist')",
            "add_base_convo;{baseconvo}",
            "endf"
        ],
        "nid": "Global Housekeeping2"
    },
    {
        "name": "Housekeeping3",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 1,
        "_source": [
            "trigger_script;FUCK YOU RAINLASH",
            "if;not v('baseconvolist')",
            "    game_var;baseconvolist;[]",
            "end"
        ],
        "nid": "Global Housekeeping3"
    },
    {
        "name": "LethalLifeFlowCharge",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "set_skill_data;{unit};Lethal_Life_Flow;charge;{e:get_skill(unit, 'Lethal_Life_Flow').data.get('charge') + 1}"
        ],
        "nid": "Global LethalLifeFlowCharge"
    },
    {
        "name": "LunaDial",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_game_var;TimeToken;1"
        ],
        "nid": "Global LunaDial"
    },
    {
        "name": "LunaDialCharge",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "unit.nid == 'Sakuya'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:TimeToken} == 5",
            "add_portrait;Sakuya;Right",
            "speak;Sakuya;It's time! Luna Dial!",
            "give_skill;Sakuya;Jack_The_Ripper",
            "sound;RefreshDanceMap",
            "map_anim;OverchargeAura;Sakuya",
            "reset;Sakuya",
            "set_skill_data;{unit};Time_Token;{e:get_skill(unit, 'Time_Token').data.get('charge') + 1}",
            "else",
            "end"
        ],
        "nid": "Global LunaDialCharge"
    },
    {
        "name": "L Bozo",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Remilia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Rinnosuke;FarLeft",
            "speak;Rinnosuke;You have severed your tie with fate.",
            "expression;Rinnosuke;CloseEyes;Smile",
            "speak;Rinnosuke;Persist in this doomed timeline.",
            "game_var;_turnwheel;False"
        ],
        "nid": "Global L Bozo"
    },
    {
        "name": "Marisa_Growths",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;marisa_hp;0",
            "game_var;marisa_str;0",
            "game_var;marisa_mag;0",
            "game_var;marisa_skl;0",
            "game_var;marisa_skl;0",
            "game_var;marisa_lck;0",
            "game_var;marisa_def;0",
            "game_var;marisa_res;0",
            "game_var;marisa_con;0",
            "game_var;marisa_mov;0"
        ],
        "nid": "Global Marisa_Growths"
    },
    {
        "name": "Marisa_Kill",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            " if;unit2.get_hp() == 0",
            "inc_game_var;marisa_hp;game.get_random(1,3)",
            "inc_game_var;marisa_str;game.get_random(1,3)",
            "inc_game_var;marisa_mag;game.get_random(1,3)",
            "inc_game_var;marisa_skl;game.get_random(1,3)",
            "inc_game_var;marisa_spd;game.get_random(1,3)",
            "inc_game_var;marisa_lck;game.get_random(1,3)",
            "inc_game_var;marisa_def;game.get_random(1,3)",
            "inc_game_var;marisa_res;game.get_random(1,3)",
            "else",
            "end"
        ],
        "nid": "Global Marisa_Kill"
    },
    {
        "name": "Marisa_Level",
        "trigger": "unit_level_up",
        "level_nid": null,
        "condition": "has_skill(unit, 'Hard_Worker')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;marisa_hp;0",
            "game_var;marisa_str;0",
            "game_var;marisa_mag;0",
            "game_var;marisa_skl;0",
            "game_var;marisa_spd;0",
            "game_var;marisa_lck;0",
            "game_var;marisa_def;0",
            "game_var;marisa_res;0"
        ],
        "nid": "Global Marisa_Level"
    },
    {
        "name": "Mask_Anger",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount % 6 == 4 and game.check_alive('Kokoro')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Kokoro;Mask_Anger;;no_banner",
            "give_skill;Kokoro;Mask_Sad;;no_banner"
        ],
        "nid": "Global Mask_Anger"
    },
    {
        "name": "Mask_Calm",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount % 6 == 2 and game.check_alive('Kokoro')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Kokoro;Mask_Calm;;no_banner",
            "give_skill;Kokoro;Mask_Happy;;no_banner"
        ],
        "nid": "Global Mask_Calm"
    },
    {
        "name": "Mask_Happy",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount % 6 == 3 and game.check_alive('Kokoro')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Kokoro;Mask_Happy;;no_banner",
            "give_skill;Kokoro;Mask_Anger;;no_banner"
        ],
        "nid": "Global Mask_Happy"
    },
    {
        "name": "Mask_Hope",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount % 6 == 0 and game.check_alive('Kokoro')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Kokoro;Mask_Hope;;no_banner",
            "give_skill;Kokoro;Mask_Hope2;;no_banner"
        ],
        "nid": "Global Mask_Hope"
    },
    {
        "name": "Mask_Hope2",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount % 6 == 1 and game.check_alive('Kokoro')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Kokoro;Mask_Hope2;;no_banner",
            "give_skill;Kokoro;Mask_Calm;;no_banner"
        ],
        "nid": "Global Mask_Hope2"
    },
    {
        "name": "Mask_Sad",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount % 6 == 5 and game.check_alive('Kokoro')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Kokoro;Mask_Sad;;no_banner",
            "give_skill;Kokoro;Mask_Hope;;no_banner"
        ],
        "nid": "Global Mask_Sad"
    },
    {
        "name": "Mercenary_Camp",
        "trigger": null,
        "level_nid": null,
        "condition": "",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;not v('hireable_guys')",
            "    finish",
            "end",
            "textbox;MercDescription;\"{d:MercenaryHiringList.{v:MercenaryHireChoice_choice_hover}.Description}|Cost: {d:MercenaryHiringList.{v:MercenaryHireChoice_choice_hover}.Cost}\";bottom_right;90;5;;0.5;;;menu_bg_parchment;expression",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "choice;MercenaryHireChoice;Hire a Merc;v('hireable_guys') or ['Reimu'];Alignment=top_left;EntryType=type_unit;EventNid=Global ConfirmMercHire;expression;Dimensions=6,1;scroll_bar;backable"
        ],
        "nid": "Global Mercenary_Camp"
    },
    {
        "name": "MokouRecover",
        "trigger": null,
        "level_nid": null,
        "condition": "has_skill(unit, 'Immortal_Red_Soul')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.get_hp() != unit.get_max_hp()",
            "sound;Heal1",
            "map_anim;MapSmallHealTrans;{unit}",
            "set_current_hp;{unit};{e:max(1, unit.get_hp() + int(unit.get_stat('MAG')))}",
            "else",
            "end"
        ],
        "nid": "Global MokouRecover"
    },
    {
        "name": "Mokou_Aura",
        "trigger": null,
        "level_nid": null,
        "condition": "has_skill(unit, 'Phoenix_Aura')",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_skill;{unit};Phoenix_Aura_1;no_banner",
            "set_current_hp;{unit};{e:max(1, int(unit.get_max_hp() * 0.625))}",
            "sound;FireBall",
            "end"
        ],
        "nid": "Global Mokou_Aura"
    },
    {
        "name": "Mokou_Death",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.check_dead('Mokou') == 1",
            "add_portrait;Mokou_NPC;FarLeft",
            "speak;Mokou_NPC;RISE, IMMORTAL PHOENIX!",
            "center_cursor;{v:UnitPosition};immediate",
            "resurrect;Mokou",
            "add_unit;Mokou;{v:UnitPosition};Placement=closest;",
            "sound;FireHit",
            "map_anim;AOE_Fireball;{v:UnitPosition}",
            "wait;100",
            "sound;FireHit",
            "wait;100",
            "sound;FireHit",
            "add_fatigue;Mokou;20",
            "wait;700",
            "end"
        ],
        "nid": "Global Mokou_Death"
    },
    {
        "name": "Mokou_Recoil",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;v('mokou_recoil')",
            "    sound;FireHit",
            "    map_anim;AOE_Fireball;{unit}",
            "    set_current_hp;{unit};{e:max(1, unit.get_hp() - int(unit.get_max_hp() / 8))}",
            "    level_var;mokou_recoil;False",
            "end"
        ],
        "nid": "Global Mokou_Recoil"
    },
    {
        "name": "Mokou_Recoil_Check",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit != unit2 and unit.team != unit2.team",
            "    level_var;mokou_recoil;True",
            "end"
        ],
        "nid": "Global Mokou_Recoil_Check"
    },
    {
        "name": "Kagerou_Recoil",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "sound;Attack Hit 1",
            "set_current_hp;{unit};1",
            "end"
        ],
        "nid": "Global Kagerou_Recoil"
    },
    {
        "name": "PatchyReset",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "reset;Patchouli",
            "sound;RefreshDance",
            "give_skill;Patchouli;Tired;;no_banner"
        ],
        "nid": "Global PatchyReset"
    },
    {
        "name": "Record Position",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;UnitPosition;unit.position",
            "end"
        ],
        "nid": "Global Record Position"
    },
    {
        "name": "RemiliaCheck",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Remilia') and u('Remilia').position",
            "game_var;_turnwheel;1",
            "else",
            "game_var;_turnwheel;0",
            "end"
        ],
        "nid": "Global RemiliaCheck"
    },
    {
        "name": "RinnosukeDamage",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_money;-50;Reimu;no_banner"
        ],
        "nid": "Global RinnosukeDamage"
    },
    {
        "name": "RinnosukeHit",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_money;100;Reimu;no_banner"
        ],
        "nid": "Global RinnosukeHit"
    },
    {
        "name": "Shield_Check",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2 and skill_system.check_enemy(unit, unit2)",
            "    set_item_uses;{unit1};{e:unit.equipped_accessory.uid};-1;additive",
            "end",
            "if;unit.equipped_accessory.data.get('uses') == 0",
            "    break_item;{unit};{e:unit.equipped_accessory.uid}",
            "else",
            "end"
        ],
        "nid": "Global Shield_Check"
    },
    {
        "name": "Summon Phantom",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.get_unit('Phantom')",
            "    resurrect;Phantom",
            "    remove_unit;Phantom;warp",
            "    autolevel_to;Phantom;{e:unit.level}",
            "else",
            "    make_generic;Phantom;Fighter;{e:unit.level};player;;Monster;;Iron Axe",
            "end",
            "add_unit;phantom;{eval:target_pos};warp",
            "wait;200",
            ""
        ],
        "nid": "Global Summon Phantom"
    },
    {
        "name": "Summon Soldiers",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "make_generic;;Soldier;1;other;Pursue",
            "add_unit;{created_unit};{position};warp;closest",
            "wait;200"
        ],
        "nid": "Global Summon Soldiers"
    },
    {
        "name": "Support Gain",
        "trigger": "on_support",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;item == 'C'",
            "alert;Reached rank C!",
            "elif;item == 'B'",
            "alert;Reached rank B!",
            "elif;item == 'A'",
            "alert;Reached rank A!",
            "else",
            "alert;Support increased!",
            "end"
        ],
        "nid": "Global Support Gain"
    },
    {
        "name": "TewiGamble",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2.get_hp() == 0 and game.get_random(1,100) <= unit1.get_stat(\"LCK\")",
            "add_portrait;Tewi;Left;ExpressionList=Smile",
            "speak;Tewi;Let's see what we have here!",
            "remove_portrait;Tewi",
            "level_var;_despoil;random.randint(1,100)",
            "if;{v:_despoil} <= 70",
            "    give_item;{unit1};Life_Gem",
            "elif;{v:_despoil} > 70 and {v:_despoil} <= 90",
            "    give_item;{unit1};Ancient_Coin",
            "elif;{v:_despoil} > 90 and {v:_despoil} <= 95",
            "    give_item;{unit1};Yukkuri_R",
            "elif;{v:_despoil} == 96",
            "    give_item;{unit1};Yukkuri_M",
            "elif;{v:_despoil} == 97",
            "    give_money;6000;Reimu",
            "elif;{v:_despoil} == 98",
            "    give_money;8000;Reimu",
            "elif;{v:_despoil} == 99",
            "    give_money;9000;Reimu",
            "elif;{v:_despoil} == 100",
            "    give_item;{unit1};Swiftsole",
            "end",
            "else",
            "end"
        ],
        "nid": "Global TewiGamble"
    },
    {
        "name": "ReisenPTSD",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_fatigue;{unit};{e:int(unit.get_max_fatigue() / 2.5)}"
        ],
        "nid": "Global ReisenPTSD"
    },
    {
        "name": "Fatigue Disappear",
        "trigger": null,
        "level_nid": "6",
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;PARTY_UNIT;[x.nid for x in game.get_all_units_in_party()]",
            "add_fatigue;{PARTY_UNIT};-99",
            "endf"
        ],
        "nid": "6 Fatigue Disappear"
    },
    {
        "name": "YoumuDurability",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "set_item_uses;{unit};{e:unit.equipped_weapon.uid};-3;additive",
            "end",
            ""
        ],
        "nid": "Global YoumuDurability"
    },
    {
        "name": "BleedApply",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_skill;{unit2};Bleeding;{unit};no_banner"
        ],
        "nid": "Global BleedApply"
    },
    {
        "name": "Reimu/Rumia FIght",
        "trigger": "combat_start",
        "level_nid": "0",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Rumia'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Rumia;Left",
            "speak;Rumia;Reimu! Your shrine is mine!!",
            "add_portrait;Reimu;Right",
            "speak;Reimu;...and what are you exactly planning to do with it?",
            "speak;Rumia;Well...! I haven't thought that far yet...",
            "speak;Reimu;*sigh* Let's just get this over with.",
            "multi_remove_portrait;Rumia;Reimu",
            "show_combat_ui"
        ],
        "nid": "0 Reimu/Rumia FIght"
    },
    {
        "name": "Reimu/Rumia FIght_1",
        "trigger": "combat_start",
        "level_nid": "0",
        "condition": "unit.nid == 'Rumia' and unit2.nid == 'Reimu'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Rumia;Left",
            "speak;Rumia;Reimu! Your shrine is mine!!",
            "add_portrait;Reimu;Right",
            "speak;Reimu;...and what are you exactly planning to do with it?",
            "speak;Rumia;Well...! I haven't thought that far yet...",
            "speak;Reimu;*sigh* Let's just get this over with.",
            "multi_remove_portrait;Rumia;Reimu",
            "show_combat_ui"
        ],
        "nid": "0 Reimu/Rumia FIght_1"
    },
    {
        "name": "Fight Kagerou/Remilia",
        "trigger": "combat_start",
        "level_nid": "1",
        "condition": "unit.nid == 'Remilia' and unit2.nid == 'Kagerou'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Kagerou;Left",
            "speak;Kagerou;The mansion's vampire?! Here?!",
            "add_portrait;Remilia;Right",
            "speak;Remilia;A werewolf, eh? Even under the full moon, you'd just be a small fry before the queen of|the night.",
            "speak;Kagerou;Ha! It's my chance to beat you and show you who really rules the night!",
            "speak;Remilia;Fufufu...Your confidence amuses me.",
            "multi_remove_portrait;Kagerou;Remilia",
            "show_combat_ui"
        ],
        "nid": "1 Fight Kagerou/Remilia"
    },
    {
        "name": "Fight Kagerou/Remilia_1",
        "trigger": "combat_start",
        "level_nid": "1",
        "condition": "unit.nid == 'Kagerou' and unit2.nid == 'Remilia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Kagerou;Left",
            "speak;Kagerou;The mansion's vampire?! Here?!",
            "add_portrait;Remilia;Right",
            "speak;Remilia;A werewolf, eh? Even under the full moon, you'd just be a small fry before the queen of|the night.",
            "speak;Kagerou;Ha! It's my chance to beat you and show you who really rules the night!",
            "speak;Remilia;Fufufu...Your confidence amuses me.",
            "multi_remove_portrait;Kagerou;Remilia",
            "show_combat_ui"
        ],
        "nid": "1 Fight Kagerou/Remilia_1"
    },
    {
        "name": "Fight Rumia/Mystia",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Rumia\" and unit2.nid == \"Mystia_Boss\") or (unit.nid == \"Mystia_Boss\" and unit2.nid == \"Rumia\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Rumia;Right",
            "speak;Rumia;Oh, hey Mystia!",
            "add_portrait;Mystia;Left",
            "speak;Mystia;Rumia?! What are you doing on their side? Shouldn't you be helping us instead?",
            "speak;Rumia;Oh well, I attacked Reimu earlier and got stomped. She's forcing me to fight for her...",
            "speak;Mystia;Guess that can't be helped...but I'm not going easy on you!",
            "multi_remove_portrait;Rumia;Mystia",
            "show_combat_ui"
        ],
        "nid": "2 Fight Rumia/Mystia"
    },
    {
        "name": "Fight Tewi/Kasen",
        "trigger": "combat_start",
        "level_nid": "4",
        "condition": "(unit.nid == \"Tewi_Boss\" and unit2.nid == 'Kasen') or (unit2.nid == \"Tewi_Boss\" and unit.nid == 'Kasen')",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Dullahan Under the Willows",
            "add_portrait;Tewi;Left;ExpressionList=Smile",
            "add_portrait;Kasen;Right",
            "speak;Tewi;Oh hey, it's the mountain hermit. Whatcha up to?",
            "speak;Kasen;You've got some nerve, trying to chat me up in the middle of a battle.",
            "speak;Tewi;C'mon, no need to be so serious.\u2028Now...may I interest you in another|little bunny for your menagerie~?",
            "speak;Kasen;...|{tgm}Are you seriously trying to bribe me?;no_talk",
            "multi_remove_portrait;Kasen;Tewi",
            "show_combat_ui"
        ],
        "nid": "4 Fight Tewi/Kasen"
    },
    {
        "name": "SeedRerolling",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "game_var;_random_seed;random.randint(0,1023)",
            "if;static_random.set_seed({v:_random_seed})",
            "end"
        ],
        "nid": "Global SeedRerolling"
    },
    {
        "name": "Seed",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "game_var;_random_seed;random.randint(0,1023)",
            "if;'{v:_random_seed}'",
            "end"
        ],
        "nid": "Global Seed"
    },
    {
        "name": "New Event_3",
        "trigger": null,
        "level_nid": "DEBUG_1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;tezuka;Left",
            "speak;tezuka;Okay but hear me out"
        ],
        "nid": "DEBUG_1 New Event_3"
    },
    {
        "name": "DefeatKagerou",
        "trigger": "combat_end",
        "level_nid": "1",
        "condition": "game.check_dead(\"Kagerou_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "change_music;other_phase;Dullahan Under the Willows",
            "change_music;other_battle;Dullahan Under the Willows",
            "add_portrait;Kagerou;Left",
            "speak;;Wolf Sign \"Star Ring Pounce\";center;160;hint;;red;;;1;;;;;Warp",
            "add_group;KagerouSpell;KagerouSpell;warp;closest",
            "autolevel_to;Kagerou_Boss_1;6;fixed",
            "move_cursor;Kagerou_Boss_1",
            "speak;Kagerou;I'll tear you to shreds in a crimson flash!",
            "remove_portrait;Kagerou",
            "for;AFTERIMAGE;game.level.unit_groups.get('KagerouSpell').units",
            "    if;u('{AFTERIMAGE}').faction == \"Afterimage\"",
            "        change_portrait;{AFTERIMAGE};kagerou-afterimage",
            "    end",
            "    if;game.phase.get_current() == 'enemy'",
            "        has_finished;{AFTERIMAGE}",
            "    end",
            "endf",
            "else",
            "end"
        ],
        "nid": "1 DefeatKagerou"
    },
    {
        "name": "DefeatSekibanki",
        "trigger": "combat_end",
        "level_nid": "1",
        "condition": "game.check_dead(\"Sekibanki_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "change_music;other_phase;Dullahan Under the Willows",
            "change_music;other_battle;Dullahan Under the Willows",
            "add_portrait;Sekibanki;Left",
            "speak;;Flying Head \"Multiplicative Head\";center;170;hint;;red;;;1;;;;;Warp",
            "add_group;SekibankiSpell;SekibankiSpell;warp;closest",
            "autolevel_to;Sekibanki_Boss_1;6;fixed",
            "move_cursor;Sekibanki_Boss_1",
            "speak;Sekibanki;There's no escaping my many heads!",
            "remove_portrait;Sekibanki",
            "for;HEAD;game.level.unit_groups.get('SekibankiSpell').units",
            "    if;u('{HEAD}').nid != 'Sekibanki_Boss_1'",
            "        change_portrait;{HEAD};sekibanki-head",
            "    end",
            "    if;game.phase.get_current() == 'enemy'",
            "        has_finished;{HEAD}",
            "    end",
            "endf",
            "else",
            "end"
        ],
        "nid": "1 DefeatSekibanki"
    },
    {
        "name": "TitleFadeIn",
        "trigger": "on_title_screen",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_background;BlackBackground",
            "transition;close",
            "change_background",
            "transition;open"
        ],
        "nid": "Global TitleFadeIn"
    },
    {
        "name": "Scramble!",
        "trigger": null,
        "level_nid": "DEBUG_1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack"
        ],
        "nid": "DEBUG_1 Scramble!"
    },
    {
        "name": "SeiranScramble",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack",
            "#",
            "game_var;swap_units;[x.nid for x in game.get_all_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "game_var;swap_unit1_pos;u(v('swap_unit1')).position",
            "move_unit;{v:swap_unit1};{e:u(v('swap_unit2')).position};warp;stack",
            "move_unit;{v:swap_unit2};{v:swap_unit1_pos};warp;stack"
        ],
        "nid": "Global SeiranScramble"
    },
    {
        "name": "SpellRingo",
        "trigger": "combat_end",
        "level_nid": "3",
        "condition": "game.check_dead(\"Ringo_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "add_portrait;Ringo;Left",
            "speak;;Moon-Viewing Sake \"Lunatic September\";center;201;hint;;red;;;1;;;;;Warp",
            "add_group;RingoSpell;RingoSpell;warp;closest",
            "autolevel_to;Ringo_Boss_1;7;fixed",
            "move_cursor;Ringo_Boss_1",
            "speak;Ringo;Hey, I'm not done just yet! I still have my pride as a soldier!",
            "remove_portrait;Ringo",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('RingoSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "3 SpellRingo"
    },
    {
        "name": "SpellSeiran",
        "trigger": "combat_end",
        "level_nid": "3",
        "condition": "game.check_dead(\"Seiran_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "add_portrait;Seiran;Left",
            "speak;;Bullet Sign \"Eagle Shooting\";center;155;hint;;red;;;1;;;;;Warp",
            "add_group;SeiranSpell;SeiranSpell;warp;closest",
            "autolevel_to;Seiran_Boss_1;7;fixed",
            "move_cursor;Seiran_Boss_1",
            "speak;Seiran;I might not be the strongest eagle ravi, but I'm still one nonetheless!",
            "trigger_script;Global SeiranScramble",
            "remove_portrait;Seiran",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('SeiranSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "3 SpellSeiran"
    },
    {
        "name": "SpellTewi",
        "trigger": "combat_end",
        "level_nid": "4",
        "condition": "game.check_dead(\"Tewi_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "change_music;other_phase;Dullahan Under the Willows",
            "enable_fog_of_war;f",
            "add_portrait;Tewi;Left",
            "speak;;\"Ancient Duper\";center;90;hint;;red;;;1;;;;;Warp",
            "add_group;TewiSpell;TewiSpell;warp;closest",
            "autolevel_to;Tewi_Boss_1;8;fixed",
            "move_cursor;Tewi_Boss_1",
            "speak;Tewi;Hey, hey, hey! Feeling...lucky?",
            "remove_portrait;Tewi",
            "for;VICTIMS;[x.nid for x in game.get_all_units()]",
            "give_skill;{VICTIMS};FeelingLucky;;no_banner",
            "endf",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('TewiSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "4 SpellTewi"
    },
    {
        "name": "TewiLucky",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;gambling; game.get_random(1,25)",
            "if;{v:gambling} == 1",
            "    give_item;{unit1};Life_Gem",
            "elif;{v:gambling} == 2",
            "    give_money;50;Reimu",
            "elif;{v:gambling} == 3",
            "    enable_fog_of_war;t",
            "    set_fog_of_war;gba;5;5;5",
            "elif;{v:gambling} == 4",
            "    give_skill;{unit1};Burning",
            "elif;{v:gambling} == 5",
            "    give_skill;{unit2};Burning",
            "elif;{v:gambling} == 6",
            "    give_skill;{unit1};Poisoned",
            "elif;{v:gambling} == 7",
            "    give_skill;{unit2};Poisoned",
            "elif;{v:gambling} == 8",
            "    give_skill;{unit1};Sleep",
            "elif;{v:gambling} == 9",
            "    give_skill;{unit2};Sleep",
            "elif;{v:gambling} == 10",
            "    give_skill;{unit1};Frozen_1",
            "elif;{v:gambling} == 11",
            "    give_skill;{unit2};Frozen_1",
            "elif;{v:gambling} == 12",
            "    give_skill;{unit1};Bleeding",
            "elif;{v:gambling} == 13",
            "    give_skill;{unit2};Bleeding",
            "elif;{v:gambling} == 14",
            "    set_current_hp;{unit1};{e:unit.get_stat('HP')//2}",
            "elif;{v:gambling} == 15",
            "    give_money;-50;Reimu",
            "elif;{v:gambling} == 16",
            "    give_skill;{unit1};Fleetfooted",
            "elif;{v:gambling} == 17",
            "    give_skill;{unit2};Fleetfooted",
            "elif;{v:gambling} == 18",
            "    give_skill;{unit1};Enstrengthened",
            "elif;{v:gambling} == 19",
            "    give_skill;{unit2};Enstrengthened",
            "elif;{v:gambling} == 20",
            "    give_skill;{unit1};Magical_Flux",
            "elif;{v:gambling} == 21",
            "    give_skill;{unit2};Magical_Flux",
            "elif;{v:gambling} == 22",
            "    give_skill;{unit1};Bulwark",
            "elif;{v:gambling} == 23",
            "    give_skill;{unit2};Bulwark",
            "elif;{v:gambling} == 24",
            "    give_skill;{unit1};Agnostic",
            "elif;{v:gambling} == 25",
            "    give_skill;{unit2};Agnostic",
            "else",
            "end"
        ],
        "nid": "Global TewiLucky"
    },
    {
        "name": "SpellReisen",
        "trigger": "combat_end",
        "level_nid": "5",
        "condition": "game.check_dead(\"Reisen_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "add_portrait;Reisen;Left",
            "speak;;*You've Already Gone Mad!*;center;160;hint;;red;;;1;;;;;Warp",
            "add_group;ReisenSpell;ReisenSpell;warp;closest",
            "autolevel_to;Reisen_Boss_1;10;fixed",
            "move_cursor;Reisen_Boss_1",
            "speak;Reisen;Face this lunacy!;;;;;;;;1",
            "remove_portrait;Reisen",
            "game_var;swap_units;[x.nid for x in game.get_player_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "move_cursor;{v:swap_unit1}",
            "flicker_cursor;{v:swap_unit1}",
            "give_skill;{v:swap_unit1};Lunatic_Red_Eyes_Effect",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "move_cursor;{v:swap_unit2}",
            "flicker_cursor;{v:swap_unit2}",
            "give_skill;{v:swap_unit2};Lunatic_Red_Eyes_Effect",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('ReisenSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "5 SpellReisen"
    },
    {
        "name": "Lunacy",
        "trigger": null,
        "level_nid": "DEBUG_1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "add_portrait;Reisen;Left",
            "speak;;*You've Already Gone Mad!*;center;160;hint;;red;;;1;;;;;Warp",
            "add_group;ReisenSpell;ReisenSpell;warp;closest",
            "move_cursor;Reisen_Boss_1",
            "speak;Reisen;Face this lunacy!;;;;;;;;1",
            "remove_portrait;Reisen",
            "game_var;swap_units;[x.nid for x in game.get_player_units()]",
            "game_var;swap_unit1;game.get_random_choice(v('swap_units'))",
            "move_cursor;{v:swap_unit1}",
            "flicker_cursor;{v:swap_unit1}",
            "give_skill;{v:swap_unit1};Lunatic_Red_Eyes_Effect",
            "game_var;swap_unit2;game.get_random_choice([x for x in v('swap_units') if x != v('swap_unit1')])",
            "move_cursor;{v:swap_unit2}",
            "flicker_cursor;{v:swap_unit2}",
            "give_skill;{v:swap_unit2};Lunatic_Red_Eyes_Effect",
            "end"
        ],
        "nid": "DEBUG_1 Lunacy"
    },
    {
        "name": "SpecialOrders",
        "trigger": null,
        "level_nid": null,
        "condition": "",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;not v('special_orders')",
            "    finish",
            "end",
            "textbox;OrderDescription;\"{d:SpecialOrders.{v:SpecialOrdersChoice_choice_hover}.Description}\";bottom_right;90;5;;0.5;;;menu_bg_parchment;expression",
            "choice;SpecialOrdersChoice;Special Orders;v('special_orders') or ['Reimu'];Alignment=top_left;EntryType=type_unit;EventNid=Global ConfirmSpecialOrder;expression;Dimensions=6,1;scroll_bar;backable"
        ],
        "nid": "Global SpecialOrders"
    },
    {
        "name": "IntroCh2",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 0",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "game_var;chaptercount;0",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kasen_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern']",
            "game_var;hireable_guys;['Miki','Tomomi','Konami','Kabin','Yae','Amane']",
            "add_lore;Reimu",
            "add_lore;Marisa",
            "add_lore;Kasen",
            "add_lore;Remilia",
            "add_lore;Aunn",
            "add_lore;Bonus_Experience",
            "add_lore;Villages",
            "add_lore;Fog_of_War",
            "add_lore;Base_Conversations",
            "move_cursor;Reimu",
            "flicker_cursor;Reimu",
            "add_portrait;Reimu;Right",
            "speak;Reimu;What the hell is this place?",
            "remove_portrait;Reimu",
            "add_unit;Kasen_NPC;14,24;warp;closest;north",
            "multi_add_portrait;Kasen;Left;Reimu;Right",
            "speak;Kasen;This is the base. It's where we'll be going after each battle to rest.",
            "speak;Reimu;That's cool...but uh...what can we do here?",
            "speak;Kasen;Follow me.",
            "multi_remove_portrait;Kasen;Reimu",
            "move_unit;Kasen_NPC;16,18;normal;closest",
            "move_unit;Reimu;15,18;normal;closest",
            "multi_add_portrait;Kasen;MidRight;Reimu;FarRight;Rinnosuke;Left",
            "speak;Rinnosuke;Hey you two! Take a look at my wares!",
            "speak;Reimu;The heck is Kourin doing here?",
            "speak;Kasen;Rinnosuke will allow you to buy weapons from his shop, alongside leveling up your units with|your acquired Bonus Exp.",
            "speak;Reimu;I didn't know you dealt in arms, Kourin.",
            "speak;Rinnosuke;I mean, I have to keep living expenses up somehow, right?",
            "multi_remove_portrait;Kasen;Reimu;Rinnosuke",
            "move_unit;Kasen_NPC;17,21;normal;closest",
            "move_unit;Reimu;16,21;normal;closest",
            "multi_add_portrait;Kasen;MidRight;Reimu;FarRight;Kosuzu;Left",
            "speak;Kosuzu;Hi Miss Reimu! Hi Miss Hermit! Welcome to the branch location of Suzunaan!",
            "speak;Reimu;Are you selling Youma books again...?",
            "speak;Kosuzu;Haha, no. Just items and some old books...",
            "speak;Kasen;I specifically made sure she would not.",
            "speak;Kosuzu;Oh, and if you're in need of any information, please feel free to check my archives! It'll|update as we continue journeying!",
            "multi_remove_portrait;Kasen;Reimu;Kosuzu",
            "move_unit;Kasen_NPC;17,19;normal;closest",
            "move_unit;Reimu;16,19;normal;closest",
            "multi_add_portrait;Kasen;MidRight;Reimu;FarRight;Miyoi;Left",
            "speak;Miyoi;Welcome to Geidontei! ",
            "speak;Reimu;Why do we need a pub here?",
            "speak;Kasen;The pub is the best place to get information and hire new people. It's great.",
            "speak;Reimu;Booze is great as well.",
            "speak;Kasen;*sigh*, lay off the booze.",
            "multi_remove_portrait;Kasen;Reimu;Miyoi",
            "multi_add_portrait;Kasen;Left;Reimu;Right",
            "speak;Kasen;Well, that's pretty much it. Here's some funds. Don't waste them.",
            "give_money;5000;Reimu",
            "give_bexp;200",
            "speak;Reimu;Ooooh, you're so kind, Master Hermit!",
            "speak;Kasen;Alright...I'll leave you to your own devices.",
            "move_unit;Kasen_NPC;3,5;normal;closest"
        ],
        "nid": "Base IntroCh2"
    },
    {
        "name": "RinnosukeShop",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Rinnosuke_NPC'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Rinnosuke;Left",
            "add_portrait;Reimu;Right",
            "speak;Rinnosuke;Hey Reimu, what's up?",
            "choice;RinnosukeServices;What do you need?;Shop,Bonus Exp;backable",
            "if;'{v:RinnosukeServices}' == 'Shop'",
            "game_var;tiddies;v('ARMORY_ENTRY').sort(key=lambda item: [item.nid for item in DB.items].index(item) or 0)",
            "shop;{unit1};{e:','.join(v('ARMORY_ENTRY'))};armory",
            "elif;'{v:RinnosukeServices}' == 'Bonus Exp'",
            "open_bexp_menu",
            "end"
        ],
        "nid": "Base RinnosukeShop"
    },
    {
        "name": "KosuzuShop",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kosuzu_NPC'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Kosuzu;Left",
            "add_portrait;Reimu;Right",
            "speak;Kosuzu;Hey Reimu! Welcome to Suzunaan!",
            "choice;KosuzuServices;What do you need?;Shop,Guide,Lore;backable",
            "if;'{v:KosuzuServices}' == 'Shop'",
            "game_var;ass;v('SHOP_ENTRY').sort(key=lambda item: [item.nid for item in DB.items].index(item) or 0)",
            "shop;{unit1};{e:','.join(v('SHOP_ENTRY'))};vendor",
            "elif;'{v:KosuzuServices}' == 'Guide'",
            "open_guide",
            "elif;'{v:KosuzuServices}' == 'Lore'",
            "open_library",
            "end"
        ],
        "nid": "Base KosuzuShop"
    },
    {
        "name": "MiyoiShop",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Miyoi_NPC'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Miyoi;Left",
            "add_portrait;Reimu;Right",
            "speak;Miyoi;Welcome to Geidontei! What sort of services do you require?",
            "choice;MiyoiServices;What do you need?;Mercenary Camp,Special Orders;backable",
            "if;'{v:MiyoiServices}' == 'Mercenary Camp'",
            "trigger_script;Global Mercenary_Camp",
            "elif;'{v:MiyoiServices}' == 'Special Orders' and {v:chaptercount} >= 7",
            "trigger_script;Global SpecialOrders",
            "else",
            "add_portrait;Miyoi;Left",
            "speak;Miyoi;Sorry! This feature isn't available yet! Please try again later!",
            "end"
        ],
        "nid": "Base MiyoiShop"
    },
    {
        "name": "IntroCh3",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal']",
            "game_var;hireable_guys;v('hireable_guys') + ['Yuna','Yuika']"
        ],
        "nid": "Base IntroCh3"
    },
    {
        "name": "IntroCh4",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 2",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal']",
            "game_var;hireable_guys;v('hireable_guys') + ['Miu','Akane']"
        ],
        "nid": "Base IntroCh4"
    },
    {
        "name": "IntroCh5",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 3",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust']",
            "game_var;hireable_guys;v('hireable_guys') + ['Kana','Haruka']"
        ],
        "nid": "Base IntroCh5"
    },
    {
        "name": "IntroCh6",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 4",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust']",
            "game_var;hireable_guys;v('hireable_guys') + ['Meiko','Hanae']",
            ""
        ],
        "nid": "Base IntroCh6"
    },
    {
        "name": "IntroCh7",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 5",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_group;Chapter7Kasen;Chapter7Kasen;fade;closest",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kasen_NPC",
            "add_lore;Elite_Mercenaries",
            "trigger_script;Global Housekeeping1",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Omikuji', 'Mend', 'Restore']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh7"
    },
    {
        "name": "IntroCh8",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 7",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kogasa_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;hireable_guys;v('hireable_guys') + ['Yomi','Kasuka']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Javelin', 'Hand_Axe', 'Omikuji', 'Mend', 'Restore']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh8"
    },
    {
        "name": "IntroCh9",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 8",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kogasa_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;hireable_guys;v('hireable_guys') + ['Reiko','Sen']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Javelin', 'Hand_Axe', 'Omikuji', 'Mend', 'Restore']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh9"
    },
    {
        "name": "IntroCh10",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 9",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kogasa_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;hireable_guys;v('hireable_guys') + ['Karin','Haneul']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Javelin', 'Hand_Axe', 'Omikuji', 'Mend', 'Restore']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh10"
    },
    {
        "name": "IntroCh11",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 10",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kogasa_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;hireable_guys;v('hireable_guys') + ['Taiga','Marple']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Javelin', 'Hand_Axe', 'Omikuji', 'Mend', 'Restore']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh11"
    },
    {
        "name": "IntroCh12",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 11",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kogasa_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;hireable_guys;v('hireable_guys') + ['Pomona','Sayuri']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Javelin', 'Hand_Axe', 'Omikuji', 'Mend', 'Restore']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh12"
    },
    {
        "name": "IntroCh13",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 12",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kogasa_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;hireable_guys;v('hireable_guys') + ['Kairi','Jingyi']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Javelin', 'Hand_Axe', 'Omikuji', 'Mend', 'Restore']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh13"
    },
    {
        "name": "IntroCh14",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 13",
        "commands": [],
        "only_once": false,
        "priority": 22,
        "_source": [
            "chapter_title",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Rinnosuke_NPC",
            "add_talk;Reimu;Kosuzu_NPC",
            "add_talk;Reimu;Miyoi_NPC",
            "add_talk;Reimu;Kogasa_NPC",
            "trigger_script;Global Housekeeping1",
            "game_var;hireable_guys;v('hireable_guys') + ['Pomona','Sayuri']",
            "game_var;ARMORY_ENTRY;['Iron_Sword', 'Iron_Axe', 'Iron_Lance', 'Iron_Bow', 'Ofuda', 'Heal', 'Slim_Sword', 'Slim_Lance', 'Slim_Axe', 'Slim_Bow', 'Flamberge', 'Flame_Lance', 'Flame_Axe', 'Steel_Sword', 'Steel_Axe', 'Steel_Lance', 'Steel_Bow', 'Javelin', 'Hand_Axe', 'Omikuji', 'Mend', 'Restore', 'Short_Spear', 'Short_Axe']",
            "game_var;SHOP_ENTRY;['Fire',  'Flux', 'Life_Gem', 'Poppet', 'Maple_Shield', 'Lucky_Clover', 'Lantern', 'Torch', 'Gust', 'Thunder', 'Slime', 'Yomi', 'Misfortune_Amulet', 'Forged_Shield', 'Eye_of_Senri', 'Gas_Mask', 'Fatigue_Balm_I', 'Fatigue_Balm_II']"
        ],
        "nid": "Base IntroCh14"
    },
    {
        "name": "Suika",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Suika'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "add_portrait;Suika;Left;ExpressionList=Smile",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;FarRight",
            "speak;Suika;Heyyy!",
            "speak;Reimu;Oh, there you are.",
            "speak;Kasen;Suika? What's going on?",
            "speak;Suika;Heard there was a party goin' on, so I decided to join!",
            "speak;Reimu;Battle party.",
            "speak;Suika;All the same to me! Let's have some fun!",
            "speak;Kasen;*sigh*",
            "multi_remove_portrait;Reimu;Kasen;Suika",
            "sound;Item",
            "alert;Suika joined the party!",
            "give_bexp;25;no_banner",
            "add_lore;Suika",
            "change_team;Suika;player",
            "remove_talk;Reimu;Suika",
            "music_clear"
        ],
        "nid": "Base Suika"
    },
    {
        "name": "Kogasa",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kogasa'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "add_portrait;Kogasa;Left",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;FarRight",
            "speak;Reimu;Huh? What are you doing here?",
            "speak;Kogasa;G-gah?! How did you find my secret hiding spot?!",
            "speak;Kasen;Was pretty obvious from how much you were giggling to yourself.",
            "speak;Reimu;If you have nothing to do here, you have 10 seconds before it's extermination time.",
            "speak;Kogasa;W-wait! I can fix your weapons for you, remember?!",
            "speak;Reimu;Oh. Right. That is something you can do.",
            "speak;Kogasa;Here, let me tag along with you! Plus, there's bound to be a few opportunities for scaring!",
            "speak;Kasen;Not exactly a great motivation, but there's not a lot of people here with those...",
            "speak;Reimu;Finally. I can get some repairs done on my gear.",
            "speak;Kogasa;Miiight not be able to do certain special weapons, though.",
            "speak;Reimu;Useless.",
            "multi_remove_portrait;Reimu;Kasen;Kogasa",
            "sound;Item",
            "alert;Kogasa joined the party!",
            "speak;;You can now repair items! You may access repair by talking to Marisa and opening up|item management.;;;hint",
            "give_bexp;25;no_banner",
            "add_lore;Kogasa",
            "change_team;Kogasa;player",
            "enable_repair_shop;true",
            "remove_talk;Reimu;Kogasa",
            "remove_unit;Kogasa;warp;fade",
            "add_group;KogasaNPC;KogasaNPC;warp;closest",
            "game_var;KogasaTalked;1"
        ],
        "nid": "Base Kogasa"
    },
    {
        "name": "KogasaShop",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kogasa_NPC'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Kogasa;Left",
            "add_portrait;Reimu;Right",
            "speak;Kogasa;Hey! Do you need anything from me today?",
            "choice;Blacksmith;What do you need?;Shop,Forge;backable",
            "if;'{v:Blacksmith}' == 'Shop'",
            "speak;Kogasa;Not available at the moment.",
            "elif;'{v:Blacksmith}' == 'Forge'",
            "speak;Kogasa;Not available at the moment.",
            "end"
        ],
        "nid": "Base KogasaShop"
    },
    {
        "name": "Letty",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Letty'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Letty;Left",
            "add_portrait;Reimu;Right",
            "speak;Reimu;Hm? What's a yuki-onna doing out? It's not even winter.",
            "speak;Letty;This is...where I end up during the spring...",
            "speak;Reimu;Seriously? You end up here?",
            "speak;Letty;I've been here for sooo long...so...warm...",
            "speak;Reimu;Hey, I mean. You could tag along with us. (Damn, why do I almost feel bad for her?)",
            "speak;Letty;Going outside...the heat...the hay fever...",
            "speak;Reimu;Such a needy person. You've lost my sympathy.",
            "speak;Letty;Need...2000 gold to buy cooler...",
            "choice;Hire;Hire for 2000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() < 2000",
            "speak;Letty;You do...not have enough money...so warm...",
            "speak;Reimu;Such melodrama.",
            "finish",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() >= 2000",
            "speak;Letty;Really?! You'd give this to me?",
            "speak;Reimu;You're joning my army, though!",
            "speak;Letty;Alright! ",
            "speak;Reimu;You seem way too happy for someone who was just in a deep depression.",
            "speak;Letty;Enough with the trifling details! I'm rich!",
            "speak;Reimu;Greed really brings out the worst in people.",
            "speak;Kasen (Afar);You're one to talk!",
            "speak;Letty;Oh yeah, I lied. I just wandered in here somehow.",
            "speak;Reimu;You-!",
            "give_money;-2000;Reimu;no_banner",
            "change_team;Letty;player",
            "remove_talk;Reimu;Letty",
            "multi_remove_portrait;Reimu;Letty",
            "sound;Item",
            "alert;Letty joined the party!",
            "add_lore;Letty",
            "elif;'{v:Hire}' == 'No'",
            "speak;Letty;Tch, stingy.",
            "end"
        ],
        "nid": "Base Letty"
    },
    {
        "name": "Kokoro",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kokoro'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Kokoro;Left",
            "add_portrait;Reimu;Right",
            "speak;Kokoro;Hark! Shrine maiden of Hakurei!",
            "speak;Reimu;It's the menreiki. What are you doing here?",
            "speak;Kokoro;Gimme a job!",
            "speak;Reimu;I see...",
            "speak;Kokoro;You need extra hands, right~?",
            "speak;Reimu;I guess so...?",
            "choice;Hire;Hire for 3000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() < 3000",
            "speak;Kokoro;Such foolishness! To attempt to hire someone with no capital!",
            "speak;Reimu;You came up to me yourself...",
            "finish",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() >= 3000",
            "speak;Kokoro;Hehehe...rolling in dough!",
            "speak;Reimu;Err...yeah.",
            "give_money;-3000;Reimu;no_banner",
            "change_team;Kokoro;player",
            "remove_talk;Reimu;Kokoro",
            "multi_remove_portrait;Reimu;Kokoro",
            "sound;Item",
            "alert;Kokoro joined the party!",
            "add_lore;Kokoro",
            "elif;'{v:Hire}' == 'No'",
            "speak;Kokoro;Awww man...",
            "end"
        ],
        "nid": "Base Kokoro"
    },
    {
        "name": "Tokiko",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Tokiko'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Tokiko;Left",
            "add_portrait;Reimu;Right",
            "speak;Reimu;Oh, it's that bird that hangs around Kourin's shop.",
            "speak;Tokiko;Hmm? What do you want?",
            "speak;Reimu;Can you fight?",
            "speak;Tokiko;What an odd question...I mean...I suppose...",
            "speak;Reimu;Hmm...",
            "choice;Hire;Hire for 2000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() >= 2000",
            "speak;Reimu;Alright then. Take this 2000 gold.",
            "speak;Tokiko;W-whhaaat?!",
            "speak;Reimu;I guess even you youkai need money. Use it to buy more books.",
            "speak;Tokiko;T-thank you, miss!",
            "speak;Reimu;Oh, by the way you're joining my army too.",
            "speak;Tokiko;what",
            "give_money;-2000;Reimu;no_banner",
            "change_team;Tokiko;player",
            "remove_talk;Reimu;Tokiko",
            "multi_remove_portrait;Reimu;Tokiko",
            "sound;Item",
            "alert;Tokiko joined the party!",
            "add_lore;Tokiko",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() < 2000",
            "speak;Reimu;Hey, what if I paid you some money to fight for me?",
            "speak;Tokiko;I'd like...uh...2000 gold.",
            "speak;Reimu;Damn, we really are poor.",
            "finish",
            "elif;'{v:Hire}' == 'No'",
            "speak;Reimu;Never mind.",
            "speak;Tokiko;Huh?",
            "end"
        ],
        "nid": "Base Tokiko"
    },
    {
        "name": "Yoshino",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Yoshino'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Yoshino;Left;ExpressionList=Smile",
            "add_portrait;Reimu;Right",
            "speak;Yoshino;Heyo! Master Eirin said I could make a quick buck here!",
            "speak;Reimu;Quick isn't what I'd call the correct word. What can you even do?",
            "speak;Yoshino;I'm quite the fast courier! Anything you need, I can get.",
            "speak;Reimu;We're not running a package delivery service here.",
            "speak;Yoshino;I'm also swift in combat! You won't regret hiring me!",
            "choice;Hire;Hire for 1000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() > 1000",
            "speak;Yoshino;Thanks for your business!",
            "give_money;-1000;Reimu;no_banner",
            "change_team;Yoshino;player",
            "remove_talk;Reimu;Yoshino",
            "multi_remove_portrait;Reimu;Yoshino",
            "sound;Item",
            "alert;Yoshino joined the party!",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() < 1000",
            "speak;Yoshino;Maybe Master Tewi has some better money making ideas...",
            "speak;Reimu;You shouldn't come here just to make money!",
            "finish",
            "elif;'{v:Hire}' == 'No'",
            "speak;Yoshino;Aww...what a shame.",
            "end"
        ],
        "nid": "Base Yoshino"
    },
    {
        "name": "Sena",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Sena'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Sena;Left;ExpressionList=Smile",
            "add_portrait;Reimu;Right",
            "speak;Sena;Greetings, fellow exterminator.",
            "speak;Reimu;Huh? Who are you?",
            "speak;Sena;I am Sena...a humble crusader against the youkai threat.",
            "speak;Reimu;I don't know if you've noticed, but there's quite a few youkai around here.",
            "speak;Sena;What?!",
            "speak;Sena;Well...I'll deal with them later. Do you have pocket change? I'm on hard times.",
            "speak;Reimu;Same...",
            "choice;Hire;Hire for 1000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() > 1000",
            "speak;Sena;Thanks! ",
            "speak;Reimu;Well, now I'm on even harder times...",
            "give_money;-1000;Reimu;no_banner",
            "change_team;Sena;player",
            "remove_talk;Reimu;Sena",
            "multi_remove_portrait;Reimu;Sena",
            "sound;Item",
            "alert;Sena joined the party!",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() < 1000",
            "speak;Sena;Guess we're both broke.",
            "speak;Reimu;Not ideal.",
            "finish",
            "elif;'{v:Hire}' == 'No'",
            "speak;Sena;Help a fellow human out?",
            "end"
        ],
        "nid": "Base Sena"
    },
    {
        "name": "Kagerou",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kagerou'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Kagerou;Left;ExpressionList=Smile",
            "add_portrait;Reimu;Right",
            "speak;Kagerou;Ah...the shrine maiden.",
            "speak;Reimu;I swear, I don't get any respect around here.",
            "speak;Reimu;So what are you doing in the camp?",
            "speak;Kagerou;Well...even we youkai need spending money sometimes.",
            "speak;Reimu;I guess you're fine now that I've beaten the mallet magic out of you.",
            "speak;Kagerou;Exactly. So what do you say?",
            "choice;Hire;Hire for 3000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() >= 3000",
            "speak;Kagerou;Thanks! I won't let you down!",
            "speak;Reimu;Awfully obedient for a rabid dog...",
            "speak;Kagerou;I'd like to consider myself more of a loyal wolf.",
            "give_money;-3000;Reimu;no_banner",
            "change_team;Kagerou;player",
            "remove_talk;Reimu;Kagerou",
            "multi_remove_portrait;Reimu;Kagerou",
            "sound;Item",
            "alert;Kagerou joined the party!",
            "add_lore;Kagerou",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() < 3000",
            "speak;Kagerou;This isn't nearly enough...",
            "speak;Reimu;Everybody's so greedy! Why can't they just accept what I give them?",
            "finish",
            "elif;'{v:Hire}' == 'No'",
            "speak;Kagerou;Aw...well, I guess I understand.",
            "speak;Reimu;If you understood, then why did you ask for a job in the first place?",
            "end"
        ],
        "nid": "Base Kagerou"
    },
    {
        "name": "Rin",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Rin'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Rin;Left;ExpressionList=Smile",
            "add_portrait;Reimu;Right",
            "speak;Rin;74 68 65 20 65 6E 64 20 69 73 20 63 6F 6D 69 6E 67 20 68 65 20 77 68 6F 20 64 72 69 6E 6B 73 20 74 68 65 20 62 65 65 72 20 77 69 6C 6C 20 64 65 63 69 6D 61 74 65 20 61 6C 6C 20 6F 66 20 67 65 6E 73 6F 6B 79 6F 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 69 74 20 69 73 20 68 6F 70 65 6C 65 73 73",
            "speak;Reimu;W-wha-",
            "speak;Rin;6E 6F 74 68 69 6E 67 20 69 73 20 73 61 63 72 65 64 20 6E 6F 74 68 69 6E 67 20 69 73 20 70 65 72 6D 61 6E 65 6E 74 20 6E 6F 74 68 69 6E 67 20 77 69 6C 6C 20 6C 61 73 74 20 66 6F 72 65 76 65 72 20 77 65 20 77 69 6C 6C 20 62 65 20 73 75 63 6B 65 64 20 69 6E 74 6F 20 74 68 65 20 64 61 72 6B 20 65 6E 64 6C 65 73 73 20 76 6F 69 64 20 6F 66 20 70 65 72 70 65 74 75 69 74 79",
            "speak;Reimu;I-I'm sorry? I-",
            "music;Game Boy Advance Crash Sound",
            "change_background;bnuy",
            "add_portrait;Rin;Left;ExpressionList=Smile",
            "add_portrait;Reimu;Right",
            "add_portrait;RinBrigand;Left",
            "add_portrait;RinGuard;Left",
            "add_portrait;RinSpider;Left",
            "add_portrait;RinShaman;Left",
            "add_portrait;RinTengu;Left",
            "add_portrait;RinBigle;Left",
            "speak;Reimu;What the heck is going on?!",
            "add_portrait;Marisa;Right",
            "speak;Marisa;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "speak;Reimu;Marisa??!",
            "speak;Rin;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "speak;RinBrigand;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "speak;RinGuard;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "speak;RinSpider;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "speak;RinShaman;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "speak;RinTengu;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "speak;RinBigle;74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72 20 74 68 65 20 65 6E 64 20 69 73 20 6E 65 61 72",
            "expression;Reimu;CloseEyes",
            "speak;Reimu;MAKE IT STOP!",
            "transition;close",
            "change_background",
            "multi_remove_portrait;Marisa;RinBrigand;RinBigle;RinSpider;RinGuard;RinShaman;RinTengu",
            "music;The Gensokyo the Gods Loved",
            "add_portrait;Rin;Left;ExpressionList=Smile",
            "add_portrait;Reimu;Right",
            "transition;open",
            "speak;Reimu;...",
            "choice;Hire;Sono individuo voeur to tafikao, akceptisarel?;79 65 73,6E 6F;backable",
            "if;'{v:Hire}' == '79 65 73' and game.get_money() >= {e:game.get_random(100,3000)}",
            "give_money;{e:-game.get_random(100,3000)};Reimu;no_banner",
            "change_team;Rin;player",
            "flicker_cursor;Rin",
            "remove_unit;Rin;warp",
            "trigger_script;Global BullshitRinEvent",
            "autolevel_to;Rin;{e:{v:chaptercount} + 1};fixed",
            "add_unit;Rin;9,22;warp;closest",
            "remove_talk;Reimu;Rin",
            "multi_remove_portrait;Reimu;Rin",
            "sound;Item",
            "alert;Rin joined the party!",
            "add_lore;Rin",
            "elif;'{v:Hire}' == '79 65 73' and game.get_money() < {e:game.get_random(100,3000)}",
            "speak;Rin;come back when you have more money broke bitch",
            "elif;'{v:Hire}' == '6E 6F'",
            "speak;Rin;pneumonoultramicroscopicsilicovolcanoconiosis",
            "end"
        ],
        "nid": "Base Rin"
    },
    {
        "name": "SuikaCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Suika') and game.get_unit('Suika').team != 'player'",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Suika;Suika;fade;closest",
            "autolevel_to;Suika;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Suika",
            "end"
        ],
        "nid": "Base SuikaCheck"
    },
    {
        "name": "LettyCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Letty') and game.get_unit('Letty').team != 'player'",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Letty;Letty;fade;closest",
            "autolevel_to;Letty;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Letty",
            "end"
        ],
        "nid": "Base LettyCheck"
    },
    {
        "name": "TokikoCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Tokiko') and game.get_unit('Tokiko').team != 'player'",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Tokiko;Tokiko;fade;closest",
            "autolevel_to;Tokiko;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Tokiko",
            "end"
        ],
        "nid": "Base TokikoCheck"
    },
    {
        "name": "Yoshino&SenaCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] == 5",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Chapter7Elites;Chapter7Elites;fade;closest",
            "autolevel_to;Yoshino;{e:{v:chaptercount} + 1};fixed",
            "autolevel_to;Sena;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Yoshino",
            "add_talk;Reimu;Sena",
            "end"
        ],
        "nid": "Base Yoshino&SenaCheck"
    },
    {
        "name": "KagerouCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Kagerou') and game.get_unit('Kagerou').team != 'player' and game.game_vars['chaptercount'] >= 2",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Kagerou;Kagerou;fade;closest",
            "autolevel_to;Kagerou;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Kagerou",
            "end"
        ],
        "nid": "Base KagerouCheck"
    },
    {
        "name": "KyoukoCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Kyouko') and game.get_unit('Kyouko').team != 'player' and game.game_vars['chaptercount'] >= 10",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Kyouko;Kyouko;fade;closest",
            "autolevel_to;Kyouko;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Kyouko",
            "end"
        ],
        "nid": "Base KyoukoCheck"
    },
    {
        "name": "KogasaNPCCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.game_vars['chaptercount'] >= 8 and game.game_vars['KogasaTalked'] == 1",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Kogasa_NPC;Kogasa_NPC;fade;closest",
            "autolevel_to;Kogasa_NPC;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Kogasa_NPC",
            "end"
        ],
        "nid": "Base KogasaNPCCheck"
    },
    {
        "name": "RingoCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Ringo') and game.get_unit('Ringo').team != 'player' and game.game_vars['chaptercount'] >= 6",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Ringo;Ringo;fade;closest",
            "autolevel_to;Ringo;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Ringo",
            "end"
        ],
        "nid": "Base RingoCheck"
    },
    {
        "name": "SeiranCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Seiran') and game.get_unit('Seiran').team != 'player' and game.game_vars['chaptercount'] >= 6",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Seiran;Seiran;fade;closest",
            "autolevel_to;Seiran;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Seiran",
            "end"
        ],
        "nid": "Base SeiranCheck"
    },
    {
        "name": "KokoroCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Kokoro') and game.get_unit('Kokoro').team != 'player'",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Kokoro;Kokoro;fade;closest",
            "autolevel_to;Kokoro;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Kokoro",
            "end"
        ],
        "nid": "Base KokoroCheck"
    },
    {
        "name": "RinCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Rin') and game.get_unit('Rin').team != 'player'",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "add_group;Rin;Rin;fade;closest",
            "add_talk;Reimu;Rin",
            "end"
        ],
        "nid": "Base RinCheck"
    },
    {
        "name": "Onward",
        "trigger": "Onward!",
        "level_nid": "Base",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;onward;Advance to next chapter?;Yes,No",
            "if;'{v:onward}' == 'Yes'",
            "    set_next_chapter;{e:{v:chaptercount} + 1}",
            "    win_game",
            "end"
        ],
        "nid": "Base Onward"
    },
    {
        "name": "Kasen",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kasen_NPC' and game.game_vars['chaptercount'] == 0 ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Kasen;Left",
            "speak;Kasen;Make sure to use your time in the base wisely!",
            "remove_portrait;Kasen"
        ],
        "nid": "Base Kasen"
    },
    {
        "name": "KasenCh7",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kasen_NPC' and game.game_vars['chaptercount'] == 5 ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;CenterLeft",
            "speak;Reimu;There seems to be a lot of interesting characters around camp.",
            "speak;Kasen;It seems the eve of an important battle has more interesting people seeking employment.",
            "speak;Reimu;I see...are they any good at combat?",
            "speak;Kasen;Well, they're at least a step above the usual rabble that comes knocking.",
            "speak;Reimu;That's more money spent, though...",
            "speak;Kasen;It's up to you. Just remember that they'll\u2028pack up their bags if they're not hired|before big battles.",
            "multi_remove_portrait;Kasen,Reimu",
            "give_bexp;25;no_banner"
        ],
        "nid": "Base KasenCh7"
    },
    {
        "name": "Marisa",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Marisa'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Marisa;Left",
            "add_portrait;Reimu;Right",
            "speak;Marisa;Hmmm? What is it, Reimu?",
            "choice;MarisaServices;What do you need?;Manage Items,Gossip,Save;backable",
            "if;'{v:MarisaServices}' == 'Manage Items'",
            "trigger_script;Global FATIGUE READD",
            "open_unit_management",
            "elif;'{v:MarisaServices}' == 'Gossip'",
            "trigger_script;MarisaGossip",
            "elif;'{v:MarisaServices}' == 'Save'",
            "battle_save",
            "end"
        ],
        "nid": "Base Marisa"
    },
    {
        "name": "APromotionEvent",
        "trigger": "level_start",
        "level_nid": "DEBUG_1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "autolevel_to;Wriggle;20;fixed",
            "promote;Wriggle;Gendarme;silent",
            "autolevel_to;Wriggle;40;fixed",
            "set_wexp;Wriggle;Sword;251;no_banner",
            "set_wexp;Wriggle;Axe;251;no_banner",
            "#",
            "autolevel_to;Aunn;20;fixed",
            "promote;Aunn;Charger;silent",
            "autolevel_to;Aunn;40;fixed",
            "set_wexp;Aunn;Sword;251;no_banner",
            "set_wexp;Aunn;Lance;251;no_banner",
            "#",
            "autolevel_to;Luna;20;fixed",
            "promote;Luna;Cataphract;silent",
            "autolevel_to;Luna;40;fixed",
            "set_wexp;Luna;Axe;251;no_banner",
            "set_wexp;Luna;Lance;251;no_banner",
            "#",
            "autolevel_to;Suika;20;fixed",
            "promote;Suika;Berserker;silent",
            "autolevel_to;Suika;40;fixed",
            "set_wexp;Suika;Axe;251;no_banner",
            "#",
            "autolevel_to;Kagerou;20;fixed",
            "promote;Kagerou;Werewolf;silent",
            "autolevel_to;Kagerou;40;fixed",
            "set_wexp;Kagerou;Martial;251;no_banner",
            "#",
            "remove_item;Tokiko;Slim_Lance;;no_banner",
            "remove_item;Tokiko;Javelin;;no_banner",
            "autolevel_to;Tokiko;20;fixed",
            "promote;Tokiko;Dark_Flier;silent",
            "autolevel_to;Tokiko;40;fixed",
            "set_wexp;Tokiko;Lance;251;no_banner",
            "set_wexp;Tokiko;Sword;251;no_banner",
            "set_wexp;Tokiko;Anima;251;no_banner",
            "#",
            "",
            "#",
            "autolevel_to;Letty;20;fixed",
            "promote;Letty;Warrior;silent",
            "autolevel_to;Letty;40;fixed",
            "set_wexp;Letty;Axe;251;no_banner",
            "set_wexp;Letty;Bow;251;no_banner",
            "#",
            "autolevel_to;Rumia;20;fixed",
            "promote;Rumia;Hexblade;silent",
            "autolevel_to;Rumia;40;fixed",
            "set_wexp;Rumia;Dark;251;no_banner",
            "set_wexp;Rumia;Sword;251;no_banner",
            "#",
            "autolevel_to;Reimu;20;fixed",
            "promote;Reimu;Kannushi;silent",
            "autolevel_to;Reimu;40;fixed",
            "set_wexp;Reimu;Light;251;no_banner",
            "set_wexp;Reimu;Bow;251;no_banner",
            "set_wexp;Reimu;Lance;251;no_banner",
            "#",
            "autolevel_to;Marisa;20;fixed",
            "promote;Marisa;Magus;silent",
            "autolevel_to;Marisa;40;fixed",
            "set_wexp;Marisa;Light;251;no_banner",
            "set_wexp;Marisa;Dark;251;no_banner",
            "set_wexp;Marisa;Anima;251;no_banner",
            "#",
            "autolevel_to;Rinnosuke;20;fixed",
            "promote;Rinnosuke;Swordmaster_R;silent",
            "autolevel_to;Rinnosuke;40;fixed",
            "set_wexp;Rinnosuke;Sword;251;no_banner",
            "give_item;Rinnosuke;Tasouken;no_banner",
            "#",
            "autolevel_to;Sunny;20;fixed",
            "promote;Sunny;Spy;silent",
            "autolevel_to;Sunny;40;fixed",
            "set_wexp;Sunny;Sword;251;no_banner",
            "set_wexp;Sunny;Bow;251;no_banner",
            "give_item;Sunny;Wind_Sword;no_banner",
            "#",
            "autolevel_to;Star;20;fixed",
            "promote;Star;Valkyrie;silent",
            "autolevel_to;Star;40;fixed",
            "set_wexp;Star;Sword;251;no_banner",
            "set_wexp;Star;Light;251;no_banner",
            "#",
            "#",
            "autolevel_to;Daiyousei;20;fixed",
            "promote;Daiyousei;Sniper;silent",
            "autolevel_to;Daiyousei;40;fixed",
            "set_wexp;Daiyousei;Bow;251;no_banner",
            "#",
            "autolevel_to;Tewi;20;fixed",
            "promote;Tewi;Rogue;silent",
            "autolevel_to;Tewi;40;fixed",
            "set_wexp;Tewi;Sword;251;no_banner",
            "#",
            "autolevel_to;Reisen;20;fixed",
            "promote;Reisen;Apothecary;silent",
            "autolevel_to;Reisen;40;fixed",
            "set_wexp;Reisen;Bow;251;no_banner",
            "#",
            "autolevel_to;Mokou;20;fixed",
            "promote;Mokou;Sage_M;silent",
            "autolevel_to;Mokou;40;fixed",
            "set_wexp;Mokou;Anima;251;no_banner",
            "set_wexp;Mokou;Martial;251;no_banner",
            "#",
            "#",
            "autolevel_to;Ringo;20;fixed",
            "promote;Ringo;Dracolord;silent",
            "autolevel_to;Ringo;40;fixed",
            "set_wexp;Ringo;Lance;251;no_banner",
            "set_wexp;Ringo;Sword;251;no_banner",
            "#",
            "autolevel_to;Seiran;20;fixed",
            "promote;Seiran;Veteran_A;silent",
            "autolevel_to;Seiran;40;fixed",
            "set_wexp;Seiran;Axe;251;no_banner",
            "set_wexp;Seiran;Sword;251;no_banner",
            "#",
            "autolevel_to;Kasen;40;fixed",
            "set_wexp;Kasen;Axe;251;no_banner",
            "set_wexp;Kasen;Sword;251;no_banner",
            "#",
            "autolevel_to;Narumi;20;fixed",
            "promote;Narumi;Sage_N;silent",
            "autolevel_to;Narumi;40;fixed",
            "set_wexp;Narumi;Light;251;no_banner",
            "set_wexp;Narumi;Staff;251;no_banner"
        ],
        "nid": "DEBUG_1 APromotionEvent"
    },
    {
        "name": "Ringo",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Ringo'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Ringo;Left",
            "add_portrait;Reimu;Right",
            "speak;Reimu;So what brings you rabbits here?",
            "speak;Ringo;With all this fighting going around Gensokyo, dango sales haven't been doing too hot.",
            "speak;Reimu;And how is this my problem?",
            "speak;Ringo;Because you're the one fueling a war economy with this conquest!",
            "speak;Reimu;I didn't choose this incident to happen!",
            "speak;Ringo;Well, I kinda need to make ends meet, so how about I do some fighting for you?",
            "speak;Reimu;Right...",
            "choice;Hire;Hire for 5000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() >= 5000",
            "expression;Ringo;Smile",
            "speak;Ringo;Nice doing business with you!",
            "speak;Reimu;I'd rather hear that from the other side of a dango stand, really.",
            "give_money;-5000;Reimu;no_banner",
            "change_team;Ringo;player",
            "remove_talk;Reimu;Ringo",
            "multi_remove_portrait;Reimu;Ringo",
            "sound;Item",
            "alert;Ringo joined the party!",
            "add_lore;Ringo",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() < 5000",
            "speak;Ringo;Do you pay all your soldiers in pennies?",
            "speak;Reimu;I usually don't pay them at all.",
            "finish",
            "end",
            "elif;'{v:Hire}' == 'No'",
            "speak;Ringo;Welp, I'll still be here if the offer interests you.",
            "end"
        ],
        "nid": "Base Ringo"
    },
    {
        "name": "Seiran",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Seiran'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Seiran;Left",
            "add_portrait;Reimu;Right",
            "speak;Seiran;Hey...",
            "speak;Reimu;The two of you are inseparable.",
            "speak;Seiran;Well, she's the only rabbit who hangs around me...",
            "speak;Reimu;So you followed her here too?",
            "speak;Seiran;Well...if her dango sales are doing poor...mine are doing worse.",
            "speak;Reimu;This economy stuff makes my head spin.",
            "speak;Seiran;Mine too...so I've decided to go back to being a soldier for the time being.",
            "choice;Hire;Hire for 5000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() > 5000",
            "speak;Reimu;Well, I hope you're at least a decent asset.",
            "expression;Seiran;Smile",
            "speak;Seiran;Thanks! Eagle Ravi Seiran, reporting for duty!",
            "give_money;-5000;Reimu;no_banner",
            "change_team;Seiran;player",
            "remove_talk;Reimu;Seiran",
            "multi_remove_portrait;Reimu;Seiran",
            "sound;Item",
            "alert;Seiran joined the party!",
            "add_lore;Seiran",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() < 5000",
            "speak;Seiran;This is kinda low, don't you think?",
            "speak;Reimu;What's low is all these people trying to take my money.",
            "finish",
            "elif;'{v:Hire}' == 'No'",
            "speak;Seiran;Alright...",
            "end"
        ],
        "nid": "Base Seiran"
    },
    {
        "name": "KogasaCheck",
        "trigger": "level_start",
        "level_nid": "Base",
        "condition": "game.check_alive('Kogasa') and game.get_unit('Kogasa').team != 'player' and game.game_vars['chaptercount'] >= 7",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Kogasa;Kogasa;fade;closest",
            "autolevel_to;Kogasa;{e:{v:chaptercount} + 1};fixed",
            "add_talk;Reimu;Kogasa",
            "end"
        ],
        "nid": "Base KogasaCheck"
    },
    {
        "name": "Onward",
        "trigger": "Onward!",
        "level_nid": "7",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "choice;onward;Advance to next chapter?;Yes,No",
            "if;'{v:onward}' == 'Yes'",
            "set_next_chapter;Base",
            "win_game",
            "else",
            "end"
        ],
        "nid": "7 Onward"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "7",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;SHITASS;[x for x in ['Wriggle', 'Mystia', 'Letty', 'Cirno', 'Rumia', 'Daiyousei', 'Rin', 'Kagerou', 'Reisen', 'Tewi', 'Reisen', 'Aunn', 'Kokoro', 'Rinnosuke', 'Kosuzu', 'Suika', 'Kasen', 'Star', 'Sunny', 'Luna', 'Remilia', 'Tokiko'] if u(x) and u(x).team == 'player' and u(x).party == 'Reimu' and game.check_alive(x)]",
            "    add_talk;Reimu;{SHITASS}",
            "    add_talk;{SHITASS};Reimu",
            "    add_group;{SHITASS};{SHITASS};fade;closest",
            "endf",
            "game_var;chaptercount;7",
            "autolevel_to;Eirin_NPC;39;fixed",
            "",
            "add_talk;Reimu;Eirin_NPC",
            "add_talk;Reimu;Marisa",
            "add_talk;Reimu;Mokou",
            "add_talk;Reimu;Kaguya",
            "",
            "add_lore;Supports",
            "trigger_script;START",
            "transition;open",
            "",
            ""
        ],
        "nid": "7 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "7",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "trigger_script;ENDING"
        ],
        "nid": "7 Outro"
    },
    {
        "name": "TalkEirin",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Eirin_NPC'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "give_item;Reimu;Scroll_Moonbow",
            "remove_talk;Reimu;Eirin_NPC",
            ""
        ],
        "nid": "7 TalkEirin"
    },
    {
        "name": "ScrollMoonbow",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_skill;{unit};Moonbow"
        ],
        "nid": "Global ScrollMoonbow"
    },
    {
        "name": "NarumiSecret",
        "trigger": "Secret!",
        "level_nid": "10",
        "condition": "unit.nid == 'Marisa'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "add_portrait;Marisa;Left",
            "add_portrait;Narumi;Right",
            "speak;Marisa;Wahey! Oh, it's Narumi. What are you doing here?",
            "speak;Narumi;Ah, Marisa. Could you keep it down?",
            "speak;Marisa;Well,I mean, we're fightin' a battle out here.",
            "speak;Narumi;Really? I could not have guessed.",
            "speak;Marisa;Wipe that smug grin off your face.",
            "speak;Narumi;Yes, yes. Can you all bring this elsewhere?",
            "speak;Marisa;We're uh...not at the liberty of doin' that.",
            "speak;Narumi;Is that so? Well, if that's the case, if I help you out...will they go away?",
            "speak;Marisa;I mean, we coooould always use more soldiers...",
            "speak;Narumi;For this battle only, of course.",
            "speak;Marisa;Yes, for this battle only. (Heh, too easy...)",
            "speak;Narumi;Did you say something?",
            "speak;Marisa;Nothin' of the sort, Naruko.",
            "speak;Narumi;*sigh*, where did that nickname even originate from?",
            "speak;Marisa;Beats me. ",
            "multi_remove_portrait;Narumi;Marisa",
            "add_group;Narumi;Narumi;fade;closest",
            "change_team;Narumi;player",
            "autolevel_to;Narumi;10;fixed",
            "has_finished;Marisa",
            "music_fade_back"
        ],
        "nid": "10 NarumiSecret"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Global Housekeeping3",
            "trigger_script;Global Housekeeping2",
            "autolevel_to;Alice;8;fixed",
            "autolevel_to;Alice_Boss_1;17;fixed",
            "",
            "",
            "#Dialogue Starts Here",
            "",
            "music;Fragrant Plants",
            "change_background;Alice's House",
            "transition;open",
            "multi_add_portrait;Marisa;CenterLeft;Reimu;FarLeft;Mima;CenterRight;Kasen;FarRight",
            "",
            "speak;Marisa;Alright, this should be the place.",
            "speak;Mima;Hmm, seems more...open than your residence, don't you think?",
            "speak;Marisa;Alice likes to keep a clean house, kinda easy since she almost never leaves it.",
            "speak;Mima;You seem to have many shut-in friends, don't you?",
            "speak;Marisa;More or less.",
            "speak;Alice;Ah, visitors... a rarity in these parts.",
            "speak;Marisa;Speak of the devil.",
            "remove_portrait;Kasen",
            "add_portrait;Alice;FarRight",
            "expression;Alice;CloseEyes",
            "speak;Alice;Ah, strange people. You'd think they'd read the big \"Do not Disturb\" sign at the door.",
            "speak;Marisa;What are you doing in there that doesn't need disturbing?",
            "expression;Alice;OpenEyes",
            "speak;Alice;Just some housekeeping until some visitors decided to make themselves welcome.",
            "speak;Marisa;When a door has a sign like that, you're not supposed to be cleaning.",
            "speak;Reimu;(Talk about missing the point.);;;thought_bubble",
            "speak;Alice;Anyways, why are you here, Marisa? If it is for tea, I'm afraid guests cannot invite guests.",
            "speak;Marisa;There were some funny folk heading this way, and being the good neighbor I am, I wanted to give you a heads up.",
            "speak;Alice;Now I wouldn't exactly call you a good neighbor.",
            "expression;Mima;CloseEyes",
            "speak;Mima;She went all this way to warn you, and not even a thank you? So sad.",
            "speak;Alice;Wait, who are you? Ugh, I feel really... tired around you for some reason.",
            "speak;Marisa;You too then, huh?",
            "speak;Alice;Pardon?",
            "speak;Marisa;She tends to have that effect on some people.",
            "expression;Mima;OpenEyes",
            "speak;Mima;Just call me Mima~. I'm like any other ghost.",
            "speak;Alice;Definitely *not* like those two at all.",
            "",
            "music_clear",
            "speak;;I hate to cut this conversation short, but I think I have you surrounded.",
            "transition;close",
            "multi_remove_portrait;Marisa;Reimu;Alice;Mima",
            "change_background",
            "center_cursor;15,10",
            "add_unit;Kasen;12,9;immediate",
            "add_unit;Mima;17,10;immediate",
            "transition;open",
            "",
            "wait;1000",
            "move_unit;Alice_Boss_1;15,10;warp",
            "wait;1000",
            "",
            "",
            "multi_add_portrait;Marisa;FarLeft;Alice;CenterLeft;Alice_Boss_1;CenterRight",
            "music;Plastic Mind",
            "expression;Alice_Boss_1;Smile",
            "speak;Alice_Boss_1;Ahahaha, you guys just fell into my trap! I'll have to thank Louise for that later.",
            "speak;Marisa;Trap? I don't think you know how these things work.|This just means we can attack anywhere now.",
            "speak;Alice;I didn't know people were planning a surprise party at my house.|I haven't even prepared any refreshments....",
            "expression;Alice_Boss_1;NoSmile",
            "speak;Alice_Boss_1;You all seem to be awfully calm about this.",
            "speak;Marisa;Well, I can't say this is my first rodeo.",
            "speak;Alice_Boss_1;Whatever. I'll show you humans the true meaning of fear!!",
            "",
            "multi_remove_portrait;Marisa;Alice;Alice_Boss_1",
            "",
            "move_unit;Alice_Boss_1;3,17;warp",
            "wait;1000",
            "",
            "multi_add_portrait;Alice;FarLeft;Kasen;FarRight;Reimu;CenterRight;Marisa;CenterLeft",
            "speak;Kasen;I tried to warn you, Marisa.",
            "expression;Marisa;Smile",
            "speak;Marisa;I dug my own grave, so I can climb out of it.",
            "speak;Reimu;I don't think that's how the saying goes.",
            "speak;Alice;Please wrap up with these tresspassers quickly.|I would really like to get back to my work, now.",
            "expression;Marisa;NoSmile",
            "speak;Marisa;You're saying that like we're supposed to do all the work.",
            "speak;Alice;Aren't you not supposed to leave a job unfinished?",
            "speak;Marisa;Some help would, you know, help though.",
            "speak;Alice;Very well. I have been working on some certain modifications.;;;;;red",
            "speak;Reimu;It better be good. I want to wrap up this fight before lunch.|And *you* will be compensating.",
            "expression;Alice;CloseEyes",
            "speak;Alice;What did I do to deserve this?",
            "speak;Reimu;Every finished job needs payment, right?",
            "",
            "transition;close",
            "remove_unit;Kasen;immediate",
            "remove_unit;Mima;immediate",
            "move_unit;Marisa;19,15;immediate",
            "multi_remove_portrait;Marisa;Reimu;Alice;Kasen",
            "transition;open",
            "trigger_script;START",
            "prep;1;Sealed Gods",
            "speak;;This map's clear bonus is 500 Bonus EXP, with a decrease of 100 BExp per turn you take over 15 turns!;;;hint"
        ],
        "nid": "9 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "9",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 15",
            "give_bexp;500",
            "speak;;You completed the map in 15 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 15 and game.turncount <= 20",
            "give_bexp;{e:500 - ((game.turncount - 15) * 100)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 20",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "",
            "transition;close",
            "music;Skygazer",
            "change_background;Alice's House",
            "multi_add_portrait;Marisa;CenterRight;Alice;FarRight;Alice_Boss;CenterLeft",
            "transition;open",
            "",
            "speak;Alice_Boss;Ah, how are you guys so strong?!",
            "expression;Marisa;Smile",
            "speak;Marisa;Well, the first step is to practice for years.",
            "speak;Alice;You haven't seem to have gotten to that step, have you?",
            "speak;Alice_Boss;Well, whatever. This isn't over, I'll show you!!",
            "remove_portrait;Alice_Boss",
            "wait;500",
            "multi_add_portrait;Reimu;CenterLeft;Mima;FarLeft",
            "expression;Marisa;NoSmile",
            "speak;Marisa;Hmm, looks like she got away.",
            "speak;Reimu;And we didn't even get her name.",
            "speak;Alice;Hmm, she looked... very familiar, but I can't put my finger on it.",
            "speak;Reimu;Maybe it was the hair?",
            "speak;Mima;Qute shockingly, there's a resemblance.",
            "speak;Marisa;Now that I think about it, why didn't we get headaches this time?",
            "speak;Reimu;What are you on to?",
            "speak;Marisa;I dunno, somethin' tells me we've seen her around before,|so why not this time?",
            "speak;Reimu;Whatever she is, I'm thankful for it.|These headaches are starting to get annoying!",
            "speak;Mima;Hmm, it looks like that strange girl went off into that clearing.",
            "speak;Alice;The Netherworld outskirts then. Peculiar.",
            "speak;Marisa;Oh, we were just about to head there anyway!|We could really use those ghosts helping us.",
            "speak;Mima;Well, we can definitely stop by for a chat on the way.|Let's call it a pit stop~.",
            "speak;Marisa;Alright! Let's get going... right after we eat lunch.",
            "expression;Alice;CloseEyes",
            "speak;Alice;How do I even cater to a crowd like this?",
            "speak;Marisa;You should at least know how to *handle* them.|You have all those dolls.",
            "expression;Alice;OpenEyes",
            "speak;Alice;They don't exactly require sustenance, do they?",
            "speak;Marisa;Ah whatever. I'll be back, with some mushrooms!",
            "speak;Mima;I am fond of mushrooms myself.",
            "speak;Reimu;Mushrooms... can't you find any better ingredients?",
            "speak;Marisa;Well, I also got these cool herbs to throw in.",
            "speak;Reimu;...Let's go with the mushrooms.",
            "",
            "end",
            "trigger_script;ENDING",
            "game_var;chaptercount;9",
            "set_next_chapter;Base"
        ],
        "nid": "9 Outro"
    },
    {
        "name": "Warps",
        "trigger": "on_base_convo",
        "level_nid": "5",
        "condition": "unit == 'Warps'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "add_portrait;Marisa;Left",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;FarRight",
            "speak;Marisa;There's always some strange stuff happenin' around here.",
            "speak;Kasen;Yeah. I've noticed recently that there's been warp points springing up in some areas.",
            "speak;Reimu;Warp points?",
            "speak;Kasen;It seems to be some sort of distortion causing these things. I don't know what it is.",
            "speak;Marisa;Personally, I'm always down for a lil' adventure myself!",
            "speak;Kasen;Dangerous, but you're right. We can use these distortions to our advantage.",
            "multi_remove_portrait;Reimu;Kasen;Marisa",
            "give_bexp;25;no_banner",
            "transition;close",
            "change_background",
            "remove_base_convo;Warps",
            "transition;open"
        ],
        "nid": "5 Warps"
    },
    {
        "name": "Breakables",
        "trigger": "on_base_convo",
        "level_nid": "4",
        "condition": "unit == 'Breakables'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "add_portrait;Marisa;Left",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;FarRight",
            "speak;Marisa;Hey y'all!",
            "speak;Reimu;What's up, Marisa?",
            "speak;Marisa;Been thinkin', haven't we been taking awhile on the battlefield?",
            "speak;Reimu;What do you mean?",
            "speak;Marisa;I mean, there's gotta be an easier way to get through the battlefield! A shortcut!",
            "speak;Kasen;Well, there might be some weak spots\u2028in some places we could break down|to get access faster.",
            "speak;Marisa;So...we just need to hit it until it breaks?",
            "speak;Reimu;I like the idea of that.",
            "multi_remove_portrait;Reimu;Kasen;Marisa",
            "give_bexp;25;no_banner",
            "transition;close",
            "change_background",
            "remove_base_convo;Breakables",
            "transition;open"
        ],
        "nid": "4 Breakables"
    },
    {
        "name": "Deathbox",
        "trigger": "on_base_convo",
        "level_nid": "4",
        "condition": "unit == 'Deathbox'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "add_portrait;Marisa;Left",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;FarRight",
            "speak;Kasen;Are you two prepared for the upcoming battle?",
            "speak;Reimu;What's there to prepare for? We'll just blast through the enemy, as always.",
            "speak;Kasen;I wouldn't speak too soon. The front of Eientei looks a bit strange...it feels like|they're trying to lead us into a chokepoint.",
            "speak;Marisa;What makes ya say that?",
            "speak;Kasen;Look at that narrow space. It's perfect for archers to shoot us through.",
            "speak;Reimu;But how would we get around that?",
            "speak;Kasen;There might be a weakness in the walls somewhere...we'll have to see.",
            "multi_remove_portrait;Reimu;Kasen;Marisa",
            "give_bexp;25;no_banner",
            "transition;close",
            "change_background",
            "remove_base_convo;Deathbox",
            "transition;open"
        ],
        "nid": "4 Deathbox"
    },
    {
        "name": "Fatigue",
        "trigger": "on_base_convo",
        "level_nid": "6",
        "condition": "unit == 'Fatigue'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;close",
            "change_background;Camp Tent Interior",
            "transition;open",
            "add_portrait;Reimu;CenterRight",
            "add_portrait;Kasen;CenterLeft",
            "speak;Reimu;Whew...I feel so tired.",
            "speak;Kasen;Must be the fatigue speaking.",
            "speak;Reimu;I'm not that tired. I should be fine.",
            "speak;Kasen;Somehow, you are. But not everybody else.\u2028People build up fatigue over time.|If you don't watch out, they might get\u2028tired and be unable to fight.",
            "speak;Reimu;Weak.",
            "multi_remove_portrait;Kasen,Reimu",
            "give_bexp;25;no_banner",
            "transition;close",
            "change_background",
            "remove_base_convo;Fatigue",
            "transition;open"
        ],
        "nid": "6 Fatigue"
    },
    {
        "name": "DefeatAlicePC98",
        "trigger": "unit_death",
        "level_nid": "9",
        "condition": "unit.nid == \"Alice_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "9 DefeatAlicePC98"
    },
    {
        "name": "DefeatAlicePC98_2",
        "trigger": "unit_death",
        "level_nid": "9",
        "condition": "unit.nid == \"Alice_Boss_2\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "9 DefeatAlicePC98_2"
    },
    {
        "name": "DeathAlice",
        "trigger": "unit_death",
        "level_nid": "9",
        "condition": "unit.nid == \"Alice\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "lose_game"
        ],
        "nid": "9 DeathAlice"
    },
    {
        "name": "SpellAlicePC98",
        "trigger": "combat_end",
        "level_nid": "9",
        "condition": "game.check_dead(\"Alice_Boss_1\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Plastic Mind",
            "change_music;player_battle;Plastic Mind",
            "change_music;enemy_phase;Plastic Mind",
            "change_music;enemy_battle;Plastic Mind",
            "change_music;enemy2_phase;Plastic Mind",
            "change_music;enemy2_battle;Plastic Mind",
            "change_music;other_phase;Plastic Mind",
            "add_portrait;PC-98 Alice;Left",
            "speak;;Grimoire of Alice: Makai Synchrogazer;center;200;hint;;red;;;1;;;;;Warp",
            "speak;PC-98 Alice;The magic granted to me by Makai...face it!",
            "remove_portrait;PC-98 Alice",
            "add_group;AlicePC98Spell;AlicePC98Spell;warp;closest",
            "autolevel_to;Alice_Boss_2;17;fixed",
            "move_cursor;Alice_Boss_2",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('AlicePC98Spell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "9 SpellAlicePC98"
    },
    {
        "name": "DefeatBoss",
        "trigger": "combat_end",
        "level_nid": "9",
        "condition": "game.check_dead(\"Alice_Boss_2\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "9 DefeatBoss"
    },
    {
        "name": "DeathLouise",
        "trigger": "combat_end",
        "level_nid": "8",
        "condition": "unit.nid == 'Louise_Boss'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Louise;Left",
            "expression;Louise;Smile",
            "speak;Louise;Hey, that's not very nice now.|Looks like I'll have to write up a complaint!",
            "remove_portrait;Louise",
            "show_combat_ui"
        ],
        "nid": "8 DeathLouise"
    },
    {
        "name": "DeathLouise_1",
        "trigger": "combat_end",
        "level_nid": "8",
        "condition": "unit.nid == 'Louise_Boss_1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Louise;Left",
            "speak;Louise;Ugh, what terrible service. I'm leaving.",
            "remove_portrait;Louise",
            "show_combat_ui"
        ],
        "nid": "8 DeathLouise_1"
    },
    {
        "name": "MaskReset",
        "trigger": "level_end",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_skill;Kokoro;Mask_Calm;no_banner",
            "remove_skill;Kokoro;Mask_Anger;no_banner",
            "remove_skill;Kokoro;Mask_Sad;no_banner",
            "remove_skill;Kokoro;Mask_Happy;no_banner",
            "remove_skill;Kokoro;Mask_Hope;no_banner",
            "remove_skill;Kokoro;Mask_Hope2;no_banner"
        ],
        "nid": "Global MaskReset"
    },
    {
        "name": "Refresh",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "reset;{unit}"
        ],
        "nid": "Global Refresh"
    },
    {
        "name": "SpellMusic",
        "trigger": "combat_end",
        "level_nid": "1",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "if;v('KagerouSpellMusic') == 0 and v('SekibankiSpellMusic') == 0",
            "change_music;player_phase;Mist Lake",
            "change_music;player_battle;Mist Lake",
            "change_music;enemy_phase;Wayward Springs",
            "change_music;enemy_battle;Wayward Springs",
            "change_music;other_phase;Wayward Springs",
            "change_music;other_battle;Wayward Springs",
            "else",
            "end"
        ],
        "nid": "1 SpellMusic"
    },
    {
        "name": "SpellMusic",
        "trigger": "combat_end",
        "level_nid": "3",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "if;v('RingoSpellMusic') == 0 and v('SeiranSpellMusic') == 0",
            "change_music;player_phase;Nostalgic Blood",
            "change_music;player_battle;Nostalgic Blood",
            "change_music;enemy_phase;Deaf to All but the Song",
            "change_music;enemy_battle;Deaf to All but the Song",
            "else",
            "end"
        ],
        "nid": "3 SpellMusic"
    },
    {
        "name": "WriggleMusic",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Wriggle_Boss\" and unit2.team == 'player' and unit.team == \"enemy\") or (unit2.nid == \"Wriggle_Boss\" and unit.team == 'player' and unit2.team == \"enemy\")",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows"
        ],
        "nid": "2 WriggleMusic"
    },
    {
        "name": "WriggleMusic_1",
        "trigger": "combat_start",
        "level_nid": "2",
        "condition": "(unit.nid == \"Wriggle_Boss_1\" and unit2.team == 'player' and unit.team == \"enemy\") or (unit2.nid == \"Wriggle_Boss_1\" and unit.team == 'player' and unit2.team == \"enemy\")",
        "commands": [],
        "only_once": false,
        "priority": 21,
        "_source": [
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows"
        ],
        "nid": "2 WriggleMusic_1"
    },
    {
        "name": "WriggleMusic2",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "(unit.nid == \"Wriggle_Boss\" and unit2.team == 'player' and unit.team == \"enemy\") or (unit2.nid == \"Wriggle_Boss\" and unit.team == 'player' and unit2.team == \"enemy\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_battle;Nostalgic Blood",
            "change_music;enemy_battle;Deaf to All but the Song"
        ],
        "nid": "2 WriggleMusic2"
    },
    {
        "name": "WriggleMusic2_1",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "(unit.nid == \"Wriggle_Boss_1\" and unit2.team == 'player' and unit.team == \"enemy\") or (unit2.nid == \"Wriggle_Boss_1\" and unit.team == 'player' and unit2.team == \"enemy\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_battle;Nostalgic Blood",
            "change_music;enemy_battle;Deaf to All but the Song"
        ],
        "nid": "2 WriggleMusic2_1"
    },
    {
        "name": "Magithief",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;stolen_shit;item2.nid",
            "inc_game_var;magithief_{v:stolen_shit}",
            "if;v('magithief_{v:stolen_shit}') <= 5",
            "    if;v('magithief_{v:stolen_shit}') != 5",
            "        if;any([x for x in get_item(unit, 'Tabula_Rasa').subitems if x.nid == v('stolen_shit')])",
            "            level_var;stolen_shit_uses;[x.data.get('uses') for x in get_item(unit, 'Tabula_Rasa').subitems if x.nid == v('stolen_shit')][0] + 1",
            "            remove_item_component;{unit1};{v:stolen_shit};uses;recursive",
            "            add_item_component;{unit1};{v:stolen_shit};uses;{v:stolen_shit_uses};recursive",
            "            set_item_uses;{unit1};{v:stolen_shit};{v:stolen_shit_uses};recursive",
            "        else",
            "            add_item_to_multiitem;{unit1};Tabula_Rasa;{v:stolen_shit};no_duplicate",
            "            game_var;stolen_shit;get_subitem(unit, 'Tabula_Rasa', v('stolen_shit')).uid",
            "            modify_item_component;{unit1};{v:stolen_shit};weapon_type;'Anima';recursive",
            "            modify_item_component;{unit1};{v:stolen_shit};weapon_rank;'E';recursive",
            "            remove_item_component;{unit1};{v:stolen_shit};c_uses;recursive",
            "            remove_item_component;{unit1};{v:stolen_shit};uses;recursive",
            "            remove_item_component;{unit1};{v:stolen_shit};prf_unit;recursive",
            "            remove_item_component;{unit1};{v:stolen_shit};prf_class;recursive",
            "            add_item_component;{unit1};{v:stolen_shit};uses;1;recursive",
            "            set_item_uses;{unit1};{v:stolen_shit};1;recursive",
            "        end",
            "    else",
            "        remove_item_from_multiitem;{unit1};Tabula_Rasa;{v:stolen_shit};no_warn",
            "        add_item_to_multiitem;{unit1};Tabula_Rasa;{v:stolen_shit};no_duplicate",
            "        game_var;stolen_shit;get_subitem(unit, 'Tabula_Rasa', v('stolen_shit')).uid",
            "        modify_item_component;{unit1};{v:stolen_shit};weapon_type;'Anima';recursive",
            "        modify_item_component;{unit1};{v:stolen_shit};weapon_rank;'E';recursive",
            "        remove_item_component;{unit1};{v:stolen_shit};c_uses;recursive",
            "        remove_item_component;{unit1};{v:stolen_shit};uses;recursive",
            "        remove_item_component;{unit1};{v:stolen_shit};prf_unit;recursive",
            "        remove_item_component;{unit1};{v:stolen_shit};prf_class;recursive",
            "    end",
            "end"
        ],
        "nid": "Global Magithief"
    },
    {
        "name": "GTFO",
        "trigger": "turn_change",
        "level_nid": "10",
        "condition": "game.turncount == 20",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_cursor;0,11",
            "add_group;GTFO;GTFO;warp",
            "wait;1000",
            "move_cursor;Reimu",
            "add_portrait;Reimu;Left",
            "speak;Reimu;I don't like the look of those guys...let's bounce!",
            "remove_portrait;Reimu"
        ],
        "nid": "10 GTFO"
    },
    {
        "name": "Red_Escape",
        "trigger": "Escape",
        "level_nid": "11",
        "condition": "region.nid == 'Red_Escape'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "remove_unit;{unit}",
            ""
        ],
        "nid": "11 Red_Escape"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "12",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Housekeeping3",
            "trigger_script;Housekeeping1",
            "trigger_script;Housekeeping2",
            "autolevel_to;Sara_Boss;18;fixed;no_warn",
            "autolevel_to;Lyrica;11;fixed;no_warn",
            "autolevel_to;Lunasa;11;fixed;no_warn",
            "autolevel_to;Merlin;11;fixed;no_warn",
            "trigger_script;START",
            "prep;1;Sealed Gods",
            "speak;;This map's clear bonus is 1000 Bonus EXP, with a decrease of 200 BExp per turn you take over 18 turns!;;;hint"
        ],
        "nid": "12 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "12",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 18",
            "give_bexp;1000",
            "speak;;You completed the map in 18 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 18 and game.turncount <= 23",
            "give_bexp;{e:500 - ((game.turncount - 20) * 200)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 23",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "trigger_script;ENDING",
            "game_var;chaptercount;12",
            "set_next_chapter;Base"
        ],
        "nid": "12 Outro"
    },
    {
        "name": "KillCounter",
        "trigger": "combat_end",
        "level_nid": null,
        "condition": "unit1.nid == 'Rinnosuke' or unit2.nid == 'Rinnosuke'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Global KillCounter"
    },
    {
        "name": "SpellSara",
        "trigger": "combat_end",
        "level_nid": "12",
        "condition": "game.check_dead(\"Sara_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Vanishing Dream",
            "change_music;player_battle;Vanishing Dream",
            "change_music;enemy_phase;Vanishing Dream",
            "change_music;enemy_battle;Vanishing Dream",
            "change_music;enemy2_phase;Vanishing Dream",
            "change_music;enemy2_battle;Vanishing Dream",
            "add_portrait;Sara;Left",
            "speak;;Lockdown Zone!;center;90;hint;;red;;;1;;;;;Warp",
            "speak;Sara;Not a single step forward!",
            "remove_portrait;Sara",
            "add_group;SaraSpell;SaraSpell;warp;closest",
            "autolevel_to;Sara_Boss_1;18;fixed",
            "move_cursor;Sara_Boss_1",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('SaraSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "12 SpellSara"
    },
    {
        "name": "SpellKana",
        "trigger": "combat_end",
        "level_nid": "12",
        "condition": "game.check_dead(\"Kana_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Vanishing Dream",
            "change_music;player_battle;Vanishing Dream",
            "change_music;enemy_phase;Vanishing Dream",
            "change_music;enemy_battle;Vanishing Dream",
            "change_music;enemy2_phase;Vanishing Dream",
            "change_music;enemy2_battle;Vanishing Dream",
            "add_portrait;Kana;Left",
            "speak;;Lockdown Zone!;center;90;hint;;red;;;1;;;;;Warp",
            "speak;Sara;Not a single step forward!",
            "remove_portrait;Kana",
            "add_group;KanaSpell;KanaSpell;warp;closest",
            "autolevel_to;Kana_Boss_1;18;fixed",
            "move_cursor;Kana_Boss_1",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('KanaSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "12 SpellKana"
    },
    {
        "name": "KusanagiKills",
        "trigger": null,
        "level_nid": null,
        "condition": "unit2.get_hp() == 0",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit2.get_hp() == 0 and {v:KusanagiKills} < 4",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} == 4",
            "remove_item;{unit};Kusanagi0;no_banner",
            "add_portrait;Rinnosuke;Left",
            "speak;Rinnosuke;The Kusanagi...I can feel its power...!",
            "remove_portrait;Rinnosuke",
            "give_item;{unit};Kusanagi1",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} > 4 and {v:KusanagiKills} < 14",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} == 14 ",
            "remove_item;{unit};Kusanagi1;no_banner",
            "add_portrait;Rinnosuke;Left",
            "speak;Rinnosuke;The Kusanagi's power grows more...",
            "remove_portrait;Rinnosuke",
            "give_item;{unit};Kusanagi2",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} > 14 and {v:KusanagiKills} < 24",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} == 24",
            "remove_item;{unit};Kusanagi2;no_banner",
            "add_portrait;Rinnosuke;Left",
            "speak;Rinnosuke;What's this?! A new breakthrough?!",
            "remove_portrait;Rinnosuke",
            "give_item;{unit};Kusanagi3",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} > 24 and {v:KusanagiKills} < 49",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} == 49",
            "remove_item;{unit};Kusanagi3;no_banner",
            "add_portrait;Rinnosuke;Left",
            "speak;Rinnosuke;The Kusanagi...it's whole again!",
            "remove_portrait;Rinnosuke",
            "give_item;{unit};Tasouken",
            "inc_game_var;KusanagiKills;1",
            "elif;unit2.get_hp() == 0 and {v:KusanagiKills} > 49",
            "inc_game_var;KusanagiKills;1",
            "end"
        ],
        "nid": "Global KusanagiKills"
    },
    {
        "name": "FUCK YOU RAINLASH",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "game_var;item_exception_list;['Tabula_Rasa']",
            "for;PARTY_UNIT;[u.nid for u in game.get_all_units_in_party()]",
            "    for;SKILL_ID;[s.nid for s in u('{PARTY_UNIT}').skills if not s.components.get('global')]",
            "        remove_skill;{PARTY_UNIT};{SKILL_ID};no_banner",
            "        if;not has_skill('{PARTY_UNIT}', '{SKILL_ID}')",
            "            give_skill;{PARTY_UNIT};{SKILL_ID};no_banner",
            "        end",
            "    endf",
            "    for;ITEM_ID;[i.uid for i in u('{PARTY_UNIT}').items if i.nid not in v('item_exception_list')]",
            "        level_var;temp_item;game.get_item({ITEM_ID}).nid",
            "        #check uses",
            "        level_var;temp_uses;game.get_item({ITEM_ID}).data.get('c_uses')",
            "        if;v('temp_uses') is None",
            "            level_var;temp_uses;game.get_item({ITEM_ID}).data.get('uses')",
            "        end",
            "        remove_item;{PARTY_UNIT};{ITEM_ID};;no_banner",
            "        give_item;{PARTY_UNIT};{v:temp_item};;no_banner",
            "        level_var;temp_latest;[i.uid for i in u('{PARTY_UNIT}').items if i.uid == max([j.uid for j in u('{PARTY_UNIT}').items])][0]",
            "        #set uses",
            "        if;v('temp_uses') is not None",
            "            set_item_uses;{PARTY_UNIT};{v:temp_latest};{v:temp_uses}",
            "        end",
            "    endf",
            "    give_skill;{PARTY_UNIT};Weight_Addendum;;no_banner",
            "endf"
        ],
        "nid": "Global FUCK YOU RAINLASH"
    },
    {
        "name": "MarisaGossip",
        "trigger": null,
        "level_nid": "Base",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;{v:chaptercount} == 0",
            "add_portrait;Marisa;Left",
            "speak;Marisa;I dunno bout' you Reimu, but I think you'll definitely need to do some heavy liftin' with|yer Sealing Needles. Those things are potent!",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 1",
            "add_portrait;Marisa;Left",
            "speak;Marisa;I hear that immortal girl...uh, Mokou, sometimes gives away Torch tomes to those who need it.|Quite helpful! I should get one or ten fer myself!",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 2",
            "add_portrait;Marisa;Left",
            "speak;Marisa;Remember those \"Eagle Ravi\" guys from the moon incident? I hear they're actually quite scary...might even warp us around n' stuff!",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 3",
            "add_portrait;Marisa;Left",
            "speak;Marisa;That Inaba...the small and lucky one. She's quite scary, ain't she, with all that luck manipulation. Anythin' could happen if you face her! I might not even be lucky enough for that!",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 4",
            "add_portrait;Marisa;Left",
            "speak;Marisa;Eirin's assistant can be a terror on the battlefield...she might drive everybody crazy, if given the chance! We should probably bring somethin' along to cure ourselves of negative statuses.",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 5",
            "add_portrait;Marisa;Left",
            "speak;Marisa;With all this darkness, we might need to bring more torches to keep our eyes peeled for enemies! Puttin' up our most durable fighters to scout might work too.",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 6",
            "add_portrait;Marisa;Left",
            "speak;Marisa;Forest of Magic has some nasty trees that'll poison ya' if you don't keep yer eyes out. Undead love gatherin' round them for that reason, cause they ain't affected by all that.",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 7",
            "add_portrait;Marisa;Left",
            "speak;Marisa;I dunno bout' you Reimu, but I think you'll definitely need to do some heavy liftin' with yer|Sealing Needles. Those things are potent!",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 8",
            "add_portrait;Marisa;Left",
            "speak;Marisa;I dunno bout' you Reimu, but I think you'll definitely need to do some heavy liftin' with yer|Sealing Needles. Those things are potent!",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 9",
            "add_portrait;Marisa;Left",
            "speak;Marisa;I dunno bout' you Reimu, but I think you'll definitely need to do some heavy liftin' with yer|Sealing Needles. Those things are potent!",
            "remove_portrait;Marisa",
            "elif;{v:chaptercount} == 10",
            "add_portrait;Marisa;Left",
            "speak;Marisa;I dunno bout' you Reimu, but I think you'll definitely need to do some heavy liftin' with yer|Sealing Needles. Those things are potent!",
            "remove_portrait;Marisa",
            "end"
        ],
        "nid": "Base MarisaGossip"
    },
    {
        "name": "Secret!",
        "trigger": "Secret!",
        "level_nid": "0",
        "condition": "region.nid == 'Freebie'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "transition;Close",
            "change_background;HakureiShrine",
            "transition;Open",
            "add_portrait;{unit};Left",
            "speak;{unit};Hm? What's this?",
            "remove_portrait;{unit}",
            "give_item;{unit};Stone_Bowl",
            "change_background",
            "has_traded;{unit}"
        ],
        "nid": "0 Secret!"
    },
    {
        "name": "SpellMai",
        "trigger": "turn_change",
        "level_nid": "10",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "move_cursor;Mai_Boss",
            "music_clear",
            "flicker_cursor;Mai_Boss",
            "add_portrait;Mai_Boss;Left",
            "speak;Mai_Boss;Blizzard Sign: Brave Storm;center;145;hint;;red;;;1;;;;;Warp;no_talk",
            "speak;Mai_Boss;...{tgm}Freeze to death.;no_talk",
            "sound;twister;0.8",
            "remove_portrait;Mai_Boss",
            "give_skill;Mai_Boss;BlizzardAura;;no_banner",
            "remove_skill;Mai_Boss;Blizzard;;no_banner",
            "add_weather;snow",
            "add_weather;night",
            "music;Deep Mountain",
            "wait;2000",
            "move_cursor;Reimu",
            "flicker_cursor;Reimu",
            "add_portrait;Reimu;Left",
            "speak;Reimu;Brrr...! Who set up this damn blizzard?! We're gonna need to be more careful in a fight...",
            "remove_portrait;Reimu",
            ""
        ],
        "nid": "10 SpellMai"
    },
    {
        "name": "SpellYumeko",
        "trigger": "combat_end",
        "level_nid": "10",
        "condition": "game.check_dead(\"Yumeko_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Plastic Mind",
            "change_music;player_battle;Plastic Mind",
            "change_music;enemy_phase;Plastic Mind",
            "change_music;enemy_battle;Plastic Mind",
            "change_music;enemy2_phase;Plastic Mind",
            "change_music;enemy2_battle;Plastic Mind",
            "music;Plastic Mind",
            "add_portrait;Yumeko_Boss;Left",
            "speak;;Construct Sign: Dream Slicer;center;155;hint;;red;;;1;;;;;Warp",
            "speak;Yumeko_Boss;Tch, I'm not done just yet~!",
            "remove_portrait;Yumeko_Boss",
            "add_group;YumekoSpell;YumekoSpell;warp;closest",
            "autolevel_to;Yumeko_Boss_1;17;fixed",
            "move_cursor;Yumeko_Boss_1",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('YumekoSpell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "10 SpellYumeko"
    },
    {
        "name": "YumekoSpellCap",
        "trigger": "combat_end",
        "level_nid": "10",
        "condition": "game.check_dead(\"Yumeko_Boss_1\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "give_bexp;500;Reimu",
            "change_music;player_phase;Deep Mountain",
            "change_music;player_battle;Deep Mountain",
            "change_music;enemy_phase;Maple Wise",
            "change_music;enemy_battle;Maple Wise",
            "change_music;enemy2_phase;Maple Wise",
            "change_music;enemy2_battle;Maple Wise"
        ],
        "nid": "10 YumekoSpellCap"
    },
    {
        "name": "Wall",
        "trigger": "unit_death",
        "level_nid": "11",
        "condition": "unit.nid == 'Wall'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "show_layer;Wall"
        ],
        "nid": "11 Wall"
    },
    {
        "name": "Door1",
        "trigger": "Door1",
        "level_nid": "11",
        "condition": "region.nid == 'Door1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "show_layer;Door1",
            "has_finished;{unit}"
        ],
        "nid": "11 Door1"
    },
    {
        "name": "Door2",
        "trigger": "Door2",
        "level_nid": "11",
        "condition": "region.nid == 'Door2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "show_layer;Door2",
            "has_finished;{unit}"
        ],
        "nid": "11 Door2"
    },
    {
        "name": "Turn15",
        "trigger": "turn_change",
        "level_nid": "4",
        "condition": "game.turncount == 15",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Tewi;Left",
            "speak;Tewi;Tch, these guys are boring. Hey, bunnies! Let's cause some chaos!",
            "remove_portrait;Tewi",
            "add_group;GetFucked;GetFucked;warp;closest",
            "move_cursor;174",
            "flicker_cursor;174",
            "move_cursor;175",
            "flicker_cursor;175",
            "move_cursor;176",
            "flicker_cursor;176",
            "move_cursor;177",
            "flicker_cursor;177"
        ],
        "nid": "4 Turn15"
    },
    {
        "name": "Turn15",
        "trigger": "turn_change",
        "level_nid": "5",
        "condition": "game.turncount == 15",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Eirin;Left",
            "add_portrait;Tewi;Right",
            "speak;Eirin;What is taking Reisen so long to deal with these intruders?",
            "speak;Tewi;Heh, she's probably having trouble. ",
            "speak;Eirin;It seems I will have to deal with this myself.",
            "remove_portrait;Eirin",
            "remove_portrait;Tewi",
            "add_group;OhShitEirin;OhShitEirin;fade;closest",
            "move_cursor;Eirin_Boss",
            "flicker_cursor;Eirin_Boss",
            "autolevel_to;Eirin_Boss;40"
        ],
        "nid": "5 Turn15"
    },
    {
        "name": "MystiaSpell",
        "trigger": "turn_change",
        "level_nid": "2",
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Mystia;Left",
            "speak;;Evening Sign \"Darting Nightjars\";center;170;hint;;red;;;1;;;;;Warp",
            "speak;Mystia;Do you feel blinded? Alone? Fear the grasp of the dark!",
            "remove_portrait;Mystia",
            "give_skill;Mystia_Boss;NightjarAura;;no_warn",
            "add_portrait;Reimu;Right",
            "speak;Reimu;Ugh...watch out everyone, the enemy's going to try and take advantage of our weakness!",
            "remove_portrait;Reimu"
        ],
        "nid": "2 MystiaSpell"
    },
    {
        "name": "WriggleSpell",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "game.check_dead(\"Wriggle_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 21,
        "_source": [
            "add_portrait;Wriggle;Left",
            "speak;;Carapace Sign \"Hercules Beetle\";center;170;hint;;red;;;1;;;;;Warp",
            "speak;Wriggle;I feel...much stronger now! Come to me, insects of the woods!",
            "remove_portrait;Wriggle",
            "add_group;WriggleSpell;WriggleSpell;warp;push",
            "autolevel_to;Wriggle_Boss_1;3;fixed",
            "for;Spell;game.level.unit_groups.get('WriggleSpell').units",
            "    has_finished;{Spell}"
        ],
        "nid": "2 WriggleSpell"
    },
    {
        "name": "MystiaDefeat",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "game.check_dead(\"Mystia_Boss\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "give_bexp;100;Reimu;;no_banner"
        ],
        "nid": "2 MystiaDefeat"
    },
    {
        "name": "END",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "has_finished;{unit}"
        ],
        "nid": "Global END"
    },
    {
        "name": "DefeatWriggle1",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "game.check_dead(\"Wriggle_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "2 DefeatWriggle1"
    },
    {
        "name": "Commander1",
        "trigger": "combat_end",
        "level_nid": "12",
        "condition": "game.check_dead(\"Commander1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "show_layer;Hidden1",
            "add_group;Hidden1;Hidden1;fade;closest"
        ],
        "nid": "12 Commander1"
    },
    {
        "name": "Commander2",
        "trigger": "combat_end",
        "level_nid": "12",
        "condition": "game.check_dead(\"Commander2\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "show_layer;Hidden2",
            "add_group;Hidden2;Hidden2;fade;closest"
        ],
        "nid": "12 Commander2"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Housekeeping3",
            "trigger_script;Housekeeping1",
            "trigger_script;Housekeeping2",
            "trigger_script;START",
            "autolevel_to;Youmu_Boss;15;fixed;no_warn",
            "prep;1;Sealed Gods",
            "speak;;This map's clear bonus is 1000 Bonus EXP, with a decrease of 200 BExp per turn you take over 18 turns!;;;hint"
        ],
        "nid": "13 Intro"
    },
    {
        "name": "New Event",
        "trigger": "level_start",
        "level_nid": "Backburner",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "show_layer;CherryTrees",
            "show_layer;New Layer"
        ],
        "nid": "Backburner New Event"
    },
    {
        "name": "Shift1",
        "trigger": null,
        "level_nid": "5",
        "condition": "game.turncount % 3 == 0 ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "5 Shift1"
    },
    {
        "name": "Shift2",
        "trigger": null,
        "level_nid": "5",
        "condition": "game.turncount % 5 == 0 ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "5 Shift2"
    },
    {
        "name": "Switch1",
        "trigger": "Switch!",
        "level_nid": "12",
        "condition": "region.nid == 'Switch1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "inc_level_var;Switches;1",
            "if;{v:Switches} == 2",
            "show_layer;Hidden3",
            "add_group;Hidden3;Hidden3;warp",
            "autolevel_to;Kana_Boss;20;fixed",
            "else",
            "end"
        ],
        "nid": "12 Switch1"
    },
    {
        "name": "Switch2",
        "trigger": "Switch!",
        "level_nid": "12",
        "condition": "region.nid == 'Switch2'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "inc_level_var;Switches;1",
            "if;{v:Switches} == 2",
            "show_layer;Hidden3",
            "add_group;Hidden3;Hidden3;warp",
            "autolevel_to;Kana_Boss;20;fixed",
            "else",
            "end"
        ],
        "nid": "12 Switch2"
    },
    {
        "name": "SpellAlice",
        "trigger": "combat_end",
        "level_nid": "11",
        "condition": "game.check_dead(\"Alice_Boss_3\")",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Plastic Mind",
            "change_music;player_battle;Plastic Mind",
            "change_music;enemy_phase;Plastic Mind",
            "change_music;enemy_battle;Plastic Mind",
            "change_music;enemy2_phase;Plastic Mind",
            "change_music;enemy2_battle;Plastic Mind",
            "add_portrait;Alice_Boss;Left",
            "speak;;Triad of Magic;center;155;hint;;red;;;1;;;;;Warp",
            "speak;Alice_Boss;Face a perfected form of magic!",
            "remove_portrait;Alice_Boss",
            "add_group;Alice2Spell;Alice2Spell;warp;closest",
            "autolevel_to;Alice_Boss_4;19;fixed",
            "move_cursor;Alice_Boss_4",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('Alice2Spell').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "11 SpellAlice"
    },
    {
        "name": "YoumuSpell1",
        "trigger": "combat_end",
        "level_nid": "13",
        "condition": "game.check_dead(\"Youmu_Boss\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Youmu;Left",
            "speak;;Lockdown Zone!;center;90;hint;;red;;;1;;;;;Warp",
            "speak;Youmu;Not a single step forward!",
            "remove_portrait;Youmu",
            "add_group;YoumuPhase2;YoumuPhase2;warp;closest",
            "autolevel_to;Youmu_Boss_1;18;fixed",
            "move_cursor;Youmu_Boss_1",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('YoumuPhase2').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "13 YoumuSpell1"
    },
    {
        "name": "YoumuSpell2",
        "trigger": "combat_end",
        "level_nid": "13",
        "condition": "game.check_dead(\"Youmu_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Youmu;Left",
            "speak;;Lockdown Zone!;center;90;hint;;red;;;1;;;;;Warp",
            "speak;Youmu;Not a single step forward!",
            "remove_portrait;Youmu",
            "add_group;YoumuPhase3;YoumuPhase3;warp;closest",
            "autolevel_to;Youmu_Boss_2;18;fixed",
            "move_cursor;Youmu_Boss_2",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('YoumuPhase3').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "13 YoumuSpell2"
    },
    {
        "name": "YoumuSpell3",
        "trigger": "combat_end",
        "level_nid": "13",
        "condition": "game.check_dead(\"Youmu_Boss_2\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Youmu;Left",
            "speak;;Lockdown Zone!;center;90;hint;;red;;;1;;;;;Warp",
            "speak;Youmu;Not a single step forward!",
            "remove_portrait;Youmu",
            "add_group;YoumuPhase4;YoumuPhase4;warp;closest",
            "autolevel_to;Youmu_Boss_3;20;fixed",
            "move_cursor;Youmu_Boss_3",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('YoumuPhase4').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "13 YoumuSpell3"
    },
    {
        "name": "DefeatYoumu",
        "trigger": "combat_end",
        "level_nid": "13",
        "condition": "game.check_dead(\"Youmu_Boss_3\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "win_game"
        ],
        "nid": "13 DefeatYoumu"
    },
    {
        "name": "Kyouko",
        "trigger": "on_talk",
        "level_nid": "Base",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kyouko'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "music;Comrades",
            "table;GoldDisplay;str(game.get_money())+'G';Funds;Alignment=top_right;RowWidth=60;expression",
            "add_portrait;Kyouko;Left;ExpressionList=Smile",
            "add_portrait;Reimu;Right",
            "choice;Hire;Hire for 5000 gold?;Yes,No;backable",
            "if;'{v:Hire}' == 'Yes' and game.get_money() >= 5000",
            "give_money;-5000;Reimu;no_banner",
            "change_team;Kyouko;player",
            "remove_talk;Reimu;Kyouko",
            "multi_remove_portrait;Reimu;Kyouko",
            "sound;Item",
            "alert;Kyouko joined the party!",
            "add_lore;Kyouko",
            "elif;'{v:Hire}' == 'Yes' and game.get_money() < 5000",
            "finish",
            "elif;'{v:Hire}' == 'No'",
            "end"
        ],
        "nid": "Base Kyouko"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "13",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;game.turncount <= 18",
            "give_bexp;1000",
            "speak;;You completed the map in 18 or less turns! You got the full reward!;;;hint",
            "elif;game.turncount > 18 and game.turncount <= 23",
            "give_bexp;{e:500 - ((game.turncount - 20) * 200)}",
            "speak;;Unfortunately, you completed the map in more than 15 turns, so your reward will be reduced accordingly.;;;hint",
            "elif;game.turncount > 23",
            "speak;;Lmao skill issue;;;hint",
            "end",
            "trigger_script;ENDING",
            "game_var;chaptercount;13",
            "set_next_chapter;Base"
        ],
        "nid": "13 Outro"
    },
    {
        "name": "DeathTewi",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Tewi'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Tewi;FarRight",
            "speak;Tewi;Rats, didn't think my luck would run out today!",
            "expression;Tewi;CloseEyes",
            "remove_portrait;Tewi"
        ],
        "nid": "Global DeathTewi"
    },
    {
        "name": "DeathSeiran",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Seiran'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Seiran;FarRight",
            "speak;Seiran;*Sob* I knew I was way in over my head.",
            "expression;Sunny;CloseEyes",
            "remove_portrait;Seiran"
        ],
        "nid": "Global DeathSeiran"
    },
    {
        "name": "DeathRingo",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Ringo'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Ringo;FarRight",
            "speak;Ringo;Yep, I'm out of here. I need some dango.",
            "expression;Ringo;CloseEyes",
            "remove_portrait;Ringo"
        ],
        "nid": "Global DeathRingo"
    },
    {
        "name": "DeathYoumu",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Youmu'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Youmu;FarRight",
            "speak;Youmu;Not enough... forgive me, Lady Yuyuko.",
            "expression;Youmu;CloseEyes",
            "remove_portrait;Youmu"
        ],
        "nid": "Global DeathYoumu"
    },
    {
        "name": "DeathReisen",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Reisen",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Reisen;FarRight",
            "speak;Reisen;This is too much for me to handle. I'm falling back!",
            "expression;Reisen;CloseEyes",
            "remove_portrait;Reisen"
        ],
        "nid": "Global DeathReisen"
    },
    {
        "name": "DeathKaguya",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit.nid == 'Kaguya'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Kaguya;FarRight",
            "expression;Kaguya;Smile",
            "speak;Kaguya;Ohohoho, you got me. Good one.",
            "expression;Kaguya;CloseEyes,Smile",
            "remove_portrait;Kaguya"
        ],
        "nid": "Global DeathKaguya"
    },
    {
        "name": "Door1_1",
        "trigger": "Door",
        "level_nid": "Backburner",
        "condition": "region.nid == 'Door1_1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "move_unit;{unit};15,16;warp;giveup",
            "has_finished;{unit}",
            "reset;{unit}",
            "for;FILLER;range(1,{e:",
            "give_skill;{unit};Exhausted;no_banner"
        ],
        "nid": "Backburner Door1_1"
    },
    {
        "name": "TalkMarisa",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Marisa'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Reimu;Right;Marisa;CenterLeft",
            "enable_supports;t",
            "speak;Marisa;Hmm...",
            "speak;Reimu;Huh, what's up with you?",
            "speak;Marisa;Still bogglin' my head over who those guys from before were.",
            "speak;Reimu;Definitely not some nobodies, that's for sure...",
            "bop_portrait;Reimu",
            "speak;Reimu;*Yawn*...Ah, I can't think tonight.|Pass me that, will ya?",
            "speak;Marisa;Yeah, sure.",
            "move_portrait;Marisa;CenterRight",
            "wait;100",
            "bop_portrait;Marisa",
            "wait;200",
            "move_portrait;Marisa;CenterLeft",
            "speak;Marisa;You really seem calm tonight.|Must be the atmosphere.",
            "expression;Reimu;Smile",
            "speak;Reimu;Well, you know what they say.|Work hard, play hard.|And I can't be bothered to work anymore.",
            "speak;Marisa;Like you do anything other than sweeping.",
            "speak;Reimu;We just beat up some bad guys, I think that qualifies as \"work hard\".",
            "expression;Marisa;Smile",
            "speak;Marisa;Can't argue with that. Guess we got our quota in for the day, anyway.",
            "speak;Reimu;Now for the \"play hard\". Bottoms up!",
            "bop_portrait;Reimu",
            "bop_portrait;Marisa",
            "speak;Reimu;Wow, this stuff is great.",
            "speak;Marisa;Definitely beats what you have back at the shrine, that's for sure.",
            "expression;Reimu;NoSmile",
            "speak;Reimu;Just this once, I'm gonna ignore that.",
            "",
            "unlock_support_rank;Reimu;Marisa;Love",
            "",
            "multi_remove_portrait;Reimu;Marisa",
            "remove_talk;Reimu;Marisa",
            "",
            "",
            "# Just a Test. Making sure I can work these events properly"
        ],
        "nid": "7 TalkMarisa"
    },
    {
        "name": "Village1",
        "trigger": "Visit",
        "level_nid": "8",
        "condition": "region.nid == 'Village1'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "8 Village1"
    },
    {
        "name": "TalkMokou",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Mokou'",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "multi_add_portrait;Reimu;CenterLeft;Mokou;CenterRight;Kaguya;FarRight",
            "",
            "speak;Mokou;Ah, the shrine maiden. What brings you here?",
            "speak;Reimu;What are you two up to this time?",
            "expression;Kaguya;Smile",
            "speak;Kaguya;Fufufu~ You're just in time for our annual bout!",
            "speak;Reimu;Don't you two ever get bored of killing each other?",
            "speak;Mokou;We shake things up by eating out about every three days.",
            "speak;Kaguya;Usually after, we shop for local curios at the village...|such fascinating gizmos that one secondhand shop sells.",
            "speak;Mokou;Say, shrine maiden, are you interested in testing your luck tonight?",
            "speak;Reimu;What are you getting at?",
            "",
            "",
            "remove_talk;Reimu;Mokou"
        ],
        "nid": "7 TalkMokou"
    },
    {
        "name": "TalkWriggle",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Wriggle'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkWriggle"
    },
    {
        "name": "TalkLetty",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Letty'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkLetty"
    },
    {
        "name": "TalkCirno",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Cirno'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkCirno"
    },
    {
        "name": "TalkDaiyousei",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Daiyousei'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkDaiyousei"
    },
    {
        "name": "TalkRumia",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Rumia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkRumia"
    },
    {
        "name": "TalkRin",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Rin'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkRin"
    },
    {
        "name": "TalkKagerou",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kagerou'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkKagerou"
    },
    {
        "name": "TalkReisen",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Reisen'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkReisen"
    },
    {
        "name": "TalkTewi",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Tewi'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_item;{unit};Goddess_Icon"
        ],
        "nid": "7 TalkTewi"
    },
    {
        "name": "TalkAunn",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Aunn'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkAunn"
    },
    {
        "name": "TalkKokoro",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kokoro'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkKokoro"
    },
    {
        "name": "TalkRinnosuke",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Rinnosuke'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkRinnosuke"
    },
    {
        "name": "TalkKosuzu",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kosuzu'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkKosuzu"
    },
    {
        "name": "TalkRemilia",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Remilia'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkRemilia"
    },
    {
        "name": "TalkTokiko",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Tokiko'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkTokiko"
    },
    {
        "name": "TalkKasen",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kasen'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkKasen"
    },
    {
        "name": "TalkSuika",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Suika'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkSuika"
    },
    {
        "name": "TalkStar",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Star'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkStar"
    },
    {
        "name": "TalkLuna",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Luna'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkLuna"
    },
    {
        "name": "TalkSunny",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Sunny'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkSunny"
    },
    {
        "name": "Snag",
        "trigger": "unit_death",
        "level_nid": "9",
        "condition": "unit.nid == 'Snag1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "map_anim;Snag;{position}",
            "show_layer;Snag1"
        ],
        "nid": "9 Snag"
    },
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "chapter_title",
            "trigger_script;Housekeeping3",
            "trigger_script;Housekeeping1",
            "trigger_script;Housekeeping2",
            "trigger_script;START",
            "autolevel_to;Youmu;13",
            "autolevel_to;Yuyuko;18",
            "autolevel_to;Shinki_Boss;22",
            "autolevel_to;Mima_Boss;20",
            "autolevel_to;Mai_Boss_1;18",
            "autolevel_to;Yuki_Boss;18",
            "prep;1;Sealed Gods"
        ],
        "nid": "14 Intro"
    },
    {
        "name": "Outro",
        "trigger": "level_end",
        "level_nid": "14",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "14 Outro"
    },
    {
        "name": "TalkKaguya",
        "trigger": "on_talk",
        "level_nid": "7",
        "condition": "unit.nid == 'Reimu' and unit2.nid == 'Kaguya'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "7 TalkKaguya"
    },
    {
        "name": "Chest1",
        "trigger": "Chest",
        "level_nid": "14",
        "condition": "region.nid == 'Chest1'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Forged_Shield",
            "has_finished;{unit}"
        ],
        "nid": "14 Chest1"
    },
    {
        "name": "Chest2",
        "trigger": "Chest",
        "level_nid": "14",
        "condition": "region.nid == 'Chest2'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Yukkuri_M",
            "has_finished;{unit}"
        ],
        "nid": "14 Chest2"
    },
    {
        "name": "Chest3",
        "trigger": "Chest",
        "level_nid": "14",
        "condition": "region.nid == 'Chest3'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "unlock;{unit}",
            "show_layer;Chest1",
            "give_item;{unit};Persecutor",
            "has_finished;{unit}"
        ],
        "nid": "14 Chest3"
    },
    {
        "name": "TriangleAttack",
        "trigger": "combat_start",
        "level_nid": null,
        "condition": "unit1.nid in [\"Sunny\",\"Luna\",\"Star\"]",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;len([x.nid for x in get_allies_within_distance(unit2.position) if has_skill(x, 'Staking_Your_Life_on_a_Prank')]) == 3;",
            "    if;unit1.nid == \"Star\";",
            "        add_portrait;Star;Left;normal;Smile",
            "        speak;Star;Looks like it's a good time for this!\u2028Sunny, Luna, let's go!",
            "        remove_portrait;Star",
            "    elif;unit1.nid == \"Luna\";",
            "        add_portrait;Luna;Left;normal;NoSmile",
            "        speak;Luna;Huh? We're doing this now? Alright then, here goes...",
            "        remove_portrait;Luna",
            "    elif;unit1.nid == \"Sunny\";",
            "    end",
            "end"
        ],
        "nid": "Global TriangleAttack"
    },
    {
        "name": "Soul Gather",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit.get_hp() == 0",
            "inc_game_var;SoulCharge;1",
            "end"
        ],
        "nid": "Global Soul Gather"
    },
    {
        "name": "FightChiyuri/Marisa",
        "trigger": "combat_start",
        "level_nid": "6",
        "condition": "unit1.nid == \"Chiyuri_Boss\" and unit2.nid == \"Marisa\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Strawberry Crisis",
            "add_portrait;Chiyuri;Left",
            "expression;Chiyuri;Smile",
            "speak;Chiyuri;Well lookie here. Been a while, hasn't it?",
            "add_portrait;Marisa;Right",
            "speak;Marisa;Phew, I think I'm off my game today...|I don't really remember seeing you around.",
            "expression;Chiyuri;NoSmile",
            "speak;Chiyuri;Ah, whatever. Let's just do this already.",
            "speak;Marisa;Must be one of those clingy types.;;;thought_bubble",
            "multi_remove_portrait;Chiyuri;Marisa",
            "show_combat_ui"
        ],
        "nid": "6 FightChiyuri/Marisa"
    },
    {
        "name": "DeathMystia",
        "trigger": "combat_death",
        "level_nid": "2",
        "condition": "unit.nid == \"Mystia_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Mystia;Left",
            "speak;Mystia;Ah, I knew I should've brought a weapon.",
            "expression;Mystia;CloseEyes",
            "remove_portrait;Mystia",
            "show_combat_ui"
        ],
        "nid": "2 DeathMystia"
    },
    {
        "name": "DeathWriggle",
        "trigger": "unit_death",
        "level_nid": "2",
        "condition": "unit.nid == \"Wriggle_Boss\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Wriggle;Left",
            "speak;Wriggle;You really think this is going to keep me down? Watch this!",
            "remove_portrait;Wriggle",
            "show_combat_ui"
        ],
        "nid": "2 DeathWriggle"
    },
    {
        "name": "DeathWriggle1",
        "trigger": "unit_death",
        "level_nid": "2",
        "condition": "unit.nid == \"Wriggle_Boss_1\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "add_portrait;Wriggle;Left",
            "speak;Wriggle;Stomped...out.",
            "expression;Wriggle;CloseEyes",
            "remove_portrait;Wriggle",
            "show_combat_ui"
        ],
        "nid": "2 DeathWriggle1"
    },
    {
        "name": "Turn2",
        "trigger": "turn_change",
        "level_nid": "0",
        "condition": "game.turncount == 2",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Player;Player;fade;closest",
            "autolevel_to;Kasen;10;fixed"
        ],
        "nid": "0 Turn2"
    },
    {
        "name": "Turn3",
        "trigger": "turn_change",
        "level_nid": "0",
        "condition": "game.turncount == 3",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn3;Turn3;fade;closest",
            ""
        ],
        "nid": "0 Turn3"
    },
    {
        "name": "Turn5",
        "trigger": "turn_change",
        "level_nid": "0",
        "condition": "game.turncount == 5",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_group;Turn5;Turn5;fade;closest",
            ""
        ],
        "nid": "0 Turn5"
    },
    {
        "name": "MimaSpell",
        "trigger": "combat_end",
        "level_nid": "14",
        "condition": "game.check_dead(\"Mima_Boss_1\") ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Mima;Left",
            "speak;;Orreries Solar System;center;125;hint;;red;;;1;;;;;Warp",
            "speak;Mima;Can you handle this?",
            "remove_portrait;Mima",
            "add_group;Mima;Mima;warp;closest",
            "autolevel_to;Mima;20;fixed",
            "move_cursor;Mima",
            "for;Spell;game.level.unit_groups.get('Mima').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "14 MimaSpell"
    },
    {
        "name": "ShinkiSpell1",
        "trigger": "combat_end",
        "level_nid": "14",
        "condition": "game.check_dead(\"Shinki_Boss\") ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Shinki;CenterLeft",
            "add_portrait;Yumeko;FarLeft",
            "speak;;Makai Maid Madness;center;130;hint;;red;;;1;;;;;Warp",
            "speak;Shinki;Attack, my creations!",
            "speak;Yumeko;Yes, master!",
            "remove_portrait;Shinki",
            "remove_portrait;Yumeko",
            "add_group;Shinki1;Shinki1;warp;closest",
            "autolevel_to;Shinki_Boss_1;22;fixed",
            "autolevel_to;Yumeko_Boss_2;18;fixed",
            "move_cursor;Shinki_Boss_1",
            "move_cursor;Yumeko_Boss_2",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('Shinki1').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "14 ShinkiSpell1"
    },
    {
        "name": "ShinkiSpell2",
        "trigger": "combat_end",
        "level_nid": "14",
        "condition": "game.check_dead(\"Shinki_Boss_1\") ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Shinki;CenterLeft",
            "add_portrait;PC-98 Alice;FarLeft",
            "speak;;Strings of Oumagatoki;center;130;hint;;red;;;1;;;;;Warp",
            "speak;Shinki;Come with me, Alice!",
            "speak;PC-98 Alice;I'll string you up!",
            "remove_portrait;Shinki",
            "remove_portrait;PC-98 Alice",
            "add_group;Shinki2;Shinki2;warp;closest",
            "autolevel_to;Shinki_Boss_2;22;fixed",
            "autolevel_to;Alice_Boss_5;18;fixed",
            "move_cursor;Shinki_Boss_1",
            "move_cursor;Alice_Boss_5",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('Shinki2').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "14 ShinkiSpell2"
    },
    {
        "name": "ShinkiSpell3",
        "trigger": "combat_end",
        "level_nid": "14",
        "condition": "game.check_dead(\"Shinki_Boss_2\") ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Shinki;Left",
            "speak;;Hour of Demons: Oumagatoki;center;130;hint;;red;;;1;;;;;Warp",
            "speak;Shinki;Demons of Makai, march to the aid of your master!",
            "remove_portrait;Shinki",
            "add_group;Shinki3;Shinki3;warp;closest",
            "autolevel_to;Shinki_Boss_3;22;fixed",
            "autolevel_to;Sara_Boss_2;18;fixed",
            "autolevel_to;Louise_Boss_2;18;fixed",
            "move_cursor;Shinki_Boss_3",
            "move_cursor;15,3",
            "add_group;Cultists;Cultists;warp;closest",
            "move_cursor;Shinki_Boss_3",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('Shinki3').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "14 ShinkiSpell3"
    },
    {
        "name": "YukiMaiSpell",
        "trigger": "combat_end",
        "level_nid": "14",
        "condition": "game.check_dead(\"Mai_Boss_1\") and game.check_dead(\"Yuki_Boss\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Strawberry Crisis",
            "change_music;player_battle;Strawberry Crisis",
            "change_music;enemy_phase;Strawberry Crisis",
            "change_music;enemy_battle;Strawberry Crisis",
            "change_music;enemy2_phase;Strawberry Crisis",
            "change_music;enemy2_battle;Strawberry Crisis",
            "add_portrait;Yuki;FarLeft",
            "add_portrait;Mai;CenterLeft",
            "speak;;Cold and Hot \"Samidare Broiler\";center;165;hint;;red;;;1;;;;;Warp",
            "speak;Yuki;Alright, time to come in, guns blazing!",
            "speak;Mai;Freeze to death!",
            "remove_portrait;Yuki",
            "remove_portrait;Mai",
            "add_group;YukiMai;YukiMai;warp;closest",
            "autolevel_to;Yuki_Boss_1;18;fixed",
            "autolevel_to;Mai_Boss_2;18;fixed",
            "move_cursor;Yuki_Boss_1",
            "move_cursor;Mai_Boss_2",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('YukiMai').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "14 YukiMaiSpell"
    },
    {
        "name": "DeathYuki",
        "trigger": "unit_death",
        "level_nid": "14",
        "condition": "unit.nid == 'Yuki_Boss_1' and game.check_dead(\"Mai_Boss_2\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_bexp;200"
        ],
        "nid": "14 DeathYuki"
    },
    {
        "name": "DeathMai",
        "trigger": "unit_death",
        "level_nid": "14",
        "condition": "unit.nid == 'Mai_Boss_2' and game.check_dead(\"Yuki_Boss_1\")",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_bexp;200"
        ],
        "nid": "14 DeathMai"
    },
    {
        "name": "FightYumemi/Reimu",
        "trigger": "combat_start",
        "level_nid": "6",
        "condition": "unit.nid == \"Yumemi_Boss\" and unit2.nid == \"Reimu\"",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "hide_combat_ui",
            "music;Strawberry Crisis",
            "add_portrait;Yumemi;Left",
            "expression;Yumemi;Smile",
            "speak;Yumemi;Hmm, a familar face.",
            "add_portrait;Reimu;Right",
            "speak;Reimu;Do I know you? I can't really tell.",
            "speak;Yumemi;Aha, it must be a side effect from the-",
            "speak;Reimu;Ah I don't care, let's just get this over with!",
            "multi_remove_portrait;Reimu;Yumemi",
            "show_combat_ui"
        ],
        "nid": "6 FightYumemi/Reimu"
    },
    {
        "name": "DeathMima",
        "trigger": "unit_death",
        "level_nid": "14",
        "condition": "unit.nid == 'Mima_Boss_1' ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_bexp;200"
        ],
        "nid": "14 DeathMima"
    },
    {
        "name": "DeathShinki",
        "trigger": "unit_death",
        "level_nid": "14",
        "condition": "unit.nid == 'Shinki_Boss_3' ",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "14 DeathShinki"
    },
    {
        "name": "RecruitCultists",
        "trigger": "on_talk",
        "level_nid": "10",
        "condition": "unit.nid == 'Rin' and unit2.nid == '201'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "change_ai;201;Heal",
            "change_ai;202;Pursue",
            "change_ai;203;Pursue",
            "remove_talk;Rin;201"
        ],
        "nid": "10 RecruitCultists"
    },
    {
        "name": "FATIGUE READD",
        "trigger": "level_start",
        "level_nid": null,
        "condition": "not 'Intermission' in game.level.tags",
        "commands": [],
        "only_once": false,
        "priority": 99,
        "_source": [
            "for;SHITLING;[x.nid for x in game.get_all_units_in_party()]",
            "    if;v('{SHITLING}_fat_store')",
            "        add_fatigue;{SHITLING};{v:{SHITLING}_fat_store}",
            "        game_var;{SHITLING}_fat_store;0",
            "    end",
            "endf"
        ],
        "nid": "Global FATIGUE READD"
    },
    {
        "name": "FATIGUE STORE",
        "trigger": "level_end",
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "for;SHITLING;[x.nid for x in game.get_all_units_in_party()]",
            "    if;u('{SHITLING}').get_fatigue()",
            "        game_var;{SHITLING}_fat_store;u('{SHITLING}').get_fatigue()",
            "        if;v('{SHITLING}_fat_store')",
            "            add_fatigue;{SHITLING};-{v:{SHITLING}_fat_store}",
            "        end",
            "    end",
            "endf"
        ],
        "nid": "Global FATIGUE STORE"
    },
    {
        "name": "Curry",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "give_skill;{unit};Too_Hot;no_banner"
        ],
        "nid": "Global Curry"
    },
    {
        "name": "SoulCharge1",
        "trigger": null,
        "level_nid": null,
        "condition": "False",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "inc_game_var;SoulCharge;-4"
        ],
        "nid": "Global SoulCharge1"
    },
    {
        "name": "New Event",
        "trigger": null,
        "level_nid": "Special",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            ""
        ],
        "nid": "Special New Event"
    }
]