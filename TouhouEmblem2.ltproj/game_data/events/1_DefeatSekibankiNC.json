[
    {
        "name": "DefeatSekibankiNC",
        "trigger": "unit_death",
        "level_nid": "1",
        "condition": "unit1.nid == \"Sekibanki_Boss\" and unit2 == None",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Dullahan Under the Willows",
            "change_music;player_battle;Dullahan Under the Willows",
            "change_music;enemy_phase;Dullahan Under the Willows",
            "change_music;enemy_battle;Dullahan Under the Willows",
            "change_music;other_phase;Dullahan Under the Willows",
            "change_music;other_battle;Dullahan Under the Willows",
            "kill_unit;Sekibanki_Boss",
            "add_portrait;Sekibanki;Left",
            "speak;Sekibanki;Heheh...I'm not done just yet...",
            "level_var;SekibankiSpellMusic;1",
            "music;Dullahan Under the Willows",
            "speak;;Flying Head \"Multiplicative Head\";center;170;hint;;red;;;1;;;;;Warp",
            "add_group;SekibankiSpell;SekibankiSpell;warp;closest",
            "autolevel_to;Sekibanki_Boss_1;6;fixed",
            "move_cursor;Sekibanki_Boss_1",
            "speak;Sekibanki;There's no escaping my many heads!",
            "remove_portrait;Sekibanki",
            "level_var;BankiDead1;1",
            "",
            "for;HEAD;game.level.unit_groups.get('SekibankiSpell').units",
            "    if;u('{HEAD}').nid != 'Sekibanki_Boss_1'",
            "        change_portrait;{HEAD};sekibanki-head",
            "    end",
            "    if;game.phase.get_current() == 'enemy'",
            "        has_finished;{HEAD}",
            "    end",
            "endf"
        ],
        "nid": "1 DefeatSekibankiNC"
    }
]