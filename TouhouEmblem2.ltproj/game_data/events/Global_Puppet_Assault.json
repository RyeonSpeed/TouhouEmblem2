[
    {
        "name": "Puppet Assault",
        "trigger": "turn_change",
        "level_nid": null,
        "condition": "game.turncount == 1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;u('Alice') and u('Alice').position",
            "game_var;AlicePosition;u('Alice').position",
            "change_party;Shanghai;Reimu",
            "change_party;Hourai;Reimu",
            "load_unit;Shanghai;player",
            "load_unit;Hourai;player",
            "add_unit;Shanghai;{v:AlicePosition};warp;closest",
            "add_unit;Hourai;{v:AlicePosition};warp;closest",
            "game_var;DollFatigue;u('Shanghai').get_fatigue()*-1",
            "add_fatigue;Shanghai;{v:DollFatigue}",
            "game_var;DollFatigue;u('Hourai').get_fatigue()*-1",
            "add_fatigue;Hourai;{v:DollFatigue}",
            "if;'Reginleif_S' in [x.nid for x in u('Shanghai').items]",
            "    set_item_uses;Shanghai;Reginleif_S;{e:get_item('Shanghai','Reginleif_S').data['starting_uses']}",
            "else",
            "    give_item;Shanghai;Reginleif_S;no_banner",
            "end",
            "if;'Horseslayer_S' in [x.nid for x in u('Shanghai').items]",
            "    set_item_uses;Shanghai;Horseslayer_S;{e:get_item('Shanghai','Horseslayer_S').data['starting_uses']}",
            "else",
            "    give_item;Shanghai;Horseslayer_S;no_banner",
            "end",
            "if;'Slime_S' in [x.nid for x in u('Hourai').items]",
            "    set_item_uses;Hourai;Slime_S;{e:get_item('Hourai','Slime_S').data['starting_uses']}",
            "else",
            "    give_item;Hourai;Slime_S;no_banner",
            "end",
            "if;'Yomi_S' in [x.nid for x in u('Hourai').items]",
            "    set_item_uses;Hourai;Yomi_S;{e:get_item('Hourai','Yomi_S').data['starting_uses']}",
            "else",
            "    give_item;Hourai;Yomi_S;no_banner",
            "end",
            "end"
        ],
        "nid": "Global Puppet Assault"
    }
]