[
    {
        "name": "DefeatShinki",
        "trigger": "combat_end",
        "level_nid": "14",
        "condition": "game.check_dead(\"Shinki_Boss\") and v('ShinkiDead1') == 0",
        "commands": [],
        "only_once": true,
        "priority": 20,
        "_source": [
            "change_music;player_phase;Last Judgement",
            "change_music;player_battle;Last Judgement",
            "change_music;other_phase;Last Judgement",
            "change_music;enemy_phase;Last Judgement",
            "change_music;enemy_battle;Last Judgement",
            "change_music;other_battle;Last Judgement",
            "add_portrait;Shinki;CenterLeft",
            "add_portrait;Yumeko;FarLeft",
            "speak;;Makai Maid Madness;center;130;hint;;red;;;1;;;;;Warp",
            "speak;Shinki;Attack, my creations!",
            "speak;Yumeko;Yes, master!",
            "remove_portrait;Shinki",
            "remove_portrait;Yumeko",
            "center_cursor;15,25;150",
            "wait;50",
            "add_group;Shinki1A;Shinki1A;warp;closest",
            "wait;200",
            "center_cursor;0,13;150",
            "wait;50",
            "add_group;Shinki1B;Shinki1B;warp;closest",
            "wait;200",
            "center_cursor;21,6;150",
            "wait;50",
            "add_group;Shinki1C;Shinki1C;warp;closest",
            "wait;500",
            "autolevel_to;Shinki_Boss_1;22;fixed",
            "autolevel_to;Yumeko_Boss_2;18;fixed",
            "if;game.phase.get_current() == 'enemy'",
            "for;Spell;game.level.unit_groups.get('Shinki1').units",
            "    has_finished;{Spell}",
            "endf",
            "else",
            "end"
        ],
        "nid": "14 DefeatShinki"
    }
]