[
    {
        "name": "DeathShanghai",
        "trigger": "unit_death",
        "level_nid": null,
        "condition": "unit1.nid == 'Shanghai'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;unit1.traveler",
            "    level_var;traveler;unit1.traveler",
            "    level_var;unit_pos;unit1.position",
            "else",
            "    level_var;traveler;'the bruh'",
            "end",
            "remove_unit;Shanghai",
            "sound;Death",
            "wait;400",
            "if;'{v:traveler}' != 'the bruh'",
            "    add_unit;{v:traveler};{v:unit_pos};fade;stack;fade",
            "end",
            "resurrect;Shanghai",
            "change_party;Shanghai;Dumpster"
        ],
        "nid": "Global DeathShanghai"
    }
]